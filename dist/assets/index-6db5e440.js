function iE(t,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l0={exports:{}},oc={},u0={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),sE=Symbol.for("react.portal"),oE=Symbol.for("react.fragment"),aE=Symbol.for("react.strict_mode"),lE=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),cE=Symbol.for("react.context"),hE=Symbol.for("react.forward_ref"),dE=Symbol.for("react.suspense"),fE=Symbol.for("react.memo"),pE=Symbol.for("react.lazy"),mm=Symbol.iterator;function gE(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var c0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,d0={};function Xs(t,e,r){this.props=t,this.context=e,this.refs=d0,this.updater=r||c0}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f0(){}f0.prototype=Xs.prototype;function Df(t,e,r){this.props=t,this.context=e,this.refs=d0,this.updater=r||c0}var Lf=Df.prototype=new f0;Lf.constructor=Df;h0(Lf,Xs.prototype);Lf.isPureReactComponent=!0;var vm=Array.isArray,p0=Object.prototype.hasOwnProperty,Of={current:null},g0={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,r){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)p0.call(e,i)&&!g0.hasOwnProperty(i)&&(s[i]=e[i]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];s.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)s[i]===void 0&&(s[i]=c[i]);return{$$typeof:Ma,type:t,key:o,ref:l,props:s,_owner:Of.current}}function mE(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function vE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var ym=/\/+/g;function hh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vE(""+t.key):e.toString(36)}function Wl(t,e,r,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Ma:case sE:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+hh(l,0):i,vm(s)?(r="",t!=null&&(r=t.replace(ym,"$&/")+"/"),Wl(s,e,r,"",function(f){return f})):s!=null&&(Mf(s)&&(s=mE(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(ym,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",vm(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+hh(o,c);l+=Wl(o,e,r,h,s)}else if(h=gE(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+hh(o,c++),l+=Wl(o,e,r,h,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function _l(t,e,r){if(t==null)return t;var i=[],s=0;return Wl(t,i,"","",function(o){return e.call(r,o,s++)}),i}function yE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},ql={transition:null},wE={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:Of};Ae.Children={map:_l,forEach:function(t,e,r){_l(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!Mf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Xs;Ae.Fragment=oE;Ae.Profiler=lE;Ae.PureComponent=Df;Ae.StrictMode=aE;Ae.Suspense=dE;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wE;Ae.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=h0({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Of.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)p0.call(e,h)&&!g0.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=r;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Ma,type:t.type,key:s,ref:o,props:i,_owner:l}};Ae.createContext=function(t){return t={$$typeof:cE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uE,_context:t},t.Consumer=t};Ae.createElement=m0;Ae.createFactory=function(t){var e=m0.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:hE,render:t}};Ae.isValidElement=Mf;Ae.lazy=function(t){return{$$typeof:pE,_payload:{_status:-1,_result:t},_init:yE}};Ae.memo=function(t,e){return{$$typeof:fE,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ae.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Ae.useContext=function(t){return Zt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Ae.useId=function(){return Zt.current.useId()};Ae.useImperativeHandle=function(t,e,r){return Zt.current.useImperativeHandle(t,e,r)};Ae.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Ae.useReducer=function(t,e,r){return Zt.current.useReducer(t,e,r)};Ae.useRef=function(t){return Zt.current.useRef(t)};Ae.useState=function(t){return Zt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,r){return Zt.current.useSyncExternalStore(t,e,r)};Ae.useTransition=function(){return Zt.current.useTransition()};Ae.version="18.2.0";u0.exports=Ae;var W=u0.exports;const fr=a0(W),SE=iE({__proto__:null,default:fr},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E=W,CE=Symbol.for("react.element"),EE=Symbol.for("react.fragment"),xE=Object.prototype.hasOwnProperty,kE=_E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TE={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,r){var i,s={},o=null,l=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)xE.call(e,i)&&!TE.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:CE,type:t,key:o,ref:l,props:s,_owner:kE.current}}oc.Fragment=EE;oc.jsx=v0;oc.jsxs=v0;l0.exports=oc;var g=l0.exports,od={},y0={exports:{}},wn={},w0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,G){var J=F.length;F.push(G);e:for(;0<J;){var te=J-1>>>1,ae=F[te];if(0<s(ae,G))F[te]=G,F[J]=ae,J=te;else break e}}function r(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var G=F[0],J=F.pop();if(J!==G){F[0]=J;e:for(var te=0,ae=F.length,oe=ae>>>1;te<oe;){var Se=2*(te+1)-1,xe=F[Se],Ee=Se+1,Pe=F[Ee];if(0>s(xe,J))Ee<ae&&0>s(Pe,xe)?(F[te]=Pe,F[Ee]=J,te=Ee):(F[te]=xe,F[Se]=J,te=Se);else if(Ee<ae&&0>s(Pe,J))F[te]=Pe,F[Ee]=J,te=Ee;else break e}}return G}function s(F,G){var J=F.sortIndex-G.sortIndex;return J!==0?J:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],v=1,y=null,k=3,D=!1,I=!1,L=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var G=r(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=F)i(f),G.sortIndex=G.expirationTime,e(h,G);else break;G=r(f)}}function R(F){if(L=!1,T(F),!I)if(r(h)!==null)I=!0,H(x);else{var G=r(f);G!==null&&X(R,G.startTime-F)}}function x(F,G){I=!1,L&&(L=!1,C($),$=-1),D=!0;var J=k;try{for(T(G),y=r(h);y!==null&&(!(y.expirationTime>G)||F&&!B());){var te=y.callback;if(typeof te=="function"){y.callback=null,k=y.priorityLevel;var ae=te(y.expirationTime<=G);G=t.unstable_now(),typeof ae=="function"?y.callback=ae:y===r(h)&&i(h),T(G)}else i(h);y=r(h)}if(y!==null)var oe=!0;else{var Se=r(f);Se!==null&&X(R,Se.startTime-G),oe=!1}return oe}finally{y=null,k=J,D=!1}}var M=!1,A=null,$=-1,K=5,V=-1;function B(){return!(t.unstable_now()-V<K)}function U(){if(A!==null){var F=t.unstable_now();V=F;var G=!0;try{G=A(!0,F)}finally{G?P():(M=!1,A=null)}}else M=!1}var P;if(typeof E=="function")P=function(){E(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,z=Q.port2;Q.port1.onmessage=U,P=function(){z.postMessage(null)}}else P=function(){O(U,0)};function H(F){A=F,M||(M=!0,P())}function X(F,G){$=O(function(){F(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){I||D||(I=!0,H(x))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(F){switch(k){case 1:case 2:case 3:var G=3;break;default:G=k}var J=k;k=G;try{return F()}finally{k=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=k;k=F;try{return G()}finally{k=J}},t.unstable_scheduleCallback=function(F,G,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,F){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=J+ae,F={id:v++,callback:G,priorityLevel:F,startTime:J,expirationTime:ae,sortIndex:-1},J>te?(F.sortIndex=J,e(f,F),r(h)===null&&F===r(f)&&(L?(C($),$=-1):L=!0,X(R,J-te))):(F.sortIndex=ae,e(h,F),I||D||(I=!0,H(x))),F},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(F){var G=k;return function(){var J=k;k=G;try{return F.apply(this,arguments)}finally{k=J}}}})(S0);w0.exports=S0;var IE=w0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=W,vn=IE;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C0=new Set,na={};function qi(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(na[t]=e,t=0;t<e.length;t++)C0.add(e[t])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=Object.prototype.hasOwnProperty,bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wm={},Sm={};function AE(t){return ad.call(Sm,t)?!0:ad.call(wm,t)?!1:bE.test(t)?Sm[t]=!0:(wm[t]=!0,!1)}function PE(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RE(t,e,r,i){if(e===null||typeof e>"u"||PE(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,r,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var jf=/[\-:]([a-z])/g;function Uf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jf,Uf);Dt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jf,Uf);Dt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jf,Uf);Dt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ff(t,e,r,i){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RE(e,r,s,i)&&(r=null),i||s===null?AE(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Cr=_0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Bf=Symbol.for("react.strict_mode"),ld=Symbol.for("react.profiler"),E0=Symbol.for("react.provider"),x0=Symbol.for("react.context"),$f=Symbol.for("react.forward_ref"),ud=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),Vf=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),_m=Symbol.iterator;function Co(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,dh;function No(t){if(dh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);dh=e&&e[1]||""}return`
`+dh+t}var fh=!1;function ph(t,e){if(!t||fh)return"";fh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,c=o.length-1;1<=l&&0<=c&&s[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==o[c]){var h=`
`+s[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=c);break}}}finally{fh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?No(t):""}function NE(t){switch(t.tag){case 5:return No(t.type);case 16:return No("Lazy");case 13:return No("Suspense");case 19:return No("SuspenseList");case 0:case 2:case 15:return t=ph(t.type,!1),t;case 11:return t=ph(t.type.render,!1),t;case 1:return t=ph(t.type,!0),t;default:return""}}function hd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case ls:return"Portal";case ld:return"Profiler";case Bf:return"StrictMode";case ud:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x0:return(t.displayName||"Context")+".Consumer";case E0:return(t._context.displayName||"Context")+".Provider";case $f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vf:return e=t.displayName||null,e!==null?e:hd(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return hd(t(e))}catch{}}return null}function DE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hd(e);case 8:return e===Bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LE(t){var e=T0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=LE(t))}function I0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=T0(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dd(t,e){var r=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Cm(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Qr(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b0(t,e){e=e.checked,e!=null&&Ff(t,"checked",e,!1)}function fd(t,e){b0(t,e);var r=Qr(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pd(t,e.type,r):e.hasOwnProperty("defaultValue")&&pd(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Em(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function pd(t,e,r){(e!=="number"||du(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Do=Array.isArray;function Es(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Qr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xm(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(re(92));if(Do(r)){if(1<r.length)throw Error(re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Qr(r)}}function A0(t,e){var r=Qr(e.value),i=Qr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function km(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function md(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,R0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OE=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(t){OE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$o[e]=$o[t]})});function N0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||$o.hasOwnProperty(t)&&$o[t]?(""+e).trim():e+"px"}function D0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=N0(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var ME=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(ME[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function yd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=null;function zf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sd=null,xs=null,ks=null;function Tm(t){if(t=Fa(t)){if(typeof Sd!="function")throw Error(re(280));var e=t.stateNode;e&&(e=hc(e),Sd(t.stateNode,t.type,e))}}function L0(t){xs?ks?ks.push(t):ks=[t]:xs=t}function O0(){if(xs){var t=xs,e=ks;if(ks=xs=null,Tm(t),e)for(t=0;t<e.length;t++)Tm(e[t])}}function M0(t,e){return t(e)}function j0(){}var gh=!1;function U0(t,e,r){if(gh)return t(e,r);gh=!0;try{return M0(t,e,r)}finally{gh=!1,(xs!==null||ks!==null)&&(j0(),O0())}}function ia(t,e){var r=t.stateNode;if(r===null)return null;var i=hc(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(re(231,e,typeof r));return r}var _d=!1;if(mr)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){_d=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{_d=!1}function jE(t,e,r,i,s,o,l,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(r,f)}catch(v){this.onError(v)}}var Vo=!1,fu=null,pu=!1,Cd=null,UE={onError:function(t){Vo=!0,fu=t}};function FE(t,e,r,i,s,o,l,c,h){Vo=!1,fu=null,jE.apply(UE,arguments)}function BE(t,e,r,i,s,o,l,c,h){if(FE.apply(this,arguments),Vo){if(Vo){var f=fu;Vo=!1,fu=null}else throw Error(re(198));pu||(pu=!0,Cd=f)}}function Ki(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function F0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Im(t){if(Ki(t)!==t)throw Error(re(188))}function $E(t){var e=t.alternate;if(!e){if(e=Ki(t),e===null)throw Error(re(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Im(s),t;if(o===i)return Im(s),e;o=o.sibling}throw Error(re(188))}if(r.return!==i.return)r=s,i=o;else{for(var l=!1,c=s.child;c;){if(c===r){l=!0,r=s,i=o;break}if(c===i){l=!0,i=s,r=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===r){l=!0,r=o,i=s;break}if(c===i){l=!0,i=o,r=s;break}c=c.sibling}if(!l)throw Error(re(189))}}if(r.alternate!==i)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?t:e}function B0(t){return t=$E(t),t!==null?$0(t):null}function $0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$0(t);if(e!==null)return e;t=t.sibling}return null}var V0=vn.unstable_scheduleCallback,bm=vn.unstable_cancelCallback,VE=vn.unstable_shouldYield,zE=vn.unstable_requestPaint,rt=vn.unstable_now,GE=vn.unstable_getCurrentPriorityLevel,Gf=vn.unstable_ImmediatePriority,z0=vn.unstable_UserBlockingPriority,gu=vn.unstable_NormalPriority,HE=vn.unstable_LowPriority,G0=vn.unstable_IdlePriority,ac=null,Qn=null;function WE(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:YE,qE=Math.log,KE=Math.LN2;function YE(t){return t>>>=0,t===0?32:31-(qE(t)/KE|0)|0}var kl=64,Tl=4194304;function Lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mu(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=r&268435455;if(l!==0){var c=l&~s;c!==0?i=Lo(c):(o&=l,o!==0&&(i=Lo(o)))}else l=r&~s,l!==0?i=Lo(l):o!==0&&(i=Lo(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-On(e),s=1<<r,i|=t[r],e&=~s;return i}function QE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XE(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-On(o),c=1<<l,h=s[l];h===-1?(!(c&r)||c&i)&&(s[l]=QE(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function Ed(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function H0(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function mh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ja(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=r}function JE(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-On(r),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~o}}function Hf(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-On(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var je=0;function W0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q0,Wf,K0,Y0,Q0,xd=!1,Il=[],Ur=null,Fr=null,Br=null,sa=new Map,oa=new Map,br=[],ZE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Am(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function xo(t,e,r,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Fa(e),e!==null&&Wf(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ex(t,e,r,i,s){switch(e){case"focusin":return Ur=xo(Ur,t,e,r,i,s),!0;case"dragenter":return Fr=xo(Fr,t,e,r,i,s),!0;case"mouseover":return Br=xo(Br,t,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return sa.set(o,xo(sa.get(o)||null,t,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,oa.set(o,xo(oa.get(o)||null,t,e,r,i,s)),!0}return!1}function X0(t){var e=vi(t.target);if(e!==null){var r=Ki(e);if(r!==null){if(e=r.tag,e===13){if(e=F0(r),e!==null){t.blockedOn=e,Q0(t.priority,function(){K0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=kd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);wd=i,r.target.dispatchEvent(i),wd=null}else return e=Fa(r),e!==null&&Wf(e),t.blockedOn=r,!1;e.shift()}return!0}function Pm(t,e,r){Kl(t)&&r.delete(e)}function tx(){xd=!1,Ur!==null&&Kl(Ur)&&(Ur=null),Fr!==null&&Kl(Fr)&&(Fr=null),Br!==null&&Kl(Br)&&(Br=null),sa.forEach(Pm),oa.forEach(Pm)}function ko(t,e){t.blockedOn===e&&(t.blockedOn=null,xd||(xd=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,tx)))}function aa(t){function e(s){return ko(s,t)}if(0<Il.length){ko(Il[0],t);for(var r=1;r<Il.length;r++){var i=Il[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Ur!==null&&ko(Ur,t),Fr!==null&&ko(Fr,t),Br!==null&&ko(Br,t),sa.forEach(e),oa.forEach(e),r=0;r<br.length;r++)i=br[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<br.length&&(r=br[0],r.blockedOn===null);)X0(r),r.blockedOn===null&&br.shift()}var Ts=Cr.ReactCurrentBatchConfig,vu=!0;function nx(t,e,r,i){var s=je,o=Ts.transition;Ts.transition=null;try{je=1,qf(t,e,r,i)}finally{je=s,Ts.transition=o}}function rx(t,e,r,i){var s=je,o=Ts.transition;Ts.transition=null;try{je=4,qf(t,e,r,i)}finally{je=s,Ts.transition=o}}function qf(t,e,r,i){if(vu){var s=kd(t,e,r,i);if(s===null)Th(t,e,i,yu,r),Am(t,i);else if(ex(s,t,e,r,i))i.stopPropagation();else if(Am(t,i),e&4&&-1<ZE.indexOf(t)){for(;s!==null;){var o=Fa(s);if(o!==null&&q0(o),o=kd(t,e,r,i),o===null&&Th(t,e,i,yu,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else Th(t,e,i,null,r)}}var yu=null;function kd(t,e,r,i){if(yu=null,t=zf(i),t=vi(t),t!==null)if(e=Ki(t),e===null)t=null;else if(r=e.tag,r===13){if(t=F0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yu=t,null}function J0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GE()){case Gf:return 1;case z0:return 4;case gu:case HE:return 16;case G0:return 536870912;default:return 16}default:return 16}}var Or=null,Kf=null,Yl=null;function Z0(){if(Yl)return Yl;var t,e=Kf,r=e.length,i,s="value"in Or?Or.value:Or.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var l=r-t;for(i=1;i<=l&&e[r-i]===s[o-i];i++);return Yl=s.slice(t,1<i?1-i:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function Rm(){return!1}function Sn(t){function e(r,i,s,o,l){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bl:Rm,this.isPropagationStopped=Rm,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var Js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yf=Sn(Js),Ua=Xe({},Js,{view:0,detail:0}),ix=Sn(Ua),vh,yh,To,lc=Xe({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==To&&(To&&t.type==="mousemove"?(vh=t.screenX-To.screenX,yh=t.screenY-To.screenY):yh=vh=0,To=t),vh)},movementY:function(t){return"movementY"in t?t.movementY:yh}}),Nm=Sn(lc),sx=Xe({},lc,{dataTransfer:0}),ox=Sn(sx),ax=Xe({},Ua,{relatedTarget:0}),wh=Sn(ax),lx=Xe({},Js,{animationName:0,elapsedTime:0,pseudoElement:0}),ux=Sn(lx),cx=Xe({},Js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hx=Sn(cx),dx=Xe({},Js,{data:0}),Dm=Sn(dx),fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gx[t])?!!e[t]:!1}function Qf(){return mx}var vx=Xe({},Ua,{key:function(t){if(t.key){var e=fx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?px[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qf,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yx=Sn(vx),wx=Xe({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=Sn(wx),Sx=Xe({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qf}),_x=Sn(Sx),Cx=Xe({},Js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ex=Sn(Cx),xx=Xe({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=Sn(xx),Tx=[9,13,27,32],Xf=mr&&"CompositionEvent"in window,zo=null;mr&&"documentMode"in document&&(zo=document.documentMode);var Ix=mr&&"TextEvent"in window&&!zo,e1=mr&&(!Xf||zo&&8<zo&&11>=zo),Om=String.fromCharCode(32),Mm=!1;function t1(t,e){switch(t){case"keyup":return Tx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function bx(t,e){switch(t){case"compositionend":return n1(e);case"keypress":return e.which!==32?null:(Mm=!0,Om);case"textInput":return t=e.data,t===Om&&Mm?null:t;default:return null}}function Ax(t,e){if(cs)return t==="compositionend"||!Xf&&t1(t,e)?(t=Z0(),Yl=Kf=Or=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e1&&e.locale!=="ko"?null:e.data;default:return null}}var Px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Px[t.type]:e==="textarea"}function r1(t,e,r,i){L0(i),e=wu(e,"onChange"),0<e.length&&(r=new Yf("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Go=null,la=null;function Rx(t){p1(t,0)}function uc(t){var e=fs(t);if(I0(e))return t}function Nx(t,e){if(t==="change")return e}var i1=!1;if(mr){var Sh;if(mr){var _h="oninput"in document;if(!_h){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),_h=typeof Um.oninput=="function"}Sh=_h}else Sh=!1;i1=Sh&&(!document.documentMode||9<document.documentMode)}function Fm(){Go&&(Go.detachEvent("onpropertychange",s1),la=Go=null)}function s1(t){if(t.propertyName==="value"&&uc(la)){var e=[];r1(e,la,t,zf(t)),U0(Rx,e)}}function Dx(t,e,r){t==="focusin"?(Fm(),Go=e,la=r,Go.attachEvent("onpropertychange",s1)):t==="focusout"&&Fm()}function Lx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uc(la)}function Ox(t,e){if(t==="click")return uc(e)}function Mx(t,e){if(t==="input"||t==="change")return uc(e)}function jx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:jx;function ua(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!ad.call(e,s)||!jn(t[s],e[s]))return!1}return!0}function Bm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $m(t,e){var r=Bm(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bm(r)}}function o1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?o1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a1(){for(var t=window,e=du();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=du(t.document)}return e}function Jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ux(t){var e=a1(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&o1(r.ownerDocument.documentElement,r)){if(i!==null&&Jf(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=$m(r,o);var l=$m(r,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fx=mr&&"documentMode"in document&&11>=document.documentMode,hs=null,Td=null,Ho=null,Id=!1;function Vm(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Id||hs==null||hs!==du(i)||(i=hs,"selectionStart"in i&&Jf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&ua(Ho,i)||(Ho=i,i=wu(Td,"onSelect"),0<i.length&&(e=new Yf("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=hs)))}function Al(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ds={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Ch={},l1={};mr&&(l1=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function cc(t){if(Ch[t])return Ch[t];if(!ds[t])return t;var e=ds[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in l1)return Ch[t]=e[r];return t}var u1=cc("animationend"),c1=cc("animationiteration"),h1=cc("animationstart"),d1=cc("transitionend"),f1=new Map,zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){f1.set(t,e),qi(e,[t])}for(var Eh=0;Eh<zm.length;Eh++){var xh=zm[Eh],Bx=xh.toLowerCase(),$x=xh[0].toUpperCase()+xh.slice(1);ni(Bx,"on"+$x)}ni(u1,"onAnimationEnd");ni(c1,"onAnimationIteration");ni(h1,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(d1,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function Gm(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,BE(i,e,void 0,t),t.currentTarget=null}function p1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&s.isPropagationStopped())break e;Gm(s,c,f),o=h}else for(l=0;l<i.length;l++){if(c=i[l],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&s.isPropagationStopped())break e;Gm(s,c,f),o=h}}}if(pu)throw t=Cd,pu=!1,Cd=null,t}function Ve(t,e){var r=e[Nd];r===void 0&&(r=e[Nd]=new Set);var i=t+"__bubble";r.has(i)||(g1(e,t,2,!1),r.add(i))}function kh(t,e,r){var i=0;e&&(i|=4),g1(r,t,i,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[Pl]){t[Pl]=!0,C0.forEach(function(r){r!=="selectionchange"&&(Vx.has(r)||kh(r,!1,t),kh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,kh("selectionchange",!1,e))}}function g1(t,e,r,i){switch(J0(e)){case 1:var s=nx;break;case 4:s=rx;break;default:s=qf}r=s.bind(null,e,r,t),s=void 0,!_d||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Th(t,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;c!==null;){if(l=vi(c),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}c=c.parentNode}}i=i.return}U0(function(){var f=o,v=zf(r),y=[];e:{var k=f1.get(t);if(k!==void 0){var D=Yf,I=t;switch(t){case"keypress":if(Ql(r)===0)break e;case"keydown":case"keyup":D=yx;break;case"focusin":I="focus",D=wh;break;case"focusout":I="blur",D=wh;break;case"beforeblur":case"afterblur":D=wh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=_x;break;case u1:case c1:case h1:D=ux;break;case d1:D=Ex;break;case"scroll":D=ix;break;case"wheel":D=kx;break;case"copy":case"cut":case"paste":D=hx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Lm}var L=(e&4)!==0,O=!L&&t==="scroll",C=L?k!==null?k+"Capture":null:k;L=[];for(var E=f,T;E!==null;){T=E;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,C!==null&&(R=ia(E,C),R!=null&&L.push(ha(E,R,T)))),O)break;E=E.return}0<L.length&&(k=new D(k,I,null,r,v),y.push({event:k,listeners:L}))}}if(!(e&7)){e:{if(k=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",k&&r!==wd&&(I=r.relatedTarget||r.fromElement)&&(vi(I)||I[vr]))break e;if((D||k)&&(k=v.window===v?v:(k=v.ownerDocument)?k.defaultView||k.parentWindow:window,D?(I=r.relatedTarget||r.toElement,D=f,I=I?vi(I):null,I!==null&&(O=Ki(I),I!==O||I.tag!==5&&I.tag!==6)&&(I=null)):(D=null,I=f),D!==I)){if(L=Nm,R="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(L=Lm,R="onPointerLeave",C="onPointerEnter",E="pointer"),O=D==null?k:fs(D),T=I==null?k:fs(I),k=new L(R,E+"leave",D,r,v),k.target=O,k.relatedTarget=T,R=null,vi(v)===f&&(L=new L(C,E+"enter",I,r,v),L.target=T,L.relatedTarget=O,R=L),O=R,D&&I)t:{for(L=D,C=I,E=0,T=L;T;T=os(T))E++;for(T=0,R=C;R;R=os(R))T++;for(;0<E-T;)L=os(L),E--;for(;0<T-E;)C=os(C),T--;for(;E--;){if(L===C||C!==null&&L===C.alternate)break t;L=os(L),C=os(C)}L=null}else L=null;D!==null&&Hm(y,k,D,L,!1),I!==null&&O!==null&&Hm(y,O,I,L,!0)}}e:{if(k=f?fs(f):window,D=k.nodeName&&k.nodeName.toLowerCase(),D==="select"||D==="input"&&k.type==="file")var x=Nx;else if(jm(k))if(i1)x=Mx;else{x=Lx;var M=Dx}else(D=k.nodeName)&&D.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(x=Ox);if(x&&(x=x(t,f))){r1(y,x,r,v);break e}M&&M(t,k,f),t==="focusout"&&(M=k._wrapperState)&&M.controlled&&k.type==="number"&&pd(k,"number",k.value)}switch(M=f?fs(f):window,t){case"focusin":(jm(M)||M.contentEditable==="true")&&(hs=M,Td=f,Ho=null);break;case"focusout":Ho=Td=hs=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Vm(y,r,v);break;case"selectionchange":if(Fx)break;case"keydown":case"keyup":Vm(y,r,v)}var A;if(Xf)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else cs?t1(t,r)&&($="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(e1&&r.locale!=="ko"&&(cs||$!=="onCompositionStart"?$==="onCompositionEnd"&&cs&&(A=Z0()):(Or=v,Kf="value"in Or?Or.value:Or.textContent,cs=!0)),M=wu(f,$),0<M.length&&($=new Dm($,t,null,r,v),y.push({event:$,listeners:M}),A?$.data=A:(A=n1(r),A!==null&&($.data=A)))),(A=Ix?bx(t,r):Ax(t,r))&&(f=wu(f,"onBeforeInput"),0<f.length&&(v=new Dm("onBeforeInput","beforeinput",null,r,v),y.push({event:v,listeners:f}),v.data=A))}p1(y,e)})}function ha(t,e,r){return{instance:t,listener:e,currentTarget:r}}function wu(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ia(t,r),o!=null&&i.unshift(ha(t,o,s)),o=ia(t,e),o!=null&&i.push(ha(t,o,s))),t=t.return}return i}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hm(t,e,r,i,s){for(var o=e._reactName,l=[];r!==null&&r!==i;){var c=r,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,s?(h=ia(r,o),h!=null&&l.unshift(ha(r,h,c))):s||(h=ia(r,o),h!=null&&l.push(ha(r,h,c)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var zx=/\r\n?/g,Gx=/\u0000|\uFFFD/g;function Wm(t){return(typeof t=="string"?t:""+t).replace(zx,`
`).replace(Gx,"")}function Rl(t,e,r){if(e=Wm(e),Wm(t)!==e&&r)throw Error(re(425))}function Su(){}var bd=null,Ad=null;function Pd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,Hx=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,Wx=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(t){return qm.resolve(null).then(t).catch(qx)}:Rd;function qx(t){setTimeout(function(){throw t})}function Ih(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),aa(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);aa(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Km(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Zs,da="__reactProps$"+Zs,vr="__reactContainer$"+Zs,Nd="__reactEvents$"+Zs,Kx="__reactListeners$"+Zs,Yx="__reactHandles$"+Zs;function vi(t){var e=t[Yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vr]||r[Yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Km(t);t!==null;){if(r=t[Yn])return r;t=Km(t)}return e}t=r,r=t.parentNode}return null}function Fa(t){return t=t[Yn]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function hc(t){return t[da]||null}var Dd=[],ps=-1;function ri(t){return{current:t}}function Ge(t){0>ps||(t.current=Dd[ps],Dd[ps]=null,ps--)}function Be(t,e){ps++,Dd[ps]=t.current,t.current=e}var Xr={},zt=ri(Xr),an=ri(!1),Pi=Xr;function Os(t,e){var r=t.type.contextTypes;if(!r)return Xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ln(t){return t=t.childContextTypes,t!=null}function _u(){Ge(an),Ge(zt)}function Ym(t,e,r){if(zt.current!==Xr)throw Error(re(168));Be(zt,e),Be(an,r)}function m1(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(re(108,DE(t)||"Unknown",s));return Xe({},r,i)}function Cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Pi=zt.current,Be(zt,t),Be(an,an.current),!0}function Qm(t,e,r){var i=t.stateNode;if(!i)throw Error(re(169));r?(t=m1(t,e,Pi),i.__reactInternalMemoizedMergedChildContext=t,Ge(an),Ge(zt),Be(zt,t)):Ge(an),Be(an,r)}var ar=null,dc=!1,bh=!1;function v1(t){ar===null?ar=[t]:ar.push(t)}function Qx(t){dc=!0,v1(t)}function ii(){if(!bh&&ar!==null){bh=!0;var t=0,e=je;try{var r=ar;for(je=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}ar=null,dc=!1}catch(s){throw ar!==null&&(ar=ar.slice(t+1)),V0(Gf,ii),s}finally{je=e,bh=!1}}return null}var gs=[],ms=0,Eu=null,xu=0,_n=[],Cn=0,Ri=null,lr=1,ur="";function pi(t,e){gs[ms++]=xu,gs[ms++]=Eu,Eu=t,xu=e}function y1(t,e,r){_n[Cn++]=lr,_n[Cn++]=ur,_n[Cn++]=Ri,Ri=t;var i=lr;t=ur;var s=32-On(i)-1;i&=~(1<<s),r+=1;var o=32-On(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,lr=1<<32-On(e)+s|r<<s|i,ur=o+t}else lr=1<<o|r<<s|i,ur=t}function Zf(t){t.return!==null&&(pi(t,1),y1(t,1,0))}function ep(t){for(;t===Eu;)Eu=gs[--ms],gs[ms]=null,xu=gs[--ms],gs[ms]=null;for(;t===Ri;)Ri=_n[--Cn],_n[Cn]=null,ur=_n[--Cn],_n[Cn]=null,lr=_n[--Cn],_n[Cn]=null}var mn=null,pn=null,We=!1,Dn=null;function w1(t,e){var r=En(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Xm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,pn=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ri!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=En(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,mn=t,pn=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Od(t){if(We){var e=pn;if(e){var r=e;if(!Xm(t,e)){if(Ld(t))throw Error(re(418));e=$r(r.nextSibling);var i=mn;e&&Xm(t,e)?w1(i,r):(t.flags=t.flags&-4097|2,We=!1,mn=t)}}else{if(Ld(t))throw Error(re(418));t.flags=t.flags&-4097|2,We=!1,mn=t}}}function Jm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function Nl(t){if(t!==mn)return!1;if(!We)return Jm(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pd(t.type,t.memoizedProps)),e&&(e=pn)){if(Ld(t))throw S1(),Error(re(418));for(;e;)w1(t,e),e=$r(e.nextSibling)}if(Jm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){pn=$r(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=mn?$r(t.stateNode.nextSibling):null;return!0}function S1(){for(var t=pn;t;)t=$r(t.nextSibling)}function Ms(){pn=mn=null,We=!1}function tp(t){Dn===null?Dn=[t]:Dn.push(t)}var Xx=Cr.ReactCurrentBatchConfig;function Rn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var ku=ri(null),Tu=null,vs=null,np=null;function rp(){np=vs=Tu=null}function ip(t){var e=ku.current;Ge(ku),t._currentValue=e}function Md(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function Is(t,e){Tu=t,np=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(np!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(Tu===null)throw Error(re(308));vs=t,Tu.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var yi=null;function sp(t){yi===null?yi=[t]:yi.push(t)}function _1(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,sp(e)):(r.next=s.next,s.next=r),e.interleaved=r,yr(t,i)}function yr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ir=!1;function op(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,De&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,yr(t,r)}return s=i.interleaved,s===null?(e.next=e,sp(i)):(e.next=s.next,s.next=e),i.interleaved=e,yr(t,r)}function Xl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Hf(t,r)}}function Zm(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Iu(t,e,r,i){var s=t.updateQueue;Ir=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var h=c,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var v=t.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==l&&(c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=h))}if(o!==null){var y=s.baseState;l=0,v=f=h=null,c=o;do{var k=c.lane,D=c.eventTime;if((i&k)===k){v!==null&&(v=v.next={eventTime:D,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,L=c;switch(k=e,D=r,L.tag){case 1:if(I=L.payload,typeof I=="function"){y=I.call(D,y,k);break e}y=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=L.payload,k=typeof I=="function"?I.call(D,y,k):I,k==null)break e;y=Xe({},y,k);break e;case 2:Ir=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,k=s.effects,k===null?s.effects=[c]:k.push(c))}else D={eventTime:D,lane:k,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(f=v=D,h=y):v=v.next=D,l|=k;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;k=c,c=k.next,k.next=null,s.lastBaseUpdate=k,s.shared.pending=null}}while(1);if(v===null&&(h=y),s.baseState=h,s.firstBaseUpdate=f,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Di|=l,t.lanes=l,t.memoizedState=y}}function ev(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(re(191,s));s.call(i)}}}var E1=new _0.Component().refs;function jd(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Xe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fc={isMounted:function(t){return(t=t._reactInternals)?Ki(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=Jt(),s=Gr(t),o=pr(i,s);o.payload=e,r!=null&&(o.callback=r),e=Vr(t,o,s),e!==null&&(Mn(e,t,s,i),Xl(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=Jt(),s=Gr(t),o=pr(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Vr(t,o,s),e!==null&&(Mn(e,t,s,i),Xl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Jt(),i=Gr(t),s=pr(r,i);s.tag=2,e!=null&&(s.callback=e),e=Vr(t,s,i),e!==null&&(Mn(e,t,i,r),Xl(e,t,i))}};function tv(t,e,r,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!ua(r,i)||!ua(s,o):!0}function x1(t,e,r){var i=!1,s=Xr,o=e.contextType;return typeof o=="object"&&o!==null?o=kn(o):(s=ln(e)?Pi:zt.current,i=e.contextTypes,o=(i=i!=null)?Os(t,s):Xr),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function nv(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&fc.enqueueReplaceState(e,e.state,null)}function Ud(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs=E1,op(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=kn(o):(o=ln(e)?Pi:zt.current,s.context=Os(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(jd(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fc.enqueueReplaceState(s,s.state,null),Iu(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Io(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var i=r.stateNode}if(!i)throw Error(re(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=s.refs;c===E1&&(c=s.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,t))}return t}function Dl(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rv(t){var e=t._init;return e(t._payload)}function k1(t){function e(C,E){if(t){var T=C.deletions;T===null?(C.deletions=[E],C.flags|=16):T.push(E)}}function r(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function i(C,E){for(C=new Map;E!==null;)E.key!==null?C.set(E.key,E):C.set(E.index,E),E=E.sibling;return C}function s(C,E){return C=Hr(C,E),C.index=0,C.sibling=null,C}function o(C,E,T){return C.index=T,t?(T=C.alternate,T!==null?(T=T.index,T<E?(C.flags|=2,E):T):(C.flags|=2,E)):(C.flags|=1048576,E)}function l(C){return t&&C.alternate===null&&(C.flags|=2),C}function c(C,E,T,R){return E===null||E.tag!==6?(E=Oh(T,C.mode,R),E.return=C,E):(E=s(E,T),E.return=C,E)}function h(C,E,T,R){var x=T.type;return x===us?v(C,E,T.props.children,R,T.key):E!==null&&(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Tr&&rv(x)===E.type)?(R=s(E,T.props),R.ref=Io(C,E,T),R.return=C,R):(R=ru(T.type,T.key,T.props,null,C.mode,R),R.ref=Io(C,E,T),R.return=C,R)}function f(C,E,T,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Mh(T,C.mode,R),E.return=C,E):(E=s(E,T.children||[]),E.return=C,E)}function v(C,E,T,R,x){return E===null||E.tag!==7?(E=Ei(T,C.mode,R,x),E.return=C,E):(E=s(E,T),E.return=C,E)}function y(C,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Oh(""+E,C.mode,T),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cl:return T=ru(E.type,E.key,E.props,null,C.mode,T),T.ref=Io(C,null,E),T.return=C,T;case ls:return E=Mh(E,C.mode,T),E.return=C,E;case Tr:var R=E._init;return y(C,R(E._payload),T)}if(Do(E)||Co(E))return E=Ei(E,C.mode,T,null),E.return=C,E;Dl(C,E)}return null}function k(C,E,T,R){var x=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return x!==null?null:c(C,E,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Cl:return T.key===x?h(C,E,T,R):null;case ls:return T.key===x?f(C,E,T,R):null;case Tr:return x=T._init,k(C,E,x(T._payload),R)}if(Do(T)||Co(T))return x!==null?null:v(C,E,T,R,null);Dl(C,T)}return null}function D(C,E,T,R,x){if(typeof R=="string"&&R!==""||typeof R=="number")return C=C.get(T)||null,c(E,C,""+R,x);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:return C=C.get(R.key===null?T:R.key)||null,h(E,C,R,x);case ls:return C=C.get(R.key===null?T:R.key)||null,f(E,C,R,x);case Tr:var M=R._init;return D(C,E,T,M(R._payload),x)}if(Do(R)||Co(R))return C=C.get(T)||null,v(E,C,R,x,null);Dl(E,R)}return null}function I(C,E,T,R){for(var x=null,M=null,A=E,$=E=0,K=null;A!==null&&$<T.length;$++){A.index>$?(K=A,A=null):K=A.sibling;var V=k(C,A,T[$],R);if(V===null){A===null&&(A=K);break}t&&A&&V.alternate===null&&e(C,A),E=o(V,E,$),M===null?x=V:M.sibling=V,M=V,A=K}if($===T.length)return r(C,A),We&&pi(C,$),x;if(A===null){for(;$<T.length;$++)A=y(C,T[$],R),A!==null&&(E=o(A,E,$),M===null?x=A:M.sibling=A,M=A);return We&&pi(C,$),x}for(A=i(C,A);$<T.length;$++)K=D(A,C,$,T[$],R),K!==null&&(t&&K.alternate!==null&&A.delete(K.key===null?$:K.key),E=o(K,E,$),M===null?x=K:M.sibling=K,M=K);return t&&A.forEach(function(B){return e(C,B)}),We&&pi(C,$),x}function L(C,E,T,R){var x=Co(T);if(typeof x!="function")throw Error(re(150));if(T=x.call(T),T==null)throw Error(re(151));for(var M=x=null,A=E,$=E=0,K=null,V=T.next();A!==null&&!V.done;$++,V=T.next()){A.index>$?(K=A,A=null):K=A.sibling;var B=k(C,A,V.value,R);if(B===null){A===null&&(A=K);break}t&&A&&B.alternate===null&&e(C,A),E=o(B,E,$),M===null?x=B:M.sibling=B,M=B,A=K}if(V.done)return r(C,A),We&&pi(C,$),x;if(A===null){for(;!V.done;$++,V=T.next())V=y(C,V.value,R),V!==null&&(E=o(V,E,$),M===null?x=V:M.sibling=V,M=V);return We&&pi(C,$),x}for(A=i(C,A);!V.done;$++,V=T.next())V=D(A,C,$,V.value,R),V!==null&&(t&&V.alternate!==null&&A.delete(V.key===null?$:V.key),E=o(V,E,$),M===null?x=V:M.sibling=V,M=V);return t&&A.forEach(function(U){return e(C,U)}),We&&pi(C,$),x}function O(C,E,T,R){if(typeof T=="object"&&T!==null&&T.type===us&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Cl:e:{for(var x=T.key,M=E;M!==null;){if(M.key===x){if(x=T.type,x===us){if(M.tag===7){r(C,M.sibling),E=s(M,T.props.children),E.return=C,C=E;break e}}else if(M.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Tr&&rv(x)===M.type){r(C,M.sibling),E=s(M,T.props),E.ref=Io(C,M,T),E.return=C,C=E;break e}r(C,M);break}else e(C,M);M=M.sibling}T.type===us?(E=Ei(T.props.children,C.mode,R,T.key),E.return=C,C=E):(R=ru(T.type,T.key,T.props,null,C.mode,R),R.ref=Io(C,E,T),R.return=C,C=R)}return l(C);case ls:e:{for(M=T.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){r(C,E.sibling),E=s(E,T.children||[]),E.return=C,C=E;break e}else{r(C,E);break}else e(C,E);E=E.sibling}E=Mh(T,C.mode,R),E.return=C,C=E}return l(C);case Tr:return M=T._init,O(C,E,M(T._payload),R)}if(Do(T))return I(C,E,T,R);if(Co(T))return L(C,E,T,R);Dl(C,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(r(C,E.sibling),E=s(E,T),E.return=C,C=E):(r(C,E),E=Oh(T,C.mode,R),E.return=C,C=E),l(C)):r(C,E)}return O}var js=k1(!0),T1=k1(!1),Ba={},Xn=ri(Ba),fa=ri(Ba),pa=ri(Ba);function wi(t){if(t===Ba)throw Error(re(174));return t}function ap(t,e){switch(Be(pa,e),Be(fa,t),Be(Xn,Ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:md(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=md(e,t)}Ge(Xn),Be(Xn,e)}function Us(){Ge(Xn),Ge(fa),Ge(pa)}function I1(t){wi(pa.current);var e=wi(Xn.current),r=md(e,t.type);e!==r&&(Be(fa,t),Be(Xn,r))}function lp(t){fa.current===t&&(Ge(Xn),Ge(fa))}var Ye=ri(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ah=[];function up(){for(var t=0;t<Ah.length;t++)Ah[t]._workInProgressVersionPrimary=null;Ah.length=0}var Jl=Cr.ReactCurrentDispatcher,Ph=Cr.ReactCurrentBatchConfig,Ni=0,Qe=null,pt=null,wt=null,Au=!1,Wo=!1,ga=0,Jx=0;function jt(){throw Error(re(321))}function cp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!jn(t[r],e[r]))return!1;return!0}function hp(t,e,r,i,s,o){if(Ni=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?nk:rk,t=r(i,s),Wo){o=0;do{if(Wo=!1,ga=0,25<=o)throw Error(re(301));o+=1,wt=pt=null,e.updateQueue=null,Jl.current=ik,t=r(i,s)}while(Wo)}if(Jl.current=Pu,e=pt!==null&&pt.next!==null,Ni=0,wt=pt=Qe=null,Au=!1,e)throw Error(re(300));return t}function dp(){var t=ga!==0;return ga=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Qe.memoizedState=wt=t:wt=wt.next=t,wt}function Tn(){if(pt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Qe.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(re(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Qe.memoizedState=wt=t:wt=wt.next=t}return wt}function ma(t,e){return typeof e=="function"?e(t):e}function Rh(t){var e=Tn(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var i=pt,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var c=l=null,h=null,f=o;do{var v=f.lane;if((Ni&v)===v)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var y={lane:v,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=y,l=i):h=h.next=y,Qe.lanes|=v,Di|=v}f=f.next}while(f!==null&&f!==o);h===null?l=i:h.next=c,jn(i,e.memoizedState)||(on=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do o=s.lane,Qe.lanes|=o,Di|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Nh(t){var e=Tn(),r=e.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);jn(o,e.memoizedState)||(on=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function b1(){}function A1(t,e){var r=Qe,i=Tn(),s=e(),o=!jn(i.memoizedState,s);if(o&&(i.memoizedState=s,on=!0),i=i.queue,fp(N1.bind(null,r,i,t),[t]),i.getSnapshot!==e||o||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,va(9,R1.bind(null,r,i,s,e),void 0,null),St===null)throw Error(re(349));Ni&30||P1(r,e,s)}return s}function P1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function R1(t,e,r,i){e.value=r,e.getSnapshot=i,D1(e)&&L1(t)}function N1(t,e,r){return r(function(){D1(e)&&L1(t)})}function D1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!jn(t,r)}catch{return!0}}function L1(t){var e=yr(t,1);e!==null&&Mn(e,t,1,-1)}function iv(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=tk.bind(null,Qe,t),[e.memoizedState,t]}function va(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function O1(){return Tn().memoizedState}function Zl(t,e,r,i){var s=Kn();Qe.flags|=t,s.memoizedState=va(1|e,r,void 0,i===void 0?null:i)}function pc(t,e,r,i){var s=Tn();i=i===void 0?null:i;var o=void 0;if(pt!==null){var l=pt.memoizedState;if(o=l.destroy,i!==null&&cp(i,l.deps)){s.memoizedState=va(e,r,o,i);return}}Qe.flags|=t,s.memoizedState=va(1|e,r,o,i)}function sv(t,e){return Zl(8390656,8,t,e)}function fp(t,e){return pc(2048,8,t,e)}function M1(t,e){return pc(4,2,t,e)}function j1(t,e){return pc(4,4,t,e)}function U1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F1(t,e,r){return r=r!=null?r.concat([t]):null,pc(4,4,U1.bind(null,e,t),r)}function pp(){}function B1(t,e){var r=Tn();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&cp(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function $1(t,e){var r=Tn();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&cp(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function V1(t,e,r){return Ni&21?(jn(r,e)||(r=H0(),Qe.lanes|=r,Di|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=r)}function Zx(t,e){var r=je;je=r!==0&&4>r?r:4,t(!0);var i=Ph.transition;Ph.transition={};try{t(!1),e()}finally{je=r,Ph.transition=i}}function z1(){return Tn().memoizedState}function ek(t,e,r){var i=Gr(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},G1(t))H1(e,r);else if(r=_1(t,e,r,i),r!==null){var s=Jt();Mn(r,t,i,s),W1(r,e,i)}}function tk(t,e,r){var i=Gr(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(G1(t))H1(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,r);if(s.hasEagerState=!0,s.eagerState=c,jn(c,l)){var h=e.interleaved;h===null?(s.next=s,sp(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}r=_1(t,e,s,i),r!==null&&(s=Jt(),Mn(r,t,i,s),W1(r,e,i))}}function G1(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function H1(t,e){Wo=Au=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function W1(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Hf(t,r)}}var Pu={readContext:kn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},nk={readContext:kn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:sv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Zl(4194308,4,U1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zl(4,2,t,e)},useMemo:function(t,e){var r=Kn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Kn();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ek.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:pp,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=Zx.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=Qe,s=Kn();if(We){if(r===void 0)throw Error(re(407));r=r()}else{if(r=e(),St===null)throw Error(re(349));Ni&30||P1(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,sv(N1.bind(null,i,o,t),[t]),i.flags|=2048,va(9,R1.bind(null,i,o,r,e),void 0,null),r},useId:function(){var t=Kn(),e=St.identifierPrefix;if(We){var r=ur,i=lr;r=(i&~(1<<32-On(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=ga++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Jx++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rk={readContext:kn,useCallback:B1,useContext:kn,useEffect:fp,useImperativeHandle:F1,useInsertionEffect:M1,useLayoutEffect:j1,useMemo:$1,useReducer:Rh,useRef:O1,useState:function(){return Rh(ma)},useDebugValue:pp,useDeferredValue:function(t){var e=Tn();return V1(e,pt.memoizedState,t)},useTransition:function(){var t=Rh(ma)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:b1,useSyncExternalStore:A1,useId:z1,unstable_isNewReconciler:!1},ik={readContext:kn,useCallback:B1,useContext:kn,useEffect:fp,useImperativeHandle:F1,useInsertionEffect:M1,useLayoutEffect:j1,useMemo:$1,useReducer:Nh,useRef:O1,useState:function(){return Nh(ma)},useDebugValue:pp,useDeferredValue:function(t){var e=Tn();return pt===null?e.memoizedState=t:V1(e,pt.memoizedState,t)},useTransition:function(){var t=Nh(ma)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:b1,useSyncExternalStore:A1,useId:z1,unstable_isNewReconciler:!1};function Fs(t,e){try{var r="",i=e;do r+=NE(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Dh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Fd(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var sk=typeof WeakMap=="function"?WeakMap:Map;function q1(t,e,r){r=pr(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){Nu||(Nu=!0,Yd=i),Fd(t,e)},r}function K1(t,e,r){r=pr(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){Fd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Fd(t,e),typeof i!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function ov(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new sk;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=wk.bind(null,t,e,r),e.then(t,t))}function av(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lv(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=pr(-1,1),e.tag=2,Vr(r,e,1))),r.lanes|=1),t)}var ok=Cr.ReactCurrentOwner,on=!1;function Wt(t,e,r,i){e.child=t===null?T1(e,null,r,i):js(e,t.child,r,i)}function uv(t,e,r,i,s){r=r.render;var o=e.ref;return Is(e,s),i=hp(t,e,r,i,o,s),r=dp(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wr(t,e,s)):(We&&r&&Zf(e),e.flags|=1,Wt(t,e,i,s),e.child)}function cv(t,e,r,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!Cp(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Y1(t,e,o,i,s)):(t=ru(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:ua,r(l,i)&&t.ref===e.ref)return wr(t,e,s)}return e.flags|=1,t=Hr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Y1(t,e,r,i,s){if(t!==null){var o=t.memoizedProps;if(ua(o,i)&&t.ref===e.ref)if(on=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,wr(t,e,s)}return Bd(t,e,r,i,s)}function Q1(t,e,r){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(ws,dn),dn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(ws,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,Be(ws,dn),dn|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,Be(ws,dn),dn|=i;return Wt(t,e,s,r),e.child}function X1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,r,i,s){var o=ln(r)?Pi:zt.current;return o=Os(e,o),Is(e,s),r=hp(t,e,r,i,o,s),i=dp(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,wr(t,e,s)):(We&&i&&Zf(e),e.flags|=1,Wt(t,e,r,s),e.child)}function hv(t,e,r,i,s){if(ln(r)){var o=!0;Cu(e)}else o=!1;if(Is(e,s),e.stateNode===null)eu(t,e),x1(e,r,i),Ud(e,r,i,s),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var h=l.context,f=r.contextType;typeof f=="object"&&f!==null?f=kn(f):(f=ln(r)?Pi:zt.current,f=Os(e,f));var v=r.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||h!==f)&&nv(e,l,i,f),Ir=!1;var k=e.memoizedState;l.state=k,Iu(e,i,l,s),h=e.memoizedState,c!==i||k!==h||an.current||Ir?(typeof v=="function"&&(jd(e,r,v,i),h=e.memoizedState),(c=Ir||tv(e,r,c,i,k,h,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,C1(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:Rn(e.type,c),l.props=f,y=e.pendingProps,k=l.context,h=r.contextType,typeof h=="object"&&h!==null?h=kn(h):(h=ln(r)?Pi:zt.current,h=Os(e,h));var D=r.getDerivedStateFromProps;(v=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==y||k!==h)&&nv(e,l,i,h),Ir=!1,k=e.memoizedState,l.state=k,Iu(e,i,l,s);var I=e.memoizedState;c!==y||k!==I||an.current||Ir?(typeof D=="function"&&(jd(e,r,D,i),I=e.memoizedState),(f=Ir||tv(e,r,f,i,k,I,h)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,I,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,I,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=I),l.props=i,l.state=I,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&k===t.memoizedState||(e.flags|=1024),i=!1)}return $d(t,e,r,i,o,s)}function $d(t,e,r,i,s,o){X1(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&Qm(e,r,!1),wr(t,e,o);i=e.stateNode,ok.current=e;var c=l&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=js(e,t.child,null,o),e.child=js(e,null,c,o)):Wt(t,e,c,o),e.memoizedState=i.state,s&&Qm(e,r,!0),e.child}function J1(t){var e=t.stateNode;e.pendingContext?Ym(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ym(t,e.context,!1),ap(t,e.containerInfo)}function dv(t,e,r,i,s){return Ms(),tp(s),e.flags|=256,Wt(t,e,r,i),e.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function zd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Z1(t,e,r){var i=e.pendingProps,s=Ye.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Be(Ye,s&1),t===null)return Od(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=vc(l,i,0,null),t=Ei(t,i,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=zd(r),e.memoizedState=Vd,t):gp(e,l));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return ak(t,e,l,i,c,s,r);if(o){o=i.fallback,l=e.mode,s=t.child,c=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Hr(s,h),i.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=Hr(c,o):(o=Ei(o,l,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?zd(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~r,e.memoizedState=Vd,i}return o=t.child,t=o.sibling,i=Hr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function gp(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,r,i){return i!==null&&tp(i),js(e,t.child,null,r),t=gp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ak(t,e,r,i,s,o,l){if(r)return e.flags&256?(e.flags&=-257,i=Dh(Error(re(422))),Ll(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=vc({mode:"visible",children:i.children},s,0,null),o=Ei(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&js(e,t.child,null,l),e.child.memoizedState=zd(l),e.memoizedState=Vd,o);if(!(e.mode&1))return Ll(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error(re(419)),i=Dh(o,i,void 0),Ll(t,e,l,i)}if(c=(l&t.childLanes)!==0,on||c){if(i=St,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,yr(t,s),Mn(i,t,s,-1))}return _p(),i=Dh(Error(re(421))),Ll(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Sk.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,pn=$r(s.nextSibling),mn=e,We=!0,Dn=null,t!==null&&(_n[Cn++]=lr,_n[Cn++]=ur,_n[Cn++]=Ri,lr=t.id,ur=t.overflow,Ri=e),e=gp(e,i.children),e.flags|=4096,e)}function fv(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Md(t.return,e,r)}function Lh(t,e,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function ew(t,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Wt(t,e,i.children,r),i=Ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fv(t,r,e);else if(t.tag===19)fv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Be(Ye,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&bu(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Lh(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bu(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Lh(e,!0,r,null,o);break;case"together":Lh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,r=Hr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Hr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function lk(t,e,r){switch(e.tag){case 3:J1(e),Ms();break;case 5:I1(e);break;case 1:ln(e.type)&&Cu(e);break;case 4:ap(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Be(ku,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Be(Ye,Ye.current&1),e.flags|=128,null):r&e.child.childLanes?Z1(t,e,r):(Be(Ye,Ye.current&1),t=wr(t,e,r),t!==null?t.sibling:null);Be(Ye,Ye.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return ew(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Be(Ye,Ye.current),i)break;return null;case 22:case 23:return e.lanes=0,Q1(t,e,r)}return wr(t,e,r)}var tw,Gd,nw,rw;tw=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gd=function(){};nw=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,wi(Xn.current);var o=null;switch(r){case"input":s=dd(t,s),i=dd(t,i),o=[];break;case"select":s=Xe({},s,{value:void 0}),i=Xe({},i,{value:void 0}),o=[];break;case"textarea":s=gd(t,s),i=gd(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Su)}vd(r,i);var l;r=null;for(f in s)if(!i.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var c=s[f];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(na.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=s!=null?s[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(r||(r={}),r[l]=h[l])}else r||(o||(o=[]),o.push(f,r)),r=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(na.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ve("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}r&&(o=o||[]).push("style",r);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};rw=function(t,e,r,i){r!==i&&(e.flags|=4)};function bo(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function uk(t,e,r){var i=e.pendingProps;switch(ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return ln(e.type)&&_u(),Ut(e),null;case 3:return i=e.stateNode,Us(),Ge(an),Ge(zt),up(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Nl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Jd(Dn),Dn=null))),Gd(t,e),Ut(e),null;case 5:lp(e);var s=wi(pa.current);if(r=e.type,t!==null&&e.stateNode!=null)nw(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(re(166));return Ut(e),null}if(t=wi(Xn.current),Nl(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Yn]=e,i[da]=o,t=(e.mode&1)!==0,r){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ve(Oo[s],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Cm(i,o),Ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ve("invalid",i);break;case"textarea":xm(i,o),Ve("invalid",i)}vd(r,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&Rl(i.textContent,c,t),s=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Rl(i.textContent,c,t),s=["children",""+c]):na.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Ve("scroll",i)}switch(r){case"input":El(i),Em(i,o,!0);break;case"textarea":El(i),km(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Su)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(r,{is:i.is}):(t=l.createElement(r),r==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,r),t[Yn]=e,t[da]=i,tw(t,e,!1,!1),e.stateNode=t;e:{switch(l=yd(r,i),r){case"dialog":Ve("cancel",t),Ve("close",t),s=i;break;case"iframe":case"object":case"embed":Ve("load",t),s=i;break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ve(Oo[s],t);s=i;break;case"source":Ve("error",t),s=i;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=i;break;case"details":Ve("toggle",t),s=i;break;case"input":Cm(t,i),s=dd(t,i),Ve("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Xe({},i,{value:void 0}),Ve("invalid",t);break;case"textarea":xm(t,i),s=gd(t,i),Ve("invalid",t);break;default:s=i}vd(r,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?D0(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&R0(t,h)):o==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&ra(t,h):typeof h=="number"&&ra(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(na.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ve("scroll",t):h!=null&&Ff(t,o,h,l))}switch(r){case"input":El(t),Em(t,i,!1);break;case"textarea":El(t),km(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Es(t,!!i.multiple,o,!1):i.defaultValue!=null&&Es(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Su)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)rw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(re(166));if(r=wi(pa.current),wi(Xn.current),Nl(e)){if(i=e.stateNode,r=e.memoizedProps,i[Yn]=e,(o=i.nodeValue!==r)&&(t=mn,t!==null))switch(t.tag){case 3:Rl(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rl(i.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Yn]=e,e.stateNode=i}return Ut(e),null;case 13:if(Ge(Ye),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&pn!==null&&e.mode&1&&!(e.flags&128))S1(),Ms(),e.flags|=98560,o=!1;else if(o=Nl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(re(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(re(317));o[Yn]=e}else Ms(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),o=!1}else Dn!==null&&(Jd(Dn),Dn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?gt===0&&(gt=3):_p())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Us(),Gd(t,e),t===null&&ca(e.stateNode.containerInfo),Ut(e),null;case 10:return ip(e.type._context),Ut(e),null;case 17:return ln(e.type)&&_u(),Ut(e),null;case 19:if(Ge(Ye),o=e.memoizedState,o===null)return Ut(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)bo(o,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=bu(t),l!==null){for(e.flags|=128,bo(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Be(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&rt()>Bs&&(e.flags|=128,i=!0,bo(o,!1),e.lanes=4194304)}else{if(!i)if(t=bu(l),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!We)return Ut(e),null}else 2*rt()-o.renderingStartTime>Bs&&r!==1073741824&&(e.flags|=128,i=!0,bo(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(r=o.last,r!==null?r.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=rt(),e.sibling=null,r=Ye.current,Be(Ye,i?r&1|2:r&1),e):(Ut(e),null);case 22:case 23:return Sp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?dn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function ck(t,e){switch(ep(e),e.tag){case 1:return ln(e.type)&&_u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Us(),Ge(an),Ge(zt),up(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lp(e),null;case 13:if(Ge(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Ms()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ye),null;case 4:return Us(),null;case 10:return ip(e.type._context),null;case 22:case 23:return Sp(),null;case 24:return null;default:return null}}var Ol=!1,Ft=!1,hk=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ys(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Je(t,e,i)}else r.current=null}function Hd(t,e,r){try{r()}catch(i){Je(t,e,i)}}var pv=!1;function dk(t,e){if(bd=vu,t=a1(),Jf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,c=-1,h=-1,f=0,v=0,y=t,k=null;t:for(;;){for(var D;y!==r||s!==0&&y.nodeType!==3||(c=l+s),y!==o||i!==0&&y.nodeType!==3||(h=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(D=y.firstChild)!==null;)k=y,y=D;for(;;){if(y===t)break t;if(k===r&&++f===s&&(c=l),k===o&&++v===i&&(h=l),(D=y.nextSibling)!==null)break;y=k,k=y.parentNode}y=D}r=c===-1||h===-1?null:{start:c,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ad={focusedElem:t,selectionRange:r},vu=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var L=I.memoizedProps,O=I.memoizedState,C=e.stateNode,E=C.getSnapshotBeforeUpdate(e.elementType===e.type?L:Rn(e.type,L),O);C.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(R){Je(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return I=pv,pv=!1,I}function qo(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Hd(e,r,o)}s=s.next}while(s!==i)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Wd(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function iw(t){var e=t.alternate;e!==null&&(t.alternate=null,iw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[da],delete e[Nd],delete e[Kx],delete e[Yx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sw(t){return t.tag===5||t.tag===3||t.tag===4}function gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Su));else if(i!==4&&(t=t.child,t!==null))for(qd(t,e,r),t=t.sibling;t!==null;)qd(t,e,r),t=t.sibling}function Kd(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Kd(t,e,r),t=t.sibling;t!==null;)Kd(t,e,r),t=t.sibling}var kt=null,Nn=!1;function xr(t,e,r){for(r=r.child;r!==null;)ow(t,e,r),r=r.sibling}function ow(t,e,r){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(ac,r)}catch{}switch(r.tag){case 5:Ft||ys(r,e);case 6:var i=kt,s=Nn;kt=null,xr(t,e,r),kt=i,Nn=s,kt!==null&&(Nn?(t=kt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):kt.removeChild(r.stateNode));break;case 18:kt!==null&&(Nn?(t=kt,r=r.stateNode,t.nodeType===8?Ih(t.parentNode,r):t.nodeType===1&&Ih(t,r),aa(t)):Ih(kt,r.stateNode));break;case 4:i=kt,s=Nn,kt=r.stateNode.containerInfo,Nn=!0,xr(t,e,r),kt=i,Nn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Hd(r,e,l),s=s.next}while(s!==i)}xr(t,e,r);break;case 1:if(!Ft&&(ys(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(c){Je(r,e,c)}xr(t,e,r);break;case 21:xr(t,e,r);break;case 22:r.mode&1?(Ft=(i=Ft)||r.memoizedState!==null,xr(t,e,r),Ft=i):xr(t,e,r);break;default:xr(t,e,r)}}function mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new hk),e.forEach(function(i){var s=_k.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Pn(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Nn=!1;break e;case 3:kt=c.stateNode.containerInfo,Nn=!0;break e;case 4:kt=c.stateNode.containerInfo,Nn=!0;break e}c=c.return}if(kt===null)throw Error(re(160));ow(o,l,s),kt=null,Nn=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(f){Je(s,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aw(e,t),e=e.sibling}function aw(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),Hn(t),i&4){try{qo(3,t,t.return),gc(3,t)}catch(L){Je(t,t.return,L)}try{qo(5,t,t.return)}catch(L){Je(t,t.return,L)}}break;case 1:Pn(e,t),Hn(t),i&512&&r!==null&&ys(r,r.return);break;case 5:if(Pn(e,t),Hn(t),i&512&&r!==null&&ys(r,r.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(L){Je(t,t.return,L)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=r!==null?r.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&b0(s,o),yd(c,l);var f=yd(c,o);for(l=0;l<h.length;l+=2){var v=h[l],y=h[l+1];v==="style"?D0(s,y):v==="dangerouslySetInnerHTML"?R0(s,y):v==="children"?ra(s,y):Ff(s,v,y,f)}switch(c){case"input":fd(s,o);break;case"textarea":A0(s,o);break;case"select":var k=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?Es(s,!!o.multiple,D,!1):k!==!!o.multiple&&(o.defaultValue!=null?Es(s,!!o.multiple,o.defaultValue,!0):Es(s,!!o.multiple,o.multiple?[]:"",!1))}s[da]=o}catch(L){Je(t,t.return,L)}}break;case 6:if(Pn(e,t),Hn(t),i&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(L){Je(t,t.return,L)}}break;case 3:if(Pn(e,t),Hn(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(L){Je(t,t.return,L)}break;case 4:Pn(e,t),Hn(t);break;case 13:Pn(e,t),Hn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(yp=rt())),i&4&&mv(t);break;case 22:if(v=r!==null&&r.memoizedState!==null,t.mode&1?(Ft=(f=Ft)||v,Pn(e,t),Ft=f):Pn(e,t),Hn(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!v&&t.mode&1)for(ce=t,v=t.child;v!==null;){for(y=ce=v;ce!==null;){switch(k=ce,D=k.child,k.tag){case 0:case 11:case 14:case 15:qo(4,k,k.return);break;case 1:ys(k,k.return);var I=k.stateNode;if(typeof I.componentWillUnmount=="function"){i=k,r=k.return;try{e=i,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(L){Je(i,r,L)}}break;case 5:ys(k,k.return);break;case 22:if(k.memoizedState!==null){yv(y);continue}}D!==null?(D.return=k,ce=D):yv(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=N0("display",l))}catch(L){Je(t,t.return,L)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(L){Je(t,t.return,L)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Pn(e,t),Hn(t),i&4&&mv(t);break;case 21:break;default:Pn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(sw(r)){var i=r;break e}r=r.return}throw Error(re(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ra(s,""),i.flags&=-33);var o=gv(t);Kd(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,c=gv(t);qd(t,c,l);break;default:throw Error(re(161))}}catch(h){Je(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fk(t,e,r){ce=t,lw(t)}function lw(t,e,r){for(var i=(t.mode&1)!==0;ce!==null;){var s=ce,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Ol;if(!l){var c=s.alternate,h=c!==null&&c.memoizedState!==null||Ft;c=Ol;var f=Ft;if(Ol=l,(Ft=h)&&!f)for(ce=s;ce!==null;)l=ce,h=l.child,l.tag===22&&l.memoizedState!==null?wv(s):h!==null?(h.return=l,ce=h):wv(s);for(;o!==null;)ce=o,lw(o),o=o.sibling;ce=s,Ol=c,Ft=f}vv(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ce=o):vv(t)}}function vv(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||gc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ft)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Rn(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ev(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ev(e,l,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var v=f.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&aa(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Ft||e.flags&512&&Wd(e)}catch(k){Je(e,e.return,k)}}if(e===t){ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,ce=r;break}ce=e.return}}function yv(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ce=r;break}ce=e.return}}function wv(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gc(4,e)}catch(h){Je(e,r,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(h){Je(e,s,h)}}var o=e.return;try{Wd(e)}catch(h){Je(e,o,h)}break;case 5:var l=e.return;try{Wd(e)}catch(h){Je(e,l,h)}}}catch(h){Je(e,e.return,h)}if(e===t){ce=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ce=c;break}ce=e.return}}var pk=Math.ceil,Ru=Cr.ReactCurrentDispatcher,mp=Cr.ReactCurrentOwner,xn=Cr.ReactCurrentBatchConfig,De=0,St=null,ht=null,At=0,dn=0,ws=ri(0),gt=0,ya=null,Di=0,mc=0,vp=0,Ko=null,rn=null,yp=0,Bs=1/0,or=null,Nu=!1,Yd=null,zr=null,Ml=!1,Mr=null,Du=0,Yo=0,Qd=null,tu=-1,nu=0;function Jt(){return De&6?rt():tu!==-1?tu:tu=rt()}function Gr(t){return t.mode&1?De&2&&At!==0?At&-At:Xx.transition!==null?(nu===0&&(nu=H0()),nu):(t=je,t!==0||(t=window.event,t=t===void 0?16:J0(t.type)),t):1}function Mn(t,e,r,i){if(50<Yo)throw Yo=0,Qd=null,Error(re(185));ja(t,r,i),(!(De&2)||t!==St)&&(t===St&&(!(De&2)&&(mc|=r),gt===4&&Ar(t,At)),un(t,i),r===1&&De===0&&!(e.mode&1)&&(Bs=rt()+500,dc&&ii()))}function un(t,e){var r=t.callbackNode;XE(t,e);var i=mu(t,t===St?At:0);if(i===0)r!==null&&bm(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&bm(r),e===1)t.tag===0?Qx(Sv.bind(null,t)):v1(Sv.bind(null,t)),Wx(function(){!(De&6)&&ii()}),r=null;else{switch(W0(i)){case 1:r=Gf;break;case 4:r=z0;break;case 16:r=gu;break;case 536870912:r=G0;break;default:r=gu}r=mw(r,uw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function uw(t,e){if(tu=-1,nu=0,De&6)throw Error(re(327));var r=t.callbackNode;if(bs()&&t.callbackNode!==r)return null;var i=mu(t,t===St?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Lu(t,i);else{e=i;var s=De;De|=2;var o=hw();(St!==t||At!==e)&&(or=null,Bs=rt()+500,Ci(t,e));do try{vk();break}catch(c){cw(t,c)}while(1);rp(),Ru.current=o,De=s,ht!==null?e=0:(St=null,At=0,e=gt)}if(e!==0){if(e===2&&(s=Ed(t),s!==0&&(i=s,e=Xd(t,s))),e===1)throw r=ya,Ci(t,0),Ar(t,i),un(t,rt()),r;if(e===6)Ar(t,i);else{if(s=t.current.alternate,!(i&30)&&!gk(s)&&(e=Lu(t,i),e===2&&(o=Ed(t),o!==0&&(i=o,e=Xd(t,o))),e===1))throw r=ya,Ci(t,0),Ar(t,i),un(t,rt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(re(345));case 2:gi(t,rn,or);break;case 3:if(Ar(t,i),(i&130023424)===i&&(e=yp+500-rt(),10<e)){if(mu(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rd(gi.bind(null,t,rn,or),e);break}gi(t,rn,or);break;case 4:if(Ar(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-On(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*pk(i/1960))-i,10<i){t.timeoutHandle=Rd(gi.bind(null,t,rn,or),i);break}gi(t,rn,or);break;case 5:gi(t,rn,or);break;default:throw Error(re(329))}}}return un(t,rt()),t.callbackNode===r?uw.bind(null,t):null}function Xd(t,e){var r=Ko;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=Lu(t,e),t!==2&&(e=rn,rn=r,e!==null&&Jd(e)),t}function Jd(t){rn===null?rn=t:rn.push.apply(rn,t)}function gk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!jn(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~vp,e&=~mc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-On(e),i=1<<r;t[r]=-1,e&=~i}}function Sv(t){if(De&6)throw Error(re(327));bs();var e=mu(t,0);if(!(e&1))return un(t,rt()),null;var r=Lu(t,e);if(t.tag!==0&&r===2){var i=Ed(t);i!==0&&(e=i,r=Xd(t,i))}if(r===1)throw r=ya,Ci(t,0),Ar(t,e),un(t,rt()),r;if(r===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,rn,or),un(t,rt()),null}function wp(t,e){var r=De;De|=1;try{return t(e)}finally{De=r,De===0&&(Bs=rt()+500,dc&&ii())}}function Li(t){Mr!==null&&Mr.tag===0&&!(De&6)&&bs();var e=De;De|=1;var r=xn.transition,i=je;try{if(xn.transition=null,je=1,t)return t()}finally{je=i,xn.transition=r,De=e,!(De&6)&&ii()}}function Sp(){dn=ws.current,Ge(ws)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Hx(r)),ht!==null)for(r=ht.return;r!==null;){var i=r;switch(ep(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_u();break;case 3:Us(),Ge(an),Ge(zt),up();break;case 5:lp(i);break;case 4:Us();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:ip(i.type._context);break;case 22:case 23:Sp()}r=r.return}if(St=t,ht=t=Hr(t.current,null),At=dn=e,gt=0,ya=null,vp=mc=Di=0,rn=Ko=null,yi!==null){for(e=0;e<yi.length;e++)if(r=yi[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}r.pending=i}yi=null}return t}function cw(t,e){do{var r=ht;try{if(rp(),Jl.current=Pu,Au){for(var i=Qe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Au=!1}if(Ni=0,wt=pt=Qe=null,Wo=!1,ga=0,mp.current=null,r===null||r.return===null){gt=1,ya=e,ht=null;break}e:{var o=t,l=r.return,c=r,h=e;if(e=At,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,v=c,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var k=v.alternate;k?(v.updateQueue=k.updateQueue,v.memoizedState=k.memoizedState,v.lanes=k.lanes):(v.updateQueue=null,v.memoizedState=null)}var D=av(l);if(D!==null){D.flags&=-257,lv(D,l,c,o,e),D.mode&1&&ov(o,f,e),e=D,h=f;var I=e.updateQueue;if(I===null){var L=new Set;L.add(h),e.updateQueue=L}else I.add(h);break e}else{if(!(e&1)){ov(o,f,e),_p();break e}h=Error(re(426))}}else if(We&&c.mode&1){var O=av(l);if(O!==null){!(O.flags&65536)&&(O.flags|=256),lv(O,l,c,o,e),tp(Fs(h,c));break e}}o=h=Fs(h,c),gt!==4&&(gt=2),Ko===null?Ko=[o]:Ko.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var C=q1(o,h,e);Zm(o,C);break e;case 1:c=h;var E=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(zr===null||!zr.has(T)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=K1(o,c,e);Zm(o,R);break e}}o=o.return}while(o!==null)}fw(r)}catch(x){e=x,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(1)}function hw(){var t=Ru.current;return Ru.current=Pu,t===null?Pu:t}function _p(){(gt===0||gt===3||gt===2)&&(gt=4),St===null||!(Di&268435455)&&!(mc&268435455)||Ar(St,At)}function Lu(t,e){var r=De;De|=2;var i=hw();(St!==t||At!==e)&&(or=null,Ci(t,e));do try{mk();break}catch(s){cw(t,s)}while(1);if(rp(),De=r,Ru.current=i,ht!==null)throw Error(re(261));return St=null,At=0,gt}function mk(){for(;ht!==null;)dw(ht)}function vk(){for(;ht!==null&&!VE();)dw(ht)}function dw(t){var e=gw(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?fw(t):ht=e,mp.current=null}function fw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=ck(r,e),r!==null){r.flags&=32767,ht=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ht=null;return}}else if(r=uk(r,e,dn),r!==null){ht=r;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);gt===0&&(gt=5)}function gi(t,e,r){var i=je,s=xn.transition;try{xn.transition=null,je=1,yk(t,e,r,i)}finally{xn.transition=s,je=i}return null}function yk(t,e,r,i){do bs();while(Mr!==null);if(De&6)throw Error(re(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(JE(t,o),t===St&&(ht=St=null,At=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ml||(Ml=!0,mw(gu,function(){return bs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=xn.transition,xn.transition=null;var l=je;je=1;var c=De;De|=4,mp.current=null,dk(t,r),aw(r,t),Ux(Ad),vu=!!bd,Ad=bd=null,t.current=r,fk(r),zE(),De=c,je=l,xn.transition=o}else t.current=r;if(Ml&&(Ml=!1,Mr=t,Du=s),o=t.pendingLanes,o===0&&(zr=null),WE(r.stateNode),un(t,rt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Nu)throw Nu=!1,t=Yd,Yd=null,t;return Du&1&&t.tag!==0&&bs(),o=t.pendingLanes,o&1?t===Qd?Yo++:(Yo=0,Qd=t):Yo=0,ii(),null}function bs(){if(Mr!==null){var t=W0(Du),e=xn.transition,r=je;try{if(xn.transition=null,je=16>t?16:t,Mr===null)var i=!1;else{if(t=Mr,Mr=null,Du=0,De&6)throw Error(re(331));var s=De;for(De|=4,ce=t.current;ce!==null;){var o=ce,l=o.child;if(ce.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(ce=f;ce!==null;){var v=ce;switch(v.tag){case 0:case 11:case 15:qo(8,v,o)}var y=v.child;if(y!==null)y.return=v,ce=y;else for(;ce!==null;){v=ce;var k=v.sibling,D=v.return;if(iw(v),v===f){ce=null;break}if(k!==null){k.return=D,ce=k;break}ce=D}}}var I=o.alternate;if(I!==null){var L=I.child;if(L!==null){I.child=null;do{var O=L.sibling;L.sibling=null,L=O}while(L!==null)}}ce=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ce=l;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qo(9,o,o.return)}var C=o.sibling;if(C!==null){C.return=o.return,ce=C;break e}ce=o.return}}var E=t.current;for(ce=E;ce!==null;){l=ce;var T=l.child;if(l.subtreeFlags&2064&&T!==null)T.return=l,ce=T;else e:for(l=E;ce!==null;){if(c=ce,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:gc(9,c)}}catch(x){Je(c,c.return,x)}if(c===l){ce=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,ce=R;break e}ce=c.return}}if(De=s,ii(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(ac,t)}catch{}i=!0}return i}finally{je=r,xn.transition=e}}return!1}function _v(t,e,r){e=Fs(r,e),e=q1(t,e,1),t=Vr(t,e,1),e=Jt(),t!==null&&(ja(t,1,e),un(t,e))}function Je(t,e,r){if(t.tag===3)_v(t,t,r);else for(;e!==null;){if(e.tag===3){_v(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zr===null||!zr.has(i))){t=Fs(r,t),t=K1(e,t,1),e=Vr(e,t,1),t=Jt(),e!==null&&(ja(e,1,t),un(e,t));break}}e=e.return}}function wk(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&r,St===t&&(At&r)===r&&(gt===4||gt===3&&(At&130023424)===At&&500>rt()-yp?Ci(t,0):vp|=r),un(t,e)}function pw(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var r=Jt();t=yr(t,e),t!==null&&(ja(t,e,r),un(t,r))}function Sk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),pw(t,r)}function _k(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(re(314))}i!==null&&i.delete(e),pw(t,r)}var gw;gw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return on=!1,lk(t,e,r);on=!!(t.flags&131072)}else on=!1,We&&e.flags&1048576&&y1(e,xu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;eu(t,e),t=e.pendingProps;var s=Os(e,zt.current);Is(e,r),s=hp(null,e,i,t,s,r);var o=dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(i)?(o=!0,Cu(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,op(e),s.updater=fc,e.stateNode=s,s._reactInternals=e,Ud(e,i,t,r),e=$d(null,e,i,!0,o,r)):(e.tag=0,We&&o&&Zf(e),Wt(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(eu(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Ek(i),t=Rn(i,t),s){case 0:e=Bd(null,e,i,t,r);break e;case 1:e=hv(null,e,i,t,r);break e;case 11:e=uv(null,e,i,t,r);break e;case 14:e=cv(null,e,i,Rn(i.type,t),r);break e}throw Error(re(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),Bd(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),hv(t,e,i,s,r);case 3:e:{if(J1(e),t===null)throw Error(re(387));i=e.pendingProps,o=e.memoizedState,s=o.element,C1(t,e),Iu(e,i,null,r);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Fs(Error(re(423)),e),e=dv(t,e,i,r,s);break e}else if(i!==s){s=Fs(Error(re(424)),e),e=dv(t,e,i,r,s);break e}else for(pn=$r(e.stateNode.containerInfo.firstChild),mn=e,We=!0,Dn=null,r=T1(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ms(),i===s){e=wr(t,e,r);break e}Wt(t,e,i,r)}e=e.child}return e;case 5:return I1(e),t===null&&Od(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Pd(i,s)?l=null:o!==null&&Pd(i,o)&&(e.flags|=32),X1(t,e),Wt(t,e,l,r),e.child;case 6:return t===null&&Od(e),null;case 13:return Z1(t,e,r);case 4:return ap(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=js(e,null,i,r):Wt(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),uv(t,e,i,s,r);case 7:return Wt(t,e,e.pendingProps,r),e.child;case 8:return Wt(t,e,e.pendingProps.children,r),e.child;case 12:return Wt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Be(ku,i._currentValue),i._currentValue=l,o!==null)if(jn(o.value,l)){if(o.children===s.children&&!an.current){e=wr(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=pr(-1,r&-r),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var v=f.pending;v===null?h.next=h:(h.next=v.next,v.next=h),f.pending=h}}o.lanes|=r,h=o.alternate,h!==null&&(h.lanes|=r),Md(o.return,r,e),c.lanes|=r;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(re(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Md(l,r,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Wt(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Is(e,r),s=kn(s),i=i(s),e.flags|=1,Wt(t,e,i,r),e.child;case 14:return i=e.type,s=Rn(i,e.pendingProps),s=Rn(i.type,s),cv(t,e,i,s,r);case 15:return Y1(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Rn(i,s),eu(t,e),e.tag=1,ln(i)?(t=!0,Cu(e)):t=!1,Is(e,r),x1(e,i,s),Ud(e,i,s,r),$d(null,e,i,!0,t,r);case 19:return ew(t,e,r);case 22:return Q1(t,e,r)}throw Error(re(156,e.tag))};function mw(t,e){return V0(t,e)}function Ck(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,r,i){return new Ck(t,e,r,i)}function Cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ek(t){if(typeof t=="function")return Cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$f)return 11;if(t===Vf)return 14}return 2}function Hr(t,e){var r=t.alternate;return r===null?(r=En(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ru(t,e,r,i,s,o){var l=2;if(i=t,typeof t=="function")Cp(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case us:return Ei(r.children,s,o,e);case Bf:l=8,s|=8;break;case ld:return t=En(12,r,e,s|2),t.elementType=ld,t.lanes=o,t;case ud:return t=En(13,r,e,s),t.elementType=ud,t.lanes=o,t;case cd:return t=En(19,r,e,s),t.elementType=cd,t.lanes=o,t;case k0:return vc(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E0:l=10;break e;case x0:l=9;break e;case $f:l=11;break e;case Vf:l=14;break e;case Tr:l=16,i=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=En(l,r,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Ei(t,e,r,i){return t=En(7,t,i,e),t.lanes=r,t}function vc(t,e,r,i){return t=En(22,t,i,e),t.elementType=k0,t.lanes=r,t.stateNode={isHidden:!1},t}function Oh(t,e,r){return t=En(6,t,null,e),t.lanes=r,t}function Mh(t,e,r){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xk(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ep(t,e,r,i,s,o,l,c,h){return t=new xk(t,e,r,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=En(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},op(o),t}function kk(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function vw(t){if(!t)return Xr;t=t._reactInternals;e:{if(Ki(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var r=t.type;if(ln(r))return m1(t,r,e)}return e}function yw(t,e,r,i,s,o,l,c,h){return t=Ep(r,i,!0,t,s,o,l,c,h),t.context=vw(null),r=t.current,i=Jt(),s=Gr(r),o=pr(i,s),o.callback=e??null,Vr(r,o,s),t.current.lanes=s,ja(t,s,i),un(t,i),t}function yc(t,e,r,i){var s=e.current,o=Jt(),l=Gr(s);return r=vw(r),e.context===null?e.context=r:e.pendingContext=r,e=pr(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Vr(s,e,l),t!==null&&(Mn(t,s,l,o),Xl(t,s,l)),l}function Ou(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function xp(t,e){Cv(t,e),(t=t.alternate)&&Cv(t,e)}function Tk(){return null}var ww=typeof reportError=="function"?reportError:function(t){console.error(t)};function kp(t){this._internalRoot=t}wc.prototype.render=kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));yc(t,e,null,null)};wc.prototype.unmount=kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Li(function(){yc(null,t,null,null)}),e[vr]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<br.length&&e!==0&&e<br[r].priority;r++);br.splice(r,0,t),r===0&&X0(t)}};function Tp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ev(){}function Ik(t,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var f=Ou(l);o.call(f)}}var l=yw(e,i,t,0,null,!1,!1,"",Ev);return t._reactRootContainer=l,t[vr]=l.current,ca(t.nodeType===8?t.parentNode:t),Li(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var c=i;i=function(){var f=Ou(h);c.call(f)}}var h=Ep(t,0,!1,null,null,!1,!1,"",Ev);return t._reactRootContainer=h,t[vr]=h.current,ca(t.nodeType===8?t.parentNode:t),Li(function(){yc(e,h,r,i)}),h}function _c(t,e,r,i,s){var o=r._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var c=s;s=function(){var h=Ou(l);c.call(h)}}yc(e,l,t,s)}else l=Ik(r,e,t,s,i);return Ou(l)}q0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Lo(e.pendingLanes);r!==0&&(Hf(e,r|1),un(e,rt()),!(De&6)&&(Bs=rt()+500,ii()))}break;case 13:Li(function(){var i=yr(t,1);if(i!==null){var s=Jt();Mn(i,t,1,s)}}),xp(t,1)}};Wf=function(t){if(t.tag===13){var e=yr(t,134217728);if(e!==null){var r=Jt();Mn(e,t,134217728,r)}xp(t,134217728)}};K0=function(t){if(t.tag===13){var e=Gr(t),r=yr(t,e);if(r!==null){var i=Jt();Mn(r,t,e,i)}xp(t,e)}};Y0=function(){return je};Q0=function(t,e){var r=je;try{return je=t,e()}finally{je=r}};Sd=function(t,e,r){switch(e){case"input":if(fd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=hc(i);if(!s)throw Error(re(90));I0(i),fd(i,s)}}}break;case"textarea":A0(t,r);break;case"select":e=r.value,e!=null&&Es(t,!!r.multiple,e,!1)}};M0=wp;j0=Li;var bk={usingClientEntryPoint:!1,Events:[Fa,fs,hc,L0,O0,wp]},Ao={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Ak={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=B0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||Tk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{ac=jl.inject(Ak),Qn=jl}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bk;wn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tp(e))throw Error(re(200));return kk(t,e,null,r)};wn.createRoot=function(t,e){if(!Tp(t))throw Error(re(299));var r=!1,i="",s=ww;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ep(t,1,!1,null,null,r,!1,i,s),t[vr]=e.current,ca(t.nodeType===8?t.parentNode:t),new kp(e)};wn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=B0(e),t=t===null?null:t.stateNode,t};wn.flushSync=function(t){return Li(t)};wn.hydrate=function(t,e,r){if(!Sc(e))throw Error(re(200));return _c(null,t,e,!0,r)};wn.hydrateRoot=function(t,e,r){if(!Tp(t))throw Error(re(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",l=ww;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=yw(e,null,t,1,r??null,s,!1,o,l),t[vr]=e.current,ca(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new wc(e)};wn.render=function(t,e,r){if(!Sc(e))throw Error(re(200));return _c(null,t,e,!1,r)};wn.unmountComponentAtNode=function(t){if(!Sc(t))throw Error(re(40));return t._reactRootContainer?(Li(function(){_c(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};wn.unstable_batchedUpdates=wp;wn.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!Sc(r))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return _c(t,e,r,!1,i)};wn.version="18.2.0-next-9e3b772b8-20220608";function Sw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sw)}catch(t){console.error(t)}}Sw(),y0.exports=wn;var Pk=y0.exports,xv=Pk;od.createRoot=xv.createRoot,od.hydrateRoot=xv.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},wa.apply(this,arguments)}var jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jr||(jr={}));const kv="popstate";function Rk(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:c}=i.location;return Zd("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:_w(s)}return Dk(e,r,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ip(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nk(){return Math.random().toString(36).substr(2,8)}function Tv(t,e){return{usr:t.state,key:t.key,idx:e}}function Zd(t,e,r,i){return r===void 0&&(r=null),wa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:r,key:e&&e.key||i||Nk()})}function _w(t){let{pathname:e="/",search:r="",hash:i=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function eo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Dk(t,e,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,c=jr.Pop,h=null,f=v();f==null&&(f=0,l.replaceState(wa({},l.state,{idx:f}),""));function v(){return(l.state||{idx:null}).idx}function y(){c=jr.Pop;let O=v(),C=O==null?null:O-f;f=O,h&&h({action:c,location:L.location,delta:C})}function k(O,C){c=jr.Push;let E=Zd(L.location,O,C);r&&r(E,O),f=v()+1;let T=Tv(E,f),R=L.createHref(E);try{l.pushState(T,"",R)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(R)}o&&h&&h({action:c,location:L.location,delta:1})}function D(O,C){c=jr.Replace;let E=Zd(L.location,O,C);r&&r(E,O),f=v();let T=Tv(E,f),R=L.createHref(E);l.replaceState(T,"",R),o&&h&&h({action:c,location:L.location,delta:0})}function I(O){let C=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof O=="string"?O:_w(O);return mt(C,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,C)}let L={get action(){return c},get location(){return t(s,l)},listen(O){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(kv,y),h=O,()=>{s.removeEventListener(kv,y),h=null}},createHref(O){return e(s,O)},createURL:I,encodeLocation(O){let C=I(O);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:k,replace:D,go(O){return l.go(O)}};return L}var Iv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iv||(Iv={}));function Lk(t,e,r){r===void 0&&(r="/");let i=typeof e=="string"?eo(e):e,s=xw(i.pathname||"/",r);if(s==null)return null;let o=Cw(t);Ok(o);let l=null;for(let c=0;l==null&&c<o.length;++c)l=Gk(o[c],qk(s));return l}function Cw(t,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(mt(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let f=xi([i,h.relativePath]),v=r.concat(h);o.children&&o.children.length>0&&(mt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Cw(o.children,e,v,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:Vk(f,o.index),routesMeta:v})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let h of Ew(o.path))s(o,l,h)}),e}function Ew(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=Ew(i.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function Ok(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:zk(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Mk=/^:\w+$/,jk=3,Uk=2,Fk=1,Bk=10,$k=-2,bv=t=>t==="*";function Vk(t,e){let r=t.split("/"),i=r.length;return r.some(bv)&&(i+=$k),e&&(i+=Uk),r.filter(s=>!bv(s)).reduce((s,o)=>s+(Mk.test(o)?jk:o===""?Fk:Bk),i)}function zk(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Gk(t,e){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",v=Hk({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f);if(!v)return null;Object.assign(i,v.params);let y=c.route;o.push({params:i,pathname:xi([s,v.pathname]),pathnameBase:Zk(xi([s,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(s=xi([s,v.pathnameBase]))}return o}function Hk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=Wk(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((f,v,y)=>{if(v==="*"){let k=c[y]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}return f[v]=Kk(c[y]||"",v),f},{}),pathname:o,pathnameBase:l,pattern:t}}function Wk(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ip(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(l,c)=>(i.push(c),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function qk(t){try{return decodeURI(t)}catch(e){return Ip(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kk(t,e){try{return decodeURIComponent(t)}catch(r){return Ip(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),t}}function xw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Yk(t,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?eo(t):t;return{pathname:r?r.startsWith("/")?r:Qk(r,e):e,search:eT(i),hash:tT(s)}}function Qk(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jh(t,e,r,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xk(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Jk(t,e,r,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=eo(t):(s=wa({},t),mt(!s.pathname||!s.pathname.includes("?"),jh("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),jh("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),jh("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,c;if(i||l==null)c=r;else{let y=e.length-1;if(l.startsWith("..")){let k=l.split("/");for(;k[0]==="..";)k.shift(),y-=1;s.pathname=k.join("/")}c=y>=0?e[y]:"/"}let h=Yk(s,c),f=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||v)&&(h.pathname+="/"),h}const xi=t=>t.join("/").replace(/\/\/+/g,"/"),Zk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kw=["post","put","patch","delete"];new Set(kw);const rT=["get",...kw];new Set(rT);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Mu.apply(this,arguments)}const bp=W.createContext(null),iT=W.createContext(null),Cc=W.createContext(null),Ec=W.createContext(null),Yi=W.createContext({outlet:null,matches:[],isDataRoute:!1}),Tw=W.createContext(null);function xc(){return W.useContext(Ec)!=null}function Iw(){return xc()||mt(!1),W.useContext(Ec).location}function bw(t){W.useContext(Cc).static||W.useLayoutEffect(t)}function Fn(){let{isDataRoute:t}=W.useContext(Yi);return t?yT():sT()}function sT(){xc()||mt(!1);let t=W.useContext(bp),{basename:e,navigator:r}=W.useContext(Cc),{matches:i}=W.useContext(Yi),{pathname:s}=Iw(),o=JSON.stringify(Xk(i).map(h=>h.pathnameBase)),l=W.useRef(!1);return bw(()=>{l.current=!0}),W.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let v=Jk(h,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:xi([e,v.pathname])),(f.replace?r.replace:r.push)(v,f.state,f)},[e,r,o,s,t])}function oT(){let{matches:t}=W.useContext(Yi),e=t[t.length-1];return e?e.params:{}}function aT(t,e){return lT(t,e)}function lT(t,e,r){xc()||mt(!1);let{navigator:i}=W.useContext(Cc),{matches:s}=W.useContext(Yi),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Iw(),f;if(e){var v;let L=typeof e=="string"?eo(e):e;c==="/"||(v=L.pathname)!=null&&v.startsWith(c)||mt(!1),f=L}else f=h;let y=f.pathname||"/",k=c==="/"?y:y.slice(c.length)||"/",D=Lk(t,{pathname:k}),I=fT(D&&D.map(L=>Object.assign({},L,{params:Object.assign({},l,L.params),pathname:xi([c,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?c:xi([c,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),s,r);return e&&I?W.createElement(Ec.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:jr.Pop}},I):I}function uT(){let t=vT(),e=nT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),r?W.createElement("pre",{style:s},r):null,o)}const cT=W.createElement(uT,null);class hT extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error?W.createElement(Yi.Provider,{value:this.props.routeContext},W.createElement(Tw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dT(t){let{routeContext:e,match:r,children:i}=t,s=W.useContext(bp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),W.createElement(Yi.Provider,{value:e},i)}function fT(t,e,r){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),t==null){var s;if((s=r)!=null&&s.errors)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let c=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id]));c>=0||mt(!1),o=o.slice(0,Math.min(o.length,c+1))}return o.reduceRight((c,h,f)=>{let v=h.route.id?l==null?void 0:l[h.route.id]:null,y=null;r&&(y=h.route.errorElement||cT);let k=e.concat(o.slice(0,f+1)),D=()=>{let I;return v?I=y:h.route.Component?I=W.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=c,W.createElement(dT,{match:h,routeContext:{outlet:c,matches:k,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?W.createElement(hT,{location:r.location,revalidation:r.revalidation,component:y,error:v,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}var ef;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(ef||(ef={}));var Sa;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(Sa||(Sa={}));function pT(t){let e=W.useContext(bp);return e||mt(!1),e}function gT(t){let e=W.useContext(iT);return e||mt(!1),e}function mT(t){let e=W.useContext(Yi);return e||mt(!1),e}function Aw(t){let e=mT(),r=e.matches[e.matches.length-1];return r.route.id||mt(!1),r.route.id}function vT(){var t;let e=W.useContext(Tw),r=gT(Sa.UseRouteError),i=Aw(Sa.UseRouteError);return e||((t=r.errors)==null?void 0:t[i])}function yT(){let{router:t}=pT(ef.UseNavigateStable),e=Aw(Sa.UseNavigateStable),r=W.useRef(!1);return bw(()=>{r.current=!0}),W.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mu({fromRouteId:e},o)))},[t,e])}function qn(t){mt(!1)}function wT(t){let{basename:e="/",children:r=null,location:i,navigationType:s=jr.Pop,navigator:o,static:l=!1}=t;xc()&&mt(!1);let c=e.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:c,navigator:o,static:l}),[c,o,l]);typeof i=="string"&&(i=eo(i));let{pathname:f="/",search:v="",hash:y="",state:k=null,key:D="default"}=i,I=W.useMemo(()=>{let L=xw(f,c);return L==null?null:{location:{pathname:L,search:v,hash:y,state:k,key:D},navigationType:s}},[c,f,v,y,k,D,s]);return I==null?null:W.createElement(Cc.Provider,{value:h},W.createElement(Ec.Provider,{children:r,value:I}))}function ST(t){let{children:e,location:r}=t;return aT(tf(e),r)}var Av;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(Av||(Av={}));new Promise(()=>{});function tf(t,e){e===void 0&&(e=[]);let r=[];return W.Children.forEach(t,(i,s)=>{if(!W.isValidElement(i))return;let o=[...e,s];if(i.type===W.Fragment){r.push.apply(r,tf(i.props.children,o));return}i.type!==qn&&mt(!1),!i.props.index||!i.props.children||mt(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=tf(i.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const _T="startTransition",Pv=SE[_T];function CT(t){let{basename:e,children:r,future:i,window:s}=t,o=W.useRef();o.current==null&&(o.current=Rk({window:s,v5Compat:!0}));let l=o.current,[c,h]=W.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},v=W.useCallback(y=>{f&&Pv?Pv(()=>h(y)):h(y)},[h,f]);return W.useLayoutEffect(()=>l.listen(v),[l,v]),W.createElement(wT,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:l})}var Rv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Rv||(Rv={}));var Nv;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Nv||(Nv={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},ET=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[r++],l=t[r++],c=t[r++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[r++],l=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,v=o>>2,y=(o&3)<<4|c>>4;let k=(c&15)<<2|f>>6,D=f&63;h||(D=64,l||(k=64)),i.push(r[v],r[y],r[k],r[D])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ET(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=r[t.charAt(s++)],c=s<t.length?r[t.charAt(s)]:0;++s;const f=s<t.length?r[t.charAt(s)]:64;++s;const y=s<t.length?r[t.charAt(s)]:64;if(++s,o==null||c==null||f==null||y==null)throw Error();const k=o<<2|c>>4;if(i.push(k),f!==64){const D=c<<4&240|f>>2;if(i.push(D),y!==64){const I=f<<6&192|y;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xT=function(t){const e=Pw(t);return Rw.encodeByteArray(e,!0)},Nw=function(t){return xT(t).replace(/\./g,"")},kT=function(t){try{return Rw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function Lw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ow(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IT(){return _t().indexOf("Electron/")>=0}function Mw(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bT(){return _t().indexOf("MSAppHost/")>=0}function AT(){return typeof indexedDB=="object"}function PT(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="FirebaseError";class si extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=RT,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$a.prototype.create)}}class $a{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?NT(o,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new si(s,c,i)}}function NT(t,e){return t.replace(DT,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const DT=/\{\$([^}]+)}/g;function LT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ju(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Dv(o)&&Dv(l)){if(!ju(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Dv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function OT(t,e){const r=new MT(t,e);return r.subscribe.bind(r)}class MT{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");jT(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Uh),s.error===void 0&&(s.error=Uh),s.complete===void 0&&(s.complete=Uh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jT(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Uh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t,e){return new Promise((r,i)=>{t.onsuccess=s=>{r(s.target.result)},t.onerror=s=>{var o;i(`${e}: ${(o=s.target.error)===null||o===void 0?void 0:o.message}`)}})}class Lv{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,r="readonly"){return new jw(this._db.transaction.call(this._db,e,r))}createObjectStore(e,r){return new Uw(this._db.createObjectStore(e,r))}close(){this._db.close()}}class jw{constructor(e){this._transaction=e,this.complete=new Promise((r,i)=>{this._transaction.oncomplete=function(){r()},this._transaction.onerror=()=>{i(this._transaction.error)},this._transaction.onabort=()=>{i(this._transaction.error)}})}objectStore(e){return new Uw(this._transaction.objectStore(e))}}class Uw{constructor(e){this._store=e}index(e){return new Ov(this._store.index(e))}createIndex(e,r,i){return new Ov(this._store.createIndex(e,r,i))}get(e){const r=this._store.get(e);return Uo(r,"Error reading from IndexedDB")}put(e,r){const i=this._store.put(e,r);return Uo(i,"Error writing to IndexedDB")}delete(e){const r=this._store.delete(e);return Uo(r,"Error deleting from IndexedDB")}clear(){const e=this._store.clear();return Uo(e,"Error clearing IndexedDB object store")}}class Ov{constructor(e){this._index=e}get(e){const r=this._index.get(e);return Uo(r,"Error reading from IndexedDB")}}function UT(t,e,r){return new Promise((i,s)=>{try{const o=indexedDB.open(t,e);o.onsuccess=l=>{i(new Lv(l.target.result))},o.onerror=l=>{var c;s(`Error opening indexedDB: ${(c=l.target.error)===null||c===void 0?void 0:c.message}`)},o.onupgradeneeded=l=>{r(new Lv(o.result),l.oldVersion,l.newVersion,new jw(o.transaction))}}catch(o){s(`Error opening indexedDB: ${o.message}`)}})}class Jr{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new TT;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($T(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BT(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BT(t){return t===mi?void 0:t}function $T(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new FT(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const zT={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},GT=Oe.INFO,HT={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},WT=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=HT[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=GT,this._logHandler=WT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(KT(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function KT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Mv="0.7.21";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Ap("@firebase/app"),YT="@firebase/app-compat",QT="@firebase/analytics-compat",XT="@firebase/analytics",JT="@firebase/app-check-compat",ZT="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",rI="@firebase/database-compat",iI="@firebase/functions",sI="@firebase/functions-compat",oI="@firebase/installations",aI="@firebase/installations-compat",lI="@firebase/messaging",uI="@firebase/messaging-compat",cI="@firebase/performance",hI="@firebase/performance-compat",dI="@firebase/remote-config",fI="@firebase/remote-config-compat",pI="@firebase/storage",gI="@firebase/storage-compat",mI="@firebase/firestore",vI="@firebase/firestore-compat",yI="firebase",wI="9.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="[DEFAULT]",SI={[nf]:"fire-core",[YT]:"fire-core-compat",[XT]:"fire-analytics",[QT]:"fire-analytics-compat",[ZT]:"fire-app-check",[JT]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[rI]:"fire-rtdb-compat",[iI]:"fire-fn",[sI]:"fire-fn-compat",[oI]:"fire-iid",[aI]:"fire-iid-compat",[lI]:"fire-fcm",[uI]:"fire-fcm-compat",[cI]:"fire-perf",[hI]:"fire-perf-compat",[dI]:"fire-rc",[fI]:"fire-rc-compat",[pI]:"fire-gcs",[gI]:"fire-gcs-compat",[mI]:"fire-fst",[vI]:"fire-fst-compat","fire-js":"fire-js",[yI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,rf=new Map;function _I(t,e){try{t.container.addComponent(e)}catch(r){Pp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Oi(t){const e=t.name;if(rf.has(e))return Pp.debug(`There were multiple attempts to register component ${e}.`),!1;rf.set(e,t);for(const r of Uu.values())_I(r,t);return!0}function kc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},Mi=new $a("app","Firebase",CI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=wI;function xI(t,e={}){typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});const s=Uu.get(i);if(s){if(ju(t,s.options)&&ju(r,s.config))return s;throw Mi.create("duplicate-app",{appName:i})}const o=new VT(i);for(const c of rf.values())o.addComponent(c);const l=new EI(t,r,o);return Uu.set(i,l),l}function Rp(t=Fw){const e=Uu.get(t);if(!e)throw Mi.create("no-app",{appName:t});return e}function Jn(t,e,r){var i;let s=(i=SI[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pp.warn(c.join(" "));return}Oi(new Jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebase-heartbeat-database",TI=1,_a="firebase-heartbeat-store";let Fh=null;function Bw(){return Fh||(Fh=UT(kI,TI,(t,e)=>{switch(e){case 0:t.createObjectStore(_a)}}).catch(t=>{throw Mi.create("storage-open",{originalErrorMessage:t.message})})),Fh}async function II(t){try{return(await Bw()).transaction(_a).objectStore(_a).get($w(t))}catch(e){throw Mi.create("storage-get",{originalErrorMessage:e.message})}}async function jv(t,e){try{const i=(await Bw()).transaction(_a,"readwrite");return await i.objectStore(_a).put(e,$w(t)),i.complete}catch(r){throw Mi.create("storage-set",{originalErrorMessage:r.message})}}function $w(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1024,AI=30*24*60*60*1e3;class PI{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new NI(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Uv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=AI}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Uv(),{heartbeatsToSend:r,unsentEntries:i}=RI(this._heartbeatsCache.heartbeats),s=Nw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Uv(){return new Date().toISOString().substring(0,10)}function RI(t,e=bI){const r=[];let i=t.slice();for(const s of t){const o=r.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Fv(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Fv(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class NI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AT()?PT().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await II(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return jv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return jv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fv(t){return Nw(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){Oi(new Jr("platform-logger",e=>new qT(e),"PRIVATE")),Oi(new Jr("heartbeat",e=>new PI(e),"PRIVATE")),Jn(nf,Mv,t),Jn(nf,Mv,"esm2017"),Jn("fire-js","")}DI("");var LI="firebase",OI="9.6.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn(LI,OI,"app");function Np(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MI=Vw,zw=new $a("auth","Firebase",Vw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Ap("@firebase/auth");function iu(t,...e){Bv.logLevel<=Oe.ERROR&&Bv.error(`Auth (${to}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Dp(t,...e)}function Zn(t,...e){return Dp(t,...e)}function jI(t,e,r){const i=Object.assign(Object.assign({},MI()),{[e]:r});return new $a("auth","Firebase",i).create(e,{appName:t.name})}function Dp(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return zw.create(t,...e)}function ye(t,e,...r){if(!t)throw Dp(e,...r)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function Sr(t,e){t||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function hr(t){Sr(t instanceof Function,"Expected a class definition");let e=$v.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$v.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){const r=kc(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(ju(o,e??{}))return s;Un(s,"already-initialized")}return r.initialize({options:e})}function FI(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BI(){return Vv()==="http:"||Vv()==="https:"}function Vv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BI()||Lw()||"connection"in navigator)?navigator.onLine:!0}function VI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,r){this.shortDelay=e,this.longDelay=r,Sr(r>e,"Short delay should be less than long delay!"),this.isMobile=Dw()||Ow()}get(){return $I()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new za(3e4,6e4);function Ga(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function no(t,e,r,i,s={}){return Hw(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Va(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Gw.fetch()(Ww(t,t.config.apiHost,r,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function Hw(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},zI),e);try{const s=new HI(t),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Bh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Bh(t,"email-already-in-use",l);const v=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jI(t,v,f);Un(t,v)}}catch(s){if(s instanceof si)throw s;Un(t,"network-request-failed")}}async function Ha(t,e,r,i,s={}){const o=await no(t,e,r,i,s);return"mfaPendingCredential"in o&&Un(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Ww(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?Lp(t.config,s):`${t.config.apiScheme}://${s}`}class HI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),GI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bh(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Zn(t,e,i);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return no(t,"POST","/v1/accounts:delete",e)}async function qI(t,e){return no(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KI(t,e=!1){const r=Ke(t),i=await r.getIdToken(e),s=Op(i);ye(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Qo($h(s.auth_time)),issuedAtTime:Qo($h(s.iat)),expirationTime:Qo($h(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $h(t){return Number(t)*1e3}function Op(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=kT(r);return s?JSON.parse(s):(iu("Failed to decode base64 JWT payload"),null)}catch(s){return iu("Caught error parsing JWT payload as JSON",s),null}}function YI(t){const e=Op(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof si&&QI(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function QI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t){var e;const r=t.auth,i=await t.getIdToken(),s=await ji(t,qI(r,{idToken:i}));ye(s==null?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?e2(o.providerUserInfo):[],c=ZI(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),v=h?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qw(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function JI(t){const e=Ke(t);await Fu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZI(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function e2(t){return t.map(e=>{var{providerId:r}=e,i=Np(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e){const r=await Hw(t,{},async()=>{const i=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=Ww(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Gw.fetch()(l,{method:"POST",headers:c,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):YI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return ye(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await t2(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,l=new Ca;return i&&(ye(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ye(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ye(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,o=Np(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qw(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await ji(this,this.stsTokenManager.getToken(this.auth,e));return ye(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return KI(this,e)}reload(){return JI(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await Fu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ji(this,WI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,o,l,c,h,f,v;const y=(i=r.displayName)!==null&&i!==void 0?i:void 0,k=(s=r.email)!==null&&s!==void 0?s:void 0,D=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,I=(l=r.photoURL)!==null&&l!==void 0?l:void 0,L=(c=r.tenantId)!==null&&c!==void 0?c:void 0,O=(h=r._redirectEventId)!==null&&h!==void 0?h:void 0,C=(f=r.createdAt)!==null&&f!==void 0?f:void 0,E=(v=r.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:T,emailVerified:R,isAnonymous:x,providerData:M,stsTokenManager:A}=r;ye(T&&A,e,"internal-error");const $=Ca.fromJSON(this.name,A);ye(typeof T=="string",e,"internal-error"),kr(y,e.name),kr(k,e.name),ye(typeof R=="boolean",e,"internal-error"),ye(typeof x=="boolean",e,"internal-error"),kr(D,e.name),kr(I,e.name),kr(L,e.name),kr(O,e.name),kr(C,e.name),kr(E,e.name);const K=new ki({uid:T,auth:e,email:k,emailVerified:R,displayName:y,isAnonymous:x,photoURL:I,phoneNumber:D,tenantId:L,stsTokenManager:$,createdAt:C,lastLoginAt:E});return M&&Array.isArray(M)&&(K.providerData=M.map(V=>Object.assign({},V))),O&&(K._redirectEventId=O),K}static async _fromIdTokenResponse(e,r,i=!1){const s=new Ca;s.updateFromServerResponse(r);const o=new ki({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Fu(o),o}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Kw.type="NONE";const zv=Kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,r){return`firebase:${t}:${e}:${r}`}class As{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=su(this.userKey,s.apiKey,o),this.fullPersistenceKey=su("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new As(hr(zv),e,i);const s=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||hr(zv);const l=su(i,e.config.apiKey,e.name);let c=null;for(const f of r)try{const v=await f._get(l);if(v){const y=ki._fromJSON(e,v);f!==o&&(c=y),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new As(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(r.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new As(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(eS(e))return"Webos";if(Mp(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Yw(t=_t()){return/firefox\//i.test(t)}function Mp(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(t=_t()){return/crios\//i.test(t)}function Xw(t=_t()){return/iemobile/i.test(t)}function Jw(t=_t()){return/android/i.test(t)}function Zw(t=_t()){return/blackberry/i.test(t)}function eS(t=_t()){return/webos/i.test(t)}function Tc(t=_t()){return/iphone|ipad|ipod/i.test(t)}function n2(t=_t()){var e;return Tc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r2(){return Mw()&&document.documentMode===10}function tS(t=_t()){return Tc(t)||Jw(t)||eS(t)||Zw(t)||/windows phone/i.test(t)||Xw(t)}function i2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e=[]){let r;switch(t){case"Browser":r=Gv(_t());break;case"Worker":r=`${Gv(_t())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${to}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,r,i){this.app=e,this.heartbeatServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hv(this),this.idTokenSubscription=new Hv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zw,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=hr(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await As.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var r;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(i=l.user)}return i?i._redirectEventId?(ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Fu(e)}catch(r){if(r.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?Ke(e):null;return r&&ye(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $a("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&hr(e)||this._popupRedirectResolver;ye(r,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[hr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r),l=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(l,this,"internal-error"),l.then(()=>o(this.currentUser)),typeof r=="function"?e.addObserver(r,i,s):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(r["X-Firebase-Client"]=i),r}}function Ic(t){return Ke(t)}class Hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=OT(r=>this.observer=r)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,r){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function rS(t,e){return no(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e){return Ha(t,"POST","/v1/accounts:signInWithPassword",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e){return Ha(t,"POST","/v1/accounts:signInWithEmailLink",Ga(t,e))}async function l2(t,e){return Ha(t,"POST","/v1/accounts:signInWithEmailLink",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends jp{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ea(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Ea(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return o2(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return a2(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":return rS(e,{idToken:r,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return l2(e,{idToken:r,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e){return Ha(t,"POST","/v1/accounts:signInWithIdp",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="http://localhost";class Ui extends jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Un("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,o=Np(r,["providerId","signInMethod"]);if(!i||!s)return null;const l=new Ui(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const r=this.buildRequest();return Ps(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Ps(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ps(e,r)}buildRequest(){const e={requestUri:u2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Va(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h2(t){const e=Mo(jo(t)).link,r=e?Mo(jo(e)).deep_link_id:null,i=Mo(jo(t)).deep_link_id;return(i?Mo(jo(i)).link:null)||i||r||e||t}class Up{constructor(e){var r,i,s,o,l,c;const h=Mo(jo(e)),f=(r=h.apiKey)!==null&&r!==void 0?r:null,v=(i=h.oobCode)!==null&&i!==void 0?i:null,y=c2((s=h.mode)!==null&&s!==void 0?s:null);ye(f&&v&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const r=h2(e);try{return new Up(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,r){return Ea._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Up.parseLink(r);return ye(i,"argument-error"),Ea._fromEmailAndCode(e,i.code,i.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends iS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Wa{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ui._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return Rr.credential(r,i)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Wa{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends Wa{constructor(){super("twitter.com")}static credential(e,r){return Ui._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return Dr.credential(r,i)}catch{return null}}}Dr.TWITTER_SIGN_IN_METHOD="twitter.com";Dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e){return Ha(t,"POST","/v1/accounts:signUp",Ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await ki._fromIdTokenResponse(e,i,s),l=Wv(i);return new Fi({user:o,providerId:l,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=Wv(i);return new Fi({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function Wv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends si{constructor(e,r,i,s){var o;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new Bu(e,r,i,s)}}function sS(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(t,o,e,i):o})}async function f2(t,e,r=!1){const i=await ji(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Fi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,e,r=!1){const{auth:i}=t,s="reauthenticate";try{const o=await ji(t,sS(i,s,e,t),r);ye(o.idToken,i,"internal-error");const l=Op(o.idToken);ye(l,i,"internal-error");const{sub:c}=l;return ye(t.uid===c,i,"user-mismatch"),Fi._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Un(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(t,e,r=!1){const i="signIn",s=await sS(t,i,e),o=await Fi._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(o.user),o}async function p2(t,e){return aS(Ic(t),e)}async function g2(t,e){return oS(Ke(t),e)}async function m2(t,e,r){const i=Ic(t),s=await d2(i,{returnSecureToken:!0,email:e,password:r}),o=await Fi._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}function v2(t,e,r){return p2(Ke(t),Qi.credential(e,r))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e){return no(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const i=Ke(t),o={idToken:await i.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},l=await ji(i,y2(i.auth,o));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function w2(t,e){return S2(Ke(t),e,null)}async function S2(t,e,r){const{auth:i}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),r&&(o.password=r);const l=await ji(t,rS(i,o));await t._updateTokensIfNecessary(l,!0)}function _2(t,e,r,i){return Ke(t).onAuthStateChanged(e,r,i)}function C2(t){return Ke(t).signOut()}const $u="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem($u,"1"),this.storage.removeItem($u),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){const t=_t();return Mp(t)||Tc(t)}const x2=1e3,k2=10;class uS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=E2()&&i2(),this.fallbackToPolling=tS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!r)return}const s=()=>{const l=this.storage.getItem(i);!r&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);r2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,k2):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},x2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}uS.type="LOCAL";const T2=uS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}cS.type="SESSION";const hS=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new bc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async f=>f(r.origin,o)),h=await I2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=Fp("",20);s.port1.start();const v=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const k=y;if(k.data.eventId===f)switch(k.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(k.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return window}function A2(t){er().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof er().WorkerGlobalScope<"u"&&typeof er().importScripts=="function"}async function P2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function N2(){return dS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",D2=1,Vu="firebaseLocalStorage",pS="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ac(t,e){return t.transaction([Vu],e?"readwrite":"readonly").objectStore(Vu)}function L2(){const t=indexedDB.deleteDatabase(fS);return new qa(t).toPromise()}function of(){const t=indexedDB.open(fS,D2);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Vu,{keyPath:pS})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Vu)?e(i):(i.close(),await L2(),e(await of()))})})}async function qv(t,e,r){const i=Ac(t,!0).put({[pS]:e,value:r});return new qa(i).toPromise()}async function O2(t,e){const r=Ac(t,!1).get(e),i=await new qa(r).toPromise();return i===void 0?null:i.value}function Kv(t,e){const r=Ac(t,!0).delete(e);return new qa(r).toPromise()}const M2=800,j2=3;class gS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>j2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bc._getInstance(N2()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await P2(),!this.activeServiceWorker)return;this.sender=new b2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await qv(e,$u,"1"),await Kv(e,$u),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>qv(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>O2(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kv(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Ac(s,!1).getAll();return new qa(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gS.type="LOCAL";const U2=gS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function B2(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Zn("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",F2().appendChild(i)})}function $2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e){return e?hr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ps(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function z2(t){return aS(t.auth,new Bp(t),t.bypassAuthState)}function G2(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),oS(r,new Bp(t),t.bypassAuthState)}async function H2(t){const{auth:e,user:r}=t;return ye(r,e,"internal-error"),f2(r,new Bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z2;case"linkViaPopup":case"linkViaRedirect":return H2;case"reauthViaPopup":case"reauthViaRedirect":return G2;default:Un(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new za(2e3,1e4);class Ss extends mS{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,W2.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="pendingRedirect",zh=new Map;class K2 extends mS{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=zh.get(this.auth._key());if(!e){try{const i=await Y2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}zh.set(this.auth._key(),e)}return this.bypassAuthState||zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y2(t,e){const r=X2(e),i=Q2(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function Q2(t){return hr(t._redirectPersistence)}function X2(t){return su(q2,t.config.apiKey,t.name)}async function J2(t,e,r=!1){const i=Ic(t),s=V2(i,e),l=await new K2(i,s,r).execute();return l&&!r&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=10*60*1e3;class eb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tb(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!vS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Zn(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yv(e))}saveEventToCache(e){this.cachedEventUids.add(Yv(e)),this.lastProcessedEventTime=Date.now()}}function Yv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e={}){return no(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ib=/^https?/;async function sb(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nb(t);for(const r of e)try{if(ob(r))return}catch{}Un(t,"unauthorized-domain")}function ob(t){const e=sf(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&l.hostname===i}if(!ib.test(r))return!1;if(rb.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new za(3e4,6e4);function Qv(){const t=er().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function lb(t){return new Promise((e,r)=>{var i,s,o;function l(){Qv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qv(),r(Zn(t,"network-request-failed"))},timeout:ab.get()})}if(!((s=(i=er().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=er().gapi)===null||o===void 0)&&o.load)l();else{const c=$2("iframefcb");return er()[c]=()=>{gapi.load?l():r(Zn(t,"network-request-failed"))},B2(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>r(h))}}).catch(e=>{throw ou=null,e})}let ou=null;function ub(t){return ou=ou||lb(t),ou}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new za(5e3,15e3),hb="__/auth/iframe",db="emulator/auth/iframe",fb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gb(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Lp(e,db):`https://${t.config.authDomain}/${hb}`,i={apiKey:e.apiKey,appName:t.name,v:to},s=pb.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${Va(i).slice(1)}`}async function mb(t){const e=await ub(t),r=er().gapi;return ye(r,t,"internal-error"),e.open({where:document.body,url:gb(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fb,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Zn(t,"network-request-failed"),c=er().setTimeout(()=>{o(l)},cb.get());function h(){er().clearTimeout(c),s(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yb=500,wb=600,Sb="_blank",_b="http://localhost";class Xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cb(t,e,r,i=yb,s=wb){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},vb),{width:i.toString(),height:s.toString(),top:o,left:l}),f=_t().toLowerCase();r&&(c=Qw(f)?Sb:r),Yw(f)&&(e=e||_b,h.scrollbars="yes");const v=Object.entries(h).reduce((k,[D,I])=>`${k}${D}=${I},`,"");if(n2(f)&&c!=="_self")return Eb(e||"",c),new Xv(null);const y=window.open(e||"",c,v);ye(y,t,"popup-blocked");try{y.focus()}catch{}return new Xv(y)}function Eb(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__/auth/handler",kb="emulator/auth/handler";function Jv(t,e,r,i,s,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:to,eventId:s};if(e instanceof iS){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",LT(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(o||{}))l[h]=f}if(e instanceof Wa){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(l.scopes=h.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];return`${Tb(t)}?${Va(c).slice(1)}`}function Tb({config:t}){return t.emulator?Lp(t,kb):`https://${t.authDomain}/${xb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="webStorageSupport";class Ib{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=J2}async _openPopup(e,r,i,s){var o;Sr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=Jv(e,r,i,sf(),s);return Cb(e,l,Fp())}async _openRedirect(e,r,i,s){return await this._originValidation(e),A2(Jv(e,r,i,sf(),s)),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Sr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await mb(e),i=new eb(e);return r.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Gh,{type:Gh},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Gh];l!==void 0&&r(!!l),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=sb(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return tS()||Mp()||Tc()}}const bb=Ib;var Zv="@firebase/auth",ey="0.19.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{var s;e(((s=i)===null||s===void 0?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Rb(t){Oi(new Jr("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:o,authDomain:l}=i.options;return((c,h)=>{ye(o&&!o.includes(":"),"invalid-api-key",{appName:c.name}),ye(!(l!=null&&l.includes(":")),"argument-error",{appName:c.name});const f={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nS(t)},v=new s2(c,h,f);return FI(v,r),v})(i,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Oi(new Jr("auth-internal",e=>{const r=Ic(e.getProvider("auth").getImmediate());return(i=>new Ab(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(Zv,ey,Pb(t)),Jn(Zv,ey,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t=Rp()){const e=kc(t,"auth");return e.isInitialized()?e.getImmediate():UI(t,{popupRedirectResolver:bb,persistence:[U2,T2,hS]})}Rb("Browser");var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he,$p=$p||{},we=Db||self;function zu(){}function af(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ka(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Lb(t){return Object.prototype.hasOwnProperty.call(t,Hh)&&t[Hh]||(t[Hh]=++Ob)}var Hh="closure_uid_"+(1e9*Math.random()>>>0),Ob=0;function Mb(t,e,r){return t.call.apply(t.bind,arguments)}function jb(t,e,r){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Pt(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Pt=Mb:Pt=jb,Pt.apply(null,arguments)}function Ul(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var i=r.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ot(t,e){function r(){}r.prototype=e.prototype,t.Z=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Vb=function(i,s,o){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[s].apply(i,l)}}function oi(){this.s=this.s,this.o=this.o}var Ub=0;oi.prototype.s=!1;oi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Ub!=0)&&Lb(this)};oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},wS=Array.prototype.forEach?function(t,e,r){Array.prototype.forEach.call(t,e,r)}:function(t,e,r){const i=t.length,s=typeof t=="string"?t.split(""):t;for(let o=0;o<i;o++)o in s&&e.call(r,s[o],o,t)};function Fb(t){e:{var e=PA;const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)if(s in i&&e.call(void 0,i[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function ty(t){return Array.prototype.concat.apply([],arguments)}function Vp(t){const e=t.length;if(0<e){const r=Array(e);for(let i=0;i<e;i++)r[i]=t[i];return r}return[]}function Gu(t){return/^[\s\xa0]*$/.test(t)}var ny=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qt(t,e){return t.indexOf(e)!=-1}function Wh(t,e){return t<e?-1:t>e?1:0}var Kt;e:{var ry=we.navigator;if(ry){var iy=ry.userAgent;if(iy){Kt=iy;break e}}Kt=""}function zp(t,e,r){for(const i in t)e.call(r,t[i],i,t)}function SS(t){const e={};for(const r in t)e[r]=t[r];return e}var sy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _S(t,e){let r,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(r in i)t[r]=i[r];for(let o=0;o<sy.length;o++)r=sy[o],Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}}function Gp(t){return Gp[" "](t),t}Gp[" "]=zu;function Bb(t){var e=zb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var $b=qt(Kt,"Opera"),$s=qt(Kt,"Trident")||qt(Kt,"MSIE"),CS=qt(Kt,"Edge"),lf=CS||$s,ES=qt(Kt,"Gecko")&&!(qt(Kt.toLowerCase(),"webkit")&&!qt(Kt,"Edge"))&&!(qt(Kt,"Trident")||qt(Kt,"MSIE"))&&!qt(Kt,"Edge"),Vb=qt(Kt.toLowerCase(),"webkit")&&!qt(Kt,"Edge");function xS(){var t=we.document;return t?t.documentMode:void 0}var Hu;e:{var qh="",Kh=function(){var t=Kt;if(ES)return/rv:([^\);]+)(\)|;)/.exec(t);if(CS)return/Edge\/([\d\.]+)/.exec(t);if($s)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Vb)return/WebKit\/(\S+)/.exec(t);if($b)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Kh&&(qh=Kh?Kh[1]:""),$s){var Yh=xS();if(Yh!=null&&Yh>parseFloat(qh)){Hu=String(Yh);break e}}Hu=qh}var zb={};function Gb(){return Bb(function(){let t=0;const e=ny(String(Hu)).split("."),r=ny("9").split("."),i=Math.max(e.length,r.length);for(let l=0;t==0&&l<i;l++){var s=e[l]||"",o=r[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s[0].length==0&&o[0].length==0)break;t=Wh(s[1].length==0?0:parseInt(s[1],10),o[1].length==0?0:parseInt(o[1],10))||Wh(s[2].length==0,o[2].length==0)||Wh(s[2],o[2]),s=s[3],o=o[3]}while(t==0)}return 0<=t})}var uf;if(we.document&&$s){var oy=xS();uf=oy||parseInt(Hu,10)||void 0}else uf=void 0;var Hb=uf,Wb=function(){if(!we.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{we.addEventListener("test",zu,e),we.removeEventListener("test",zu,e)}catch{}return t}();function $t(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};function xa(t,e){if($t.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ES){e:{try{Gp(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:qb[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xa.Z.h.call(this)}}Ot(xa,$t);var qb={2:"touch",3:"pen",4:"mouse"};xa.prototype.h=function(){xa.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),Kb=0;function Yb(t,e,r,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!i,this.ia=s,this.key=++Kb,this.ca=this.fa=!1}function Pc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Rc(t){this.src=t,this.g={},this.h=0}Rc.prototype.add=function(t,e,r,i,s){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var l=hf(t,e,i,s);return-1<l?(e=t[l],r||(e.fa=!1)):(e=new Yb(e,this.src,o,!!i,s),e.fa=r,t.push(e)),e};function cf(t,e){var r=e.type;if(r in t.g){var i=t.g[r],s=yS(i,e),o;(o=0<=s)&&Array.prototype.splice.call(i,s,1),o&&(Pc(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function hf(t,e,r,i){for(var s=0;s<t.length;++s){var o=t[s];if(!o.ca&&o.listener==e&&o.capture==!!r&&o.ia==i)return s}return-1}var Hp="closure_lm_"+(1e6*Math.random()|0),Qh={};function kS(t,e,r,i,s){if(i&&i.once)return IS(t,e,r,i,s);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kS(t,e[o],r,i,s);return null}return r=Kp(r),t&&t[Ya]?t.N(e,r,Ka(i)?!!i.capture:!!i,s):TS(t,e,r,!1,i,s)}function TS(t,e,r,i,s,o){if(!e)throw Error("Invalid event type");var l=Ka(s)?!!s.capture:!!s,c=qp(t);if(c||(t[Hp]=c=new Rc(t)),r=c.add(e,r,i,l,o),r.proxy)return r;if(i=Qb(),r.proxy=i,i.src=t,i.listener=r,t.addEventListener)Wb||(s=l),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(AS(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return r}function Qb(){function t(r){return e.call(t.src,t.listener,r)}var e=Xb;return t}function IS(t,e,r,i,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)IS(t,e[o],r,i,s);return null}return r=Kp(r),t&&t[Ya]?t.O(e,r,Ka(i)?!!i.capture:!!i,s):TS(t,e,r,!0,i,s)}function bS(t,e,r,i,s){if(Array.isArray(e))for(var o=0;o<e.length;o++)bS(t,e[o],r,i,s);else i=Ka(i)?!!i.capture:!!i,r=Kp(r),t&&t[Ya]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],r=hf(o,r,i,s),-1<r&&(Pc(o[r]),Array.prototype.splice.call(o,r,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=qp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=hf(e,r,i,s)),(r=-1<t?e[t]:null)&&Wp(r))}function Wp(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Ya])cf(e.i,t);else{var r=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(r,i,t.capture):e.detachEvent?e.detachEvent(AS(r),i):e.addListener&&e.removeListener&&e.removeListener(i),(r=qp(e))?(cf(r,t),r.h==0&&(r.src=null,e[Hp]=null)):Pc(t)}}}function AS(t){return t in Qh?Qh[t]:Qh[t]="on"+t}function Xb(t,e){if(t.ca)t=!0;else{e=new xa(e,this);var r=t.listener,i=t.ia||t.src;t.fa&&Wp(t),t=r.call(i,e)}return t}function qp(t){return t=t[Hp],t instanceof Rc?t:null}var Xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kp(t){return typeof t=="function"?t:(t[Xh]||(t[Xh]=function(e){return t.handleEvent(e)}),t[Xh])}function Ct(){oi.call(this),this.i=new Rc(this),this.P=this,this.I=null}Ot(Ct,oi);Ct.prototype[Ya]=!0;Ct.prototype.removeEventListener=function(t,e,r,i){bS(this,t,e,r,i)};function Rt(t,e){var r,i=t.I;if(i)for(r=[];i;i=i.I)r.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new $t(e,t);else if(e instanceof $t)e.target=e.target||t;else{var s=e;e=new $t(i,t),_S(e,s)}if(s=!0,r)for(var o=r.length-1;0<=o;o--){var l=e.g=r[o];s=Fl(l,i,!0,e)&&s}if(l=e.g=t,s=Fl(l,i,!0,e)&&s,s=Fl(l,i,!1,e)&&s,r)for(o=0;o<r.length;o++)l=e.g=r[o],s=Fl(l,i,!1,e)&&s}Ct.prototype.M=function(){if(Ct.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],i=0;i<r.length;i++)Pc(r[i]);delete t.g[e],t.h--}}this.I=null};Ct.prototype.N=function(t,e,r,i){return this.i.add(String(t),e,!1,r,i)};Ct.prototype.O=function(t,e,r,i){return this.i.add(String(t),e,!0,r,i)};function Fl(t,e,r,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ca&&l.capture==r){var c=l.listener,h=l.ia||l.src;l.fa&&cf(t.i,l),s=c.call(h,i)!==!1&&s}}return s&&!i.defaultPrevented}var Yp=we.JSON.stringify;function Jb(){var t=RS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Zb{constructor(){this.h=this.g=null}add(e,r){const i=PS.get();i.set(e,r),this.h?this.h.next=i:this.g=i,this.h=i}}var PS=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new eA,t=>t.reset());class eA{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function tA(t){we.setTimeout(()=>{throw t},0)}function Qp(t,e){df||nA(),ff||(df(),ff=!0),RS.add(t,e)}var df;function nA(){var t=we.Promise.resolve(void 0);df=function(){t.then(rA)}}var ff=!1,RS=new Zb;function rA(){for(var t;t=Jb();){try{t.h.call(t.g)}catch(r){tA(r)}var e=PS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ff=!1}function Nc(t,e){Ct.call(this),this.h=t||1,this.g=e||we,this.j=Pt(this.kb,this),this.l=Date.now()}Ot(Nc,Ct);he=Nc.prototype;he.da=!1;he.S=null;he.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rt(this,"tick"),this.da&&(Xp(this),this.start()))}};he.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Xp(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}he.M=function(){Nc.Z.M.call(this),Xp(this),delete this.g};function Jp(t,e,r){if(typeof t=="function")r&&(t=Pt(t,r));else if(t&&typeof t.handleEvent=="function")t=Pt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:we.setTimeout(t,e||0)}function NS(t){t.g=Jp(()=>{t.g=null,t.i&&(t.i=!1,NS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class iA extends oi{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:NS(this)}M(){super.M(),this.g&&(we.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(t){oi.call(this),this.h=t,this.g={}}Ot(ka,oi);var ay=[];function DS(t,e,r,i){Array.isArray(r)||(r&&(ay[0]=r.toString()),r=ay);for(var s=0;s<r.length;s++){var o=kS(e,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function LS(t){zp(t.g,function(e,r){this.g.hasOwnProperty(r)&&Wp(e)},t),t.g={}}ka.prototype.M=function(){ka.Z.M.call(this),LS(this)};ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Dc(){this.g=!0}Dc.prototype.Aa=function(){this.g=!1};function sA(t,e,r,i,s,o){t.info(function(){if(t.g)if(o)for(var l="",c=o.split("&"),h=0;h<c.length;h++){var f=c[h].split("=");if(1<f.length){var v=f[0];f=f[1];var y=v.split("_");l=2<=y.length&&y[1]=="type"?l+(v+"="+f+"&"):l+(v+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+r+`
`+l})}function oA(t,e,r,i,s,o,l){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+r+`
`+o+" "+l})}function _s(t,e,r,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+lA(t,r)+(i?" "+i:"")})}function aA(t,e){t.info(function(){return"TIMEOUT: "+e})}Dc.prototype.info=function(){};function lA(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var i=r[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var o=s[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<s.length;l++)s[l]=""}}}}return Yp(r)}catch{return e}}var Xi={},ly=null;function Lc(){return ly=ly||new Ct}Xi.Ma="serverreachability";function OS(t){$t.call(this,Xi.Ma,t)}Ot(OS,$t);function Ta(t){const e=Lc();Rt(e,new OS(e))}Xi.STAT_EVENT="statevent";function MS(t,e){$t.call(this,Xi.STAT_EVENT,t),this.stat=e}Ot(MS,$t);function Qt(t){const e=Lc();Rt(e,new MS(e,t))}Xi.Na="timingevent";function jS(t,e){$t.call(this,Xi.Na,t),this.size=e}Ot(jS,$t);function Qa(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return we.setTimeout(function(){t()},e)}var Oc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},US={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zp(){}Zp.prototype.h=null;function uy(t){return t.h||(t.h=t.i())}function FS(){}var Xa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function eg(){$t.call(this,"d")}Ot(eg,$t);function tg(){$t.call(this,"c")}Ot(tg,$t);var pf;function Mc(){}Ot(Mc,Zp);Mc.prototype.g=function(){return new XMLHttpRequest};Mc.prototype.i=function(){return{}};pf=new Mc;function Ja(t,e,r,i){this.l=t,this.j=e,this.m=r,this.X=i||1,this.V=new ka(this),this.P=uA,t=lf?125:void 0,this.W=new Nc(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new BS}function BS(){this.i=null,this.g="",this.h=!1}var uA=45e3,gf={},Wu={};he=Ja.prototype;he.setTimeout=function(t){this.P=t};function mf(t,e,r){t.K=1,t.v=Uc(_r(e)),t.s=r,t.U=!0,$S(t,null)}function $S(t,e){t.F=Date.now(),Za(t),t.A=_r(t.v);var r=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),KS(r.h,"t",i),t.C=0,r=t.l.H,t.h=new BS,t.g=p_(t.l,r?e:null,!t.s),0<t.O&&(t.L=new iA(Pt(t.Ia,t,t.g),t.O)),DS(t.V,t.g,"readystatechange",t.gb),e=t.H?SS(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ta(),sA(t.j,t.u,t.A,t.m,t.X,t.s)}he.gb=function(t){t=t.target;const e=this.L;e&&dr(t)==3?e.l():this.Ia(t)};he.Ia=function(t){try{if(t==this.g)e:{const v=dr(this.g);var e=this.g.Da();const y=this.g.ba();if(!(3>v)&&(v!=3||lf||this.g&&(this.h.h||this.g.ga()||fy(this.g)))){this.I||v!=4||e==7||(e==8||0>=y?Ta(3):Ta(2)),jc(this);var r=this.g.ba();this.N=r;t:if(VS(this)){var i=fy(this.g);t="";var s=i.length,o=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Xo(this);var l="";break t}this.h.i=new we.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=r==200,oA(this.j,this.u,this.A,this.m,this.X,v,r),this.i){if(this.$&&!this.J){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gu(c)){var f=c;break t}}f=null}if(r=f)_s(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vf(this,r);else{this.i=!1,this.o=3,Qt(12),Si(this),Xo(this);break e}}this.U?(zS(this,v,l),lf&&this.i&&v==3&&(DS(this.V,this.W,"tick",this.fb),this.W.start())):(_s(this.j,this.m,l,null),vf(this,l)),v==4&&Si(this),this.i&&!this.I&&(v==4?c_(this.l,this):(this.i=!1,Za(this)))}else r==400&&0<l.indexOf("Unknown SID")?(this.o=3,Qt(12)):(this.o=0,Qt(13)),Si(this),Xo(this)}}}catch{}finally{}};function VS(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function zS(t,e,r){let i=!0,s;for(;!t.I&&t.C<r.length;)if(s=cA(t,r),s==Wu){e==4&&(t.o=4,Qt(14),i=!1),_s(t.j,t.m,null,"[Incomplete Response]");break}else if(s==gf){t.o=4,Qt(15),_s(t.j,t.m,r,"[Invalid Chunk]"),i=!1;break}else _s(t.j,t.m,s,null),vf(t,s);VS(t)&&s!=Wu&&s!=gf&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,Qt(16),i=!1),t.i=t.i&&i,i?0<r.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),cg(e),e.L=!0,Qt(11))):(_s(t.j,t.m,r,"[Invalid Chunked Response]"),Si(t),Xo(t))}he.fb=function(){if(this.g){var t=dr(this.g),e=this.g.ga();this.C<e.length&&(jc(this),zS(this,t,e),this.i&&t!=4&&Za(this))}};function cA(t,e){var r=t.C,i=e.indexOf(`
`,r);return i==-1?Wu:(r=Number(e.substring(r,i)),isNaN(r)?gf:(i+=1,i+r>e.length?Wu:(e=e.substr(i,r),t.C=i+r,e)))}he.cancel=function(){this.I=!0,Si(this)};function Za(t){t.Y=Date.now()+t.P,GS(t,t.P)}function GS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Qa(Pt(t.eb,t),e)}function jc(t){t.B&&(we.clearTimeout(t.B),t.B=null)}he.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(aA(this.j,this.A),this.K!=2&&(Ta(),Qt(17)),Si(this),this.o=2,Xo(this)):GS(this,this.Y-t)};function Xo(t){t.l.G==0||t.I||c_(t.l,t)}function Si(t){jc(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Xp(t.W),LS(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function vf(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||yf(r.i,t))){if(r.I=t.N,!t.J&&yf(r.i,t)&&r.G==3){try{var i=r.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)Qu(r),$c(r);else break e;ug(r),Qt(18)}}else r.ta=s[1],0<r.ta-r.U&&37500>s[2]&&r.N&&r.A==0&&!r.v&&(r.v=Qa(Pt(r.ab,r),6e3));if(1>=XS(r.i)&&r.ka){try{r.ka()}catch{}r.ka=void 0}}else _i(r,11)}else if((t.J||r.g==t)&&Qu(r),!Gu(e))for(s=r.Ca.g.parse(e),e=0;e<s.length;e++){let f=s[e];if(r.U=f[0],f=f[1],r.G==2)if(f[0]=="c"){r.J=f[1],r.la=f[2];const v=f[3];v!=null&&(r.ma=v,r.h.info("VER="+r.ma));const y=f[4];y!=null&&(r.za=y,r.h.info("SVER="+r.za));const k=f[5];k!=null&&typeof k=="number"&&0<k&&(i=1.5*k,r.K=i,r.h.info("backChannelRequestTimeoutMs_="+i)),i=r;const D=t.g;if(D){const I=D.g?D.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I){var o=i.i;!o.g&&(qt(I,"spdy")||qt(I,"quic")||qt(I,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(ig(o,o.h),o.h=null))}if(i.D){const L=D.g?D.g.getResponseHeader("X-HTTP-Session-Id"):null;L&&(i.sa=L,qe(i.F,i.D,L))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-t.F,r.h.info("Handshake RTT: "+r.O+"ms")),i=r;var l=t;if(i.oa=f_(i,i.H?i.la:null,i.W),l.J){JS(i.i,l);var c=l,h=i.K;h&&c.setTimeout(h),c.B&&(jc(c),Za(c)),i.g=l}else l_(i);0<r.l.length&&Vc(r)}else f[0]!="stop"&&f[0]!="close"||_i(r,7);else r.G==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?_i(r,7):lg(r):f[0]!="noop"&&r.j&&r.j.wa(f),r.A=0)}}Ta(4)}catch{}}function hA(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(af(t)){for(var e=[],r=t.length,i=0;i<r;i++)e.push(t[i]);return e}e=[],r=0;for(i in t)e[r++]=t[i];return e}function ng(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(af(t)||typeof t=="string")wS(t,e,void 0);else{if(t.T&&typeof t.T=="function")var r=t.T();else if(t.R&&typeof t.R=="function")r=void 0;else if(af(t)||typeof t=="string"){r=[];for(var i=t.length,s=0;s<i;s++)r.push(s)}else for(s in r=[],i=0,t)r[i++]=s;i=hA(t),s=i.length;for(var o=0;o<s;o++)e.call(void 0,i[o],r&&r[o],t)}}function ro(t,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var i=0;i<r;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof ro)for(r=t.T(),i=0;i<r.length;i++)this.set(r[i],t.get(r[i]));else for(i in t)this.set(i,t[i])}he=ro.prototype;he.R=function(){rg(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};he.T=function(){return rg(this),this.g.concat()};function rg(t){if(t.i!=t.g.length){for(var e=0,r=0;e<t.g.length;){var i=t.g[e];Bi(t.h,i)&&(t.g[r++]=i),e++}t.g.length=r}if(t.i!=t.g.length){var s={};for(r=e=0;e<t.g.length;)i=t.g[e],Bi(s,i)||(t.g[r++]=i,s[i]=1),e++;t.g.length=r}}he.get=function(t,e){return Bi(this.h,t)?this.h[t]:e};he.set=function(t,e){Bi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};he.forEach=function(t,e){for(var r=this.T(),i=0;i<r.length;i++){var s=r[i],o=this.get(s);t.call(e,o,s,this)}};function Bi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var HS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dA(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var i=t[r].indexOf("="),s=null;if(0<=i){var o=t[r].substring(0,i);s=t[r].substring(i+1)}else o=t[r];e(o,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function $i(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof $i){this.g=e!==void 0?e:t.g,qu(this,t.j),this.s=t.s,Ku(this,t.i),Yu(this,t.m),this.l=t.l,e=t.h;var r=new Ia;r.i=e.i,e.g&&(r.g=new ro(e.g),r.h=e.h),cy(this,r),this.o=t.o}else t&&(r=String(t).match(HS))?(this.g=!!e,qu(this,r[1]||"",!0),this.s=Jo(r[2]||""),Ku(this,r[3]||"",!0),Yu(this,r[4]),this.l=Jo(r[5]||"",!0),cy(this,r[6]||"",!0),this.o=Jo(r[7]||"")):(this.g=!!e,this.h=new Ia(null,this.g))}$i.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fo(e,hy,!0),":");var r=this.i;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Fo(e,hy,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.i&&r.charAt(0)!="/"&&t.push("/"),t.push(Fo(r,r.charAt(0)=="/"?vA:mA,!0))),(r=this.h.toString())&&t.push("?",r),(r=this.o)&&t.push("#",Fo(r,wA)),t.join("")};function _r(t){return new $i(t)}function qu(t,e,r){t.j=r?Jo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ku(t,e,r){t.i=r?Jo(e,!0):e}function Yu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function cy(t,e,r){e instanceof Ia?(t.h=e,SA(t.h,t.g)):(r||(e=Fo(e,yA)),t.h=new Ia(e,t.g))}function qe(t,e,r){t.h.set(e,r)}function Uc(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fA(t){return t instanceof $i?_r(t):new $i(t,void 0)}function pA(t,e,r,i){var s=new $i(null,void 0);return t&&qu(s,t),e&&Ku(s,e),r&&Yu(s,r),i&&(s.l=i),s}function Jo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fo(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,gA),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gA(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var hy=/[#\/\?@]/g,mA=/[#\?:]/g,vA=/[#\?]/g,yA=/[#\?@]/g,wA=/#/g;function Ia(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ai(t){t.g||(t.g=new ro,t.h=0,t.i&&dA(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}he=Ia.prototype;he.add=function(t,e){ai(this),this.i=null,t=io(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function WS(t,e){ai(t),e=io(t,e),Bi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Bi(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&rg(t)))}function qS(t,e){return ai(t),e=io(t,e),Bi(t.g.h,e)}he.forEach=function(t,e){ai(this),this.g.forEach(function(r,i){wS(r,function(s){t.call(e,s,i,this)},this)},this)};he.T=function(){ai(this);for(var t=this.g.R(),e=this.g.T(),r=[],i=0;i<e.length;i++)for(var s=t[i],o=0;o<s.length;o++)r.push(e[i]);return r};he.R=function(t){ai(this);var e=[];if(typeof t=="string")qS(this,t)&&(e=ty(e,this.g.get(io(this,t))));else{t=this.g.R();for(var r=0;r<t.length;r++)e=ty(e,t[r])}return e};he.set=function(t,e){return ai(this),this.i=null,t=io(this,t),qS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};he.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function KS(t,e,r){WS(t,e),0<r.length&&(t.i=null,t.g.set(io(t,e),Vp(r)),t.h+=r.length)}he.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),r=0;r<e.length;r++){var i=e[r],s=encodeURIComponent(String(i));i=this.R(i);for(var o=0;o<i.length;o++){var l=s;i[o]!==""&&(l+="="+encodeURIComponent(String(i[o]))),t.push(l)}}return this.i=t.join("&")};function io(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SA(t,e){e&&!t.j&&(ai(t),t.i=null,t.g.forEach(function(r,i){var s=i.toLowerCase();i!=s&&(WS(this,i),KS(this,s,r))},t)),t.j=e}var _A=class{constructor(t,e){this.h=t,this.g=e}};function YS(t){this.l=t||CA,we.PerformanceNavigationTiming?(t=we.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(we.g&&we.g.Ea&&we.g.Ea()&&we.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var CA=10;function QS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function XS(t){return t.h?1:t.g?t.g.size:0}function yf(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function ig(t,e){t.g?t.g.add(e):t.h=e}function JS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}YS.prototype.cancel=function(){if(this.i=ZS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ZS(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.D);return e}return Vp(t.i)}function sg(){}sg.prototype.stringify=function(t){return we.JSON.stringify(t,void 0)};sg.prototype.parse=function(t){return we.JSON.parse(t,void 0)};function EA(){this.g=new sg}function xA(t,e,r){const i=r||"";try{ng(t,function(s,o){let l=s;Ka(s)&&(l=Yp(s)),e.push(i+o+"="+encodeURIComponent(l))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function kA(t,e){const r=new Dc;if(we.Image){const i=new Image;i.onload=Ul(Bl,r,i,"TestLoadImage: loaded",!0,e),i.onerror=Ul(Bl,r,i,"TestLoadImage: error",!1,e),i.onabort=Ul(Bl,r,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ul(Bl,r,i,"TestLoadImage: timeout",!1,e),we.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Bl(t,e,r,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function el(t){this.l=t.$b||null,this.j=t.ib||!1}Ot(el,Zp);el.prototype.g=function(){return new Fc(this.l,this.j)};el.prototype.i=function(t){return function(){return t}}({});function Fc(t,e){Ct.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=og,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(Fc,Ct);var og=0;he=Fc.prototype;he.open=function(t,e){if(this.readyState!=og)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ba(this)};he.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||we).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tl(this)),this.readyState=og};he.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ba(this)),this.g&&(this.readyState=3,ba(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof we.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e_(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function e_(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}he.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?tl(this):ba(this),this.readyState==3&&e_(this)}};he.Ua=function(t){this.g&&(this.response=this.responseText=t,tl(this))};he.Ta=function(t){this.g&&(this.response=t,tl(this))};he.ha=function(){this.g&&tl(this)};function tl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ba(t)}he.setRequestHeader=function(t,e){this.v.append(t,e)};he.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};he.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function ba(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var TA=we.JSON.parse;function dt(t){Ct.call(this),this.headers=new ro,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=t_,this.K=this.L=!1}Ot(dt,Ct);var t_="",IA=/^https?$/i,bA=["POST","PUT"];he=dt.prototype;he.ea=function(t,e,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pf.g(),this.C=this.u?uy(this.u):uy(pf),this.g.onreadystatechange=Pt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){dy(this,o);return}t=r||"";const s=new ro(this.headers);i&&ng(i,function(o,l){s.set(l,o)}),i=Fb(s.T()),r=we.FormData&&t instanceof we.FormData,!(0<=yS(bA,e))||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(o,l){this.g.setRequestHeader(l,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{i_(this),0<this.B&&((this.K=AA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pt(this.pa,this)):this.A=Jp(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){dy(this,o)}};function AA(t){return $s&&Gb()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function PA(t){return t.toLowerCase()=="content-type"}he.pa=function(){typeof $p<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rt(this,"timeout"),this.abort(8))};function dy(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,n_(t),Bc(t)}function n_(t){t.D||(t.D=!0,Rt(t,"complete"),Rt(t,"error"))}he.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Rt(this,"complete"),Rt(this,"abort"),Bc(this))};he.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bc(this,!0)),dt.Z.M.call(this)};he.Fa=function(){this.s||(this.F||this.v||this.l?r_(this):this.cb())};he.cb=function(){r_(this)};function r_(t){if(t.h&&typeof $p<"u"&&(!t.C[1]||dr(t)!=4||t.ba()!=2)){if(t.v&&dr(t)==4)Jp(t.Fa,0,t);else if(Rt(t,"readystatechange"),dr(t)==4){t.h=!1;try{const c=t.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var i;if(i=c===0){var s=String(t.H).match(HS)[1]||null;if(!s&&we.self&&we.self.location){var o=we.self.location.protocol;s=o.substr(0,o.length-1)}i=!IA.test(s?s.toLowerCase():"")}r=i}if(r)Rt(t,"complete"),Rt(t,"success");else{t.m=6;try{var l=2<dr(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.ba()+"]",n_(t)}}finally{Bc(t)}}}}function Bc(t,e){if(t.g){i_(t);const r=t.g,i=t.C[0]?zu:null;t.g=null,t.C=null,e||Rt(t,"ready");try{r.onreadystatechange=i}catch{}}}function i_(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(we.clearTimeout(t.A),t.A=null)}function dr(t){return t.g?t.g.readyState:0}he.ba=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}};he.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};he.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),TA(e)}};function fy(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case t_:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}he.Da=function(){return this.m};he.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function RA(t){let e="";return zp(t,function(r,i){e+=i,e+=":",e+=r,e+=`\r
`}),e}function ag(t,e,r){e:{for(i in r){var i=!1;break e}i=!0}i||(r=RA(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):qe(t,e,r))}function Po(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function s_(t){this.za=0,this.l=[],this.h=new Dc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Po("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Po("baseRetryDelayMs",5e3,t),this.$a=Po("retryDelaySeedMs",1e4,t),this.Ya=Po("forwardChannelMaxRetries",2,t),this.ra=Po("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new YS(t&&t.concurrentRequestLimit),this.Ca=new EA,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}he=s_.prototype;he.ma=8;he.G=1;function lg(t){if(o_(t),t.G==3){var e=t.V++,r=_r(t.F);qe(r,"SID",t.J),qe(r,"RID",e),qe(r,"TYPE","terminate"),nl(t,r),e=new Ja(t,t.h,e,void 0),e.K=2,e.v=Uc(_r(r)),r=!1,we.navigator&&we.navigator.sendBeacon&&(r=we.navigator.sendBeacon(e.v.toString(),"")),!r&&we.Image&&(new Image().src=e.v,r=!0),r||(e.g=p_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Za(e)}d_(t)}he.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function $c(t){t.g&&(cg(t),t.g.cancel(),t.g=null)}function o_(t){$c(t),t.u&&(we.clearTimeout(t.u),t.u=null),Qu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&we.clearTimeout(t.m),t.m=null)}function Jh(t,e){t.l.push(new _A(t.Za++,e)),t.G==3&&Vc(t)}function Vc(t){QS(t.i)||t.m||(t.m=!0,Qp(t.Ha,t),t.C=0)}function NA(t,e){return XS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Qa(Pt(t.Ha,t,e),h_(t,t.C)),t.C++,!0)}he.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new Ja(this,this.h,t,void 0);let o=this.s;if(this.P&&(o?(o=SS(o),_S(o,this.P)):o=this.P),this.o===null&&(s.H=o),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){t:{var i=this.l[r];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=r;break e}if(e===4096||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=a_(this,s,e),r=_r(this.F),qe(r,"RID",t),qe(r,"CVER",22),this.D&&qe(r,"X-HTTP-Session-Id",this.D),nl(this,r),this.o&&o&&ag(r,this.o,o),ig(this.i,s),this.Ra&&qe(r,"TYPE","init"),this.ja?(qe(r,"$req",e),qe(r,"SID","null"),s.$=!0,mf(s,r,null)):mf(s,r,e),this.G=2}}else this.G==3&&(t?py(this,t):this.l.length==0||QS(this.i)||py(this))};function py(t,e){var r;e?r=e.m:r=t.V++;const i=_r(t.F);qe(i,"SID",t.J),qe(i,"RID",r),qe(i,"AID",t.U),nl(t,i),t.o&&t.s&&ag(i,t.o,t.s),r=new Ja(t,t.h,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.l=e.D.concat(t.l)),e=a_(t,r,1e3),r.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ig(t.i,r),mf(r,i,e)}function nl(t,e){t.j&&ng({},function(r,i){qe(e,i,r)})}function a_(t,e,r){r=Math.min(t.l.length,r);var i=t.j?Pt(t.j.Oa,t.j,t):null;e:{var s=t.l;let o=-1;for(;;){const l=["count="+r];o==-1?0<r?(o=s[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let c=!0;for(let h=0;h<r;h++){let f=s[h].h;const v=s[h].g;if(f-=o,0>f)o=Math.max(0,s[h].h-100),c=!1;else try{xA(v,l,"req"+f+"_")}catch{i&&i(v)}}if(c){i=l.join("&");break e}}}return t=t.l.splice(0,r),e.D=t,i}function l_(t){t.g||t.u||(t.Y=1,Qp(t.Ga,t),t.A=0)}function ug(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Qa(Pt(t.Ga,t),h_(t,t.A)),t.A++,!0)}he.Ga=function(){if(this.u=null,u_(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Qa(Pt(this.bb,this),t)}};he.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qt(10),$c(this),u_(this))};function cg(t){t.B!=null&&(we.clearTimeout(t.B),t.B=null)}function u_(t){t.g=new Ja(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=_r(t.oa);qe(e,"RID","rpc"),qe(e,"SID",t.J),qe(e,"CI",t.N?"0":"1"),qe(e,"AID",t.U),nl(t,e),qe(e,"TYPE","xmlhttp"),t.o&&t.s&&ag(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var r=t.g;t=t.la,r.K=1,r.v=Uc(_r(e)),r.s=null,r.U=!0,$S(r,t)}he.ab=function(){this.v!=null&&(this.v=null,$c(this),ug(this),Qt(19))};function Qu(t){t.v!=null&&(we.clearTimeout(t.v),t.v=null)}function c_(t,e){var r=null;if(t.g==e){Qu(t),cg(t),t.g=null;var i=2}else if(yf(t.i,e))r=e.D,JS(t.i,e),i=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(i==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;i=Lc(),Rt(i,new jS(i,r)),Vc(t)}else l_(t);else if(s=e.o,s==3||s==0&&0<t.I||!(i==1&&NA(t,e)||i==2&&ug(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),s){case 1:_i(t,5);break;case 4:_i(t,10);break;case 3:_i(t,6);break;default:_i(t,2)}}}function h_(t,e){let r=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(r*=2),r*e}function _i(t,e){if(t.h.info("Error code "+e),e==2){var r=null;t.j&&(r=null);var i=Pt(t.jb,t);r||(r=new $i("//www.google.com/images/cleardot.gif"),we.location&&we.location.protocol=="http"||qu(r,"https"),Uc(r)),kA(r.toString(),i)}else Qt(2);t.G=0,t.j&&t.j.va(e),d_(t),o_(t)}he.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Qt(2)):(this.h.info("Failed to ping google.com"),Qt(1))};function d_(t){t.G=0,t.I=-1,t.j&&((ZS(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Vp(t.l),t.l.length=0),t.j.ua())}function f_(t,e,r){let i=fA(r);if(i.i!="")e&&Ku(i,e+"."+i.i),Yu(i,i.m);else{const s=we.location;i=pA(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,r)}return t.aa&&zp(t.aa,function(s,o){qe(i,o,s)}),e=t.D,r=t.sa,e&&r&&qe(i,e,r),qe(i,"VER",t.ma),nl(t,i),i}function p_(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ba&&!t.qa?new dt(new el({ib:!0})):new dt(t.qa),e.L=t.H,e}function g_(){}he=g_.prototype;he.xa=function(){};he.wa=function(){};he.va=function(){};he.ua=function(){};he.Oa=function(){};function Xu(){if($s&&!(10<=Number(Hb)))throw Error("Environmental error: no available transport.")}Xu.prototype.g=function(t,e){return new yn(t,e)};function yn(t,e){Ct.call(this),this.g=new s_(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Gu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gu(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new so(this)}Ot(yn,Ct);yn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Qp(Pt(t.hb,t,e))),Qt(0),t.W=e,t.aa=r||{},t.N=t.X,t.F=f_(t,null,t.W),Vc(t)};yn.prototype.close=function(){lg(this.g)};yn.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Jh(this.g,e)}else this.v?(e={},e.__data__=Yp(t),Jh(this.g,e)):Jh(this.g,t)};yn.prototype.M=function(){this.g.j=null,delete this.j,lg(this.g),delete this.g,yn.Z.M.call(this)};function m_(t){eg.call(this);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ot(m_,eg);function v_(){tg.call(this),this.status=1}Ot(v_,tg);function so(t){this.g=t}Ot(so,g_);so.prototype.xa=function(){Rt(this.g,"a")};so.prototype.wa=function(t){Rt(this.g,new m_(t))};so.prototype.va=function(t){Rt(this.g,new v_)};so.prototype.ua=function(){Rt(this.g,"b")};Xu.prototype.createWebChannel=Xu.prototype.g;yn.prototype.send=yn.prototype.u;yn.prototype.open=yn.prototype.m;yn.prototype.close=yn.prototype.close;Oc.NO_ERROR=0;Oc.TIMEOUT=8;Oc.HTTP_ERROR=6;US.COMPLETE="complete";FS.EventType=Xa;Xa.OPEN="a";Xa.CLOSE="b";Xa.ERROR="c";Xa.MESSAGE="d";Ct.prototype.listen=Ct.prototype.N;dt.prototype.listenOnce=dt.prototype.O;dt.prototype.getLastError=dt.prototype.La;dt.prototype.getLastErrorCode=dt.prototype.Da;dt.prototype.getStatus=dt.prototype.ba;dt.prototype.getResponseJson=dt.prototype.Qa;dt.prototype.getResponseText=dt.prototype.ga;dt.prototype.send=dt.prototype.ea;var DA=function(){return new Xu},LA=function(){return Lc()},Zh=Oc,OA=US,MA=Xi,gy={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jA=el,$l=FS,UA=dt;const my="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="9.6.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new Ap("@firebase/firestore");function vy(){return Vi.logLevel}function pe(t,...e){if(Vi.logLevel<=Oe.DEBUG){const r=e.map(hg);Vi.debug(`Firestore (${oo}): ${t}`,...r)}}function Zr(t,...e){if(Vi.logLevel<=Oe.ERROR){const r=e.map(hg);Vi.error(`Firestore (${oo}): ${t}`,...r)}}function yy(t,...e){if(Vi.logLevel<=Oe.WARN){const r=e.map(hg);Vi.warn(`Firestore (${oo}): ${t}`,...r)}}function hg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw Zr(e),new Error(e)}function $e(t,e){t||_e()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends si{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(nn.UNAUTHENTICATED))}shutdown(){}}class $A{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let i=this.i;const s=h=>this.i!==i?(i=this.i,r(h)):Promise.resolve();let o=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ti,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},c=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ti)}},0),l()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string"),new FA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new nn(e)}}class VA{constructor(e,r,i){this.type="FirstParty",this.user=nn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class zA{constructor(e,r,i){this.h=e,this.l=r,this.m=i}getToken(){return Promise.resolve(new VA(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,r){const i=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.p;return this.p=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?s(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?($e(typeof r.token=="string"),this.p=r.token,new GA(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.I(i),this.T=i=>r.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dg.A=-1;class y_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=WA(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%e.length))}return i}}function Me(t,e){return t<e?-1:t>e?1:0}function Vs(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*r));return new Vt(r,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Vt(0,0))}static max(){return new ke(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ji(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function w_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,r,i){r===void 0?r=0:r>e.length&&_e(),i===void 0?i=e.length-r:i>e.length-r&&_e(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Aa.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=e.get(s),l=r.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ze extends Aa{construct(e,r,i){return new ze(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new ze(r)}static emptyPath(){return new ze([])}}const qA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Aa{construct(e,r,i){return new sn(e,r,i)}static isValidIdentifier(e){return qA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(o(),s++)}if(o(),l)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(r)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.fields=e,e.sort(sn.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Lt(r)}static fromUint8Array(e){const r=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Lt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const KA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if($e(!!t),typeof t=="string"){let e=0;const r=KA.exec(t);if($e(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function __(t){const e=t.mapValue.fields.__previous_value__;return S_(e)?__(e):e}function Ra(t){const e=ei(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,r,i,s,o,l,c,h){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.useFetchStreams=h}}class Gs{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Gs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function QA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ze.fromString(e))}static fromName(e){return new ge(ze.fromString(e).popFirst(5))}static empty(){return new ge(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ze.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ze(e.slice()))}}function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S_(t)?4:XA(t)?9:10:_e()}function tr(t,e){if(t===e)return!0;const r=zi(t);if(r!==zi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ei(i.timestampValue),l=ei(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zs(i.bytesValue).isEqual(zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ut(i.geoPointValue.latitude)===ut(s.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ut(i.integerValue)===ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ut(i.doubleValue),l=ut(s.doubleValue);return o===l?Ju(o)===Ju(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],tr);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(wy(o)!==wy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!tr(o[c],l[c])))return!1;return!0}(t,e);default:return _e()}}function Na(t,e){return(t.values||[]).find(r=>tr(r,e))!==void 0}function Hs(t,e){if(t===e)return 0;const r=zi(t),i=zi(e);if(r!==i)return Me(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=ut(s.integerValue||s.doubleValue),c=ut(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Sy(t.timestampValue,e.timestampValue);case 4:return Sy(Ra(t),Ra(e));case 5:return Me(t.stringValue,e.stringValue);case 6:return function(s,o){const l=zs(s),c=zs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Me(l[h],c[h]);if(f!==0)return f}return Me(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Me(ut(s.latitude),ut(o.latitude));return l!==0?l:Me(ut(s.longitude),ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],c=o.values||[];for(let h=0;h<l.length&&h<c.length;++h){const f=Hs(l[h],c[h]);if(f)return f}return Me(l.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){const l=s.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let v=0;v<c.length&&v<f.length;++v){const y=Me(c[v],f[v]);if(y!==0)return y;const k=Hs(l[c[v]],h[f[v]]);if(k!==0)return k}return Me(c.length,f.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Sy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const r=ei(t),i=ei(e),s=Me(r.seconds,i.seconds);return s!==0?s:Me(r.nanos,i.nanos)}function Rs(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=ei(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zs(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ge.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",o=!0;for(const l of i.values||[])o?o=!1:s+=",",s+=wf(l);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${wf(i.fields[c])}`;return o+"}"}(t.mapValue):_e();var e,r}function _y(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function fg(t){return!!t&&"arrayValue"in t}function Cy(t){return!!t&&"nullValue"in t}function Ey(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function Zo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=Zo(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Zo(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!au(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(r)}setAll(e){let r=sn.emptyPath(),i={},s=[];e.forEach((l,c)=>{if(!r.isImmediateParentOf(c)){const h=this.getFieldsMap(r);this.applyChanges(h,i,s),i={},s=[],r=c.popLast()}l?i[c.lastSegment()]=Zo(l):s.push(c.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());au(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return tr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ji(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new fn(Zo(this.value))}}function C_(t){const e=[];return Ji(t.fields,(r,i)=>{const s=new sn([r]);if(au(i)){const o=C_(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Pa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,r,i,s,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Bt(e,0,ke.min(),ke.min(),fn.empty(),0)}static newFoundDocument(e,r,i){return new Bt(e,1,r,ke.min(),i,0)}static newNoDocument(e,r){return new Bt(e,2,r,ke.min(),fn.empty(),0)}static newUnknownDocument(e,r){return new Bt(e,3,r,ke.min(),fn.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function JA(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(i===1e9?new Vt(r+1,0):new Vt(r,i));return new Ws(s,ge.empty(),e)}function ZA(t){return new Ws(t.readTime,t.key,-1)}class Ws{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Ws(ke.min(),ge.empty(),-1)}static max(){return new Ws(ke.max(),ge.empty(),-1)}}function eP(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ge.comparator(t.documentKey,e.documentKey),r!==0?r:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,r=null,i=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.P=null}}function xy(t,e=null,r=[],i=[],s=null,o=null,l=null){return new tP(t,e,r,i,s,o,l)}function pg(t){const e=Ce(t);if(e.P===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>{return(s=i).field.canonicalString()+s.op.toString()+Rs(s.value);var s}).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ao(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Rs(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Rs(i)).join(",")),e.P=r}return e.P}function nP(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(r=>{return`${(i=r).field.canonicalString()} ${i.op} ${Rs(i.value)}`;var i}).join(", ")}]`),ao(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Rs(r)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Rs(r)).join(",")),`Target(${e})`}function gg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!cP(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(r=t.filters[s],i=e.filters[s],r.op!==i.op||!r.field.isEqual(i.field)||!tr(r.value,i.value))return!1;var r,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ty(t.startAt,e.startAt)&&Ty(t.endAt,e.endAt)}function _f(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Xt extends class{}{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.V(e,r,i):new rP(e,r,i):r==="array-contains"?new oP(e,i):r==="in"?new aP(e,i):r==="not-in"?new lP(e,i):r==="array-contains-any"?new uP(e,i):new Xt(e,r,i)}static V(e,r,i){return r==="in"?new iP(e,i):new sP(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.v(Hs(r,this.value)):r!==null&&zi(this.value)===zi(r)&&this.v(Hs(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rP extends Xt{constructor(e,r,i){super(e,r,i),this.key=ge.fromName(i.referenceValue)}matches(e){const r=ge.comparator(e.key,this.key);return this.v(r)}}class iP extends Xt{constructor(e,r){super(e,"in",r),this.keys=E_("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class sP extends Xt{constructor(e,r){super(e,"not-in",r),this.keys=E_("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function E_(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>ge.fromName(i.referenceValue))}class oP extends Xt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return fg(r)&&Na(r.arrayValue,this.value)}}class aP extends Xt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Na(this.value.arrayValue,r)}}class lP extends Xt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Na(this.value.arrayValue,r)}}class uP extends Xt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!fg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Na(this.value.arrayValue,i))}}class Zu{constructor(e,r){this.position=e,this.inclusive=r}}class ea{constructor(e,r="asc"){this.field=e,this.dir=r}}function cP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ky(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=ge.comparator(ge.fromName(l.referenceValue),r.key):i=Hs(l,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ty(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!tr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,r=null,i=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.D=null,this.C=null,this.startAt,this.endAt}}function hP(t,e,r,i,s,o,l,c){return new rl(t,e,r,i,s,o,l,c)}function mg(t){return new rl(t)}function lu(t){return!ao(t.limit)&&t.limitType==="F"}function ec(t){return!ao(t.limit)&&t.limitType==="L"}function x_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function k_(t){for(const e of t.filters)if(e.S())return e.field;return null}function T_(t){return t.collectionGroup!==null}function Da(t){const e=Ce(t);if(e.D===null){e.D=[];const r=k_(e),i=x_(e);if(r!==null&&i===null)r.isKeyField()||e.D.push(new ea(r)),e.D.push(new ea(sn.keyField(),"asc"));else{let s=!1;for(const o of e.explicitOrderBy)e.D.push(o),o.field.isKeyField()&&(s=!0);if(!s){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ea(sn.keyField(),o))}}}return e.D}function Gi(t){const e=Ce(t);if(!e.C)if(e.limitType==="F")e.C=xy(e.path,e.collectionGroup,Da(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const o of Da(e)){const l=o.dir==="desc"?"asc":"desc";r.push(new ea(o.field,l))}const i=e.endAt?new Zu(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new Zu(e.startAt.position,!e.startAt.inclusive):null;e.C=xy(e.path,e.collectionGroup,r,e.filters,e.limit,i,s)}return e.C}function dP(t,e,r){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function zc(t,e){return gg(Gi(t),Gi(e))&&t.limitType===e.limitType}function I_(t){return`${pg(Gi(t))}|lt:${t.limitType}`}function Cf(t){return`Query(target=${nP(Gi(t))}; limitType=${t.limitType})`}function vg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of r.explicitOrderBy)if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const c=ky(s,o,l);return s.inclusive?c<=0:c<0}(r.startAt,Da(r),i)||r.endAt&&!function(s,o,l){const c=ky(s,o,l);return s.inclusive?c>=0:c>0}(r.endAt,Da(r),i))}(t,e)}function fP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b_(t){return(e,r)=>{let i=!1;for(const s of Da(t)){const o=pP(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function pP(t,e,r){const i=t.field.isKeyField()?ge.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),h=l.data.field(s);return c!==null&&h!==null?Hs(c,h):_e()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function P_(t){return{integerValue:""+t}}function gP(t,e){return QA(e)?P_(e):A_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this._=void 0}}function mP(t,e,r){return t instanceof tc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof La?N_(t,e):t instanceof Oa?D_(t,e):function(i,s){const o=R_(i,s),l=Iy(o)+Iy(i.k);return Sf(o)&&Sf(i.k)?P_(l):A_(i.M,l)}(t,e)}function vP(t,e,r){return t instanceof La?N_(t,e):t instanceof Oa?D_(t,e):r}function R_(t,e){return t instanceof nc?Sf(r=e)||function(i){return!!i&&"doubleValue"in i}(r)?e:{integerValue:0}:null;var r}class tc extends Gc{}class La extends Gc{constructor(e){super(),this.elements=e}}function N_(t,e){const r=L_(e);for(const i of t.elements)r.some(s=>tr(s,i))||r.push(i);return{arrayValue:{values:r}}}class Oa extends Gc{constructor(e){super(),this.elements=e}}function D_(t,e){let r=L_(e);for(const i of t.elements)r=r.filter(s=>!tr(s,i));return{arrayValue:{values:r}}}class nc extends Gc{constructor(e,r){super(),this.M=e,this.k=r}}function Iy(t){return ut(t.integerValue||t.doubleValue)}function L_(t){return fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof La&&i instanceof La||r instanceof Oa&&i instanceof Oa?Vs(r.elements,i.elements,tr):r instanceof nc&&i instanceof nc?tr(r.k,i.k):r instanceof tc&&i instanceof tc}(t.transform,e.transform)}class wP{constructor(e,r){this.version=e,this.transformResults=r}}class Wr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hc{}function SP(t,e,r){t instanceof Wc?function(i,s,o){const l=i.value.clone(),c=Py(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof lo?function(i,s,o){if(!uu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Py(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(O_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Ef(t,e,r){t instanceof Wc?function(i,s,o){if(!uu(i.precondition,s))return;const l=i.value.clone(),c=Ry(i.fieldTransforms,o,s);l.setAll(c),s.convertToFoundDocument(Ay(s),l).setHasLocalMutations()}(t,e,r):t instanceof lo?function(i,s,o){if(!uu(i.precondition,s))return;const l=Ry(i.fieldTransforms,o,s),c=s.data;c.setAll(O_(i)),c.setAll(l),s.convertToFoundDocument(Ay(s),c).setHasLocalMutations()}(t,e,r):function(i,s){uu(i.precondition,s)&&s.convertToNoDocument(ke.min())}(t,e)}function _P(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=R_(i.transform,s||null);o!=null&&(r==null&&(r=fn.empty()),r.set(i.field,o))}return r||null}function by(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vs(r,i,(s,o)=>yP(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ay(t){return t.isFoundDocument()?t.version:ke.min()}class Wc extends Hc{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}}class lo extends Hc{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}}function O_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function Py(t,e,r){const i=new Map;$e(t.length===r.length);for(let s=0;s<r.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);i.set(o.field,vP(l,c,r[s]))}return i}function Ry(t,e,r){const i=new Map;for(const s of t){const o=s.transform,l=r.data.field(s.field);i.set(s.field,mP(o,l,e))}return i}class M_ extends Hc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class CP extends Hc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ne;function xP(t){switch(t){default:return _e();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function j_(t){if(t===void 0)return Zr("GRPC error has no .code"),ee.UNKNOWN;switch(t){case lt.OK:return ee.OK;case lt.CANCELLED:return ee.CANCELLED;case lt.UNKNOWN:return ee.UNKNOWN;case lt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case lt.INTERNAL:return ee.INTERNAL;case lt.UNAVAILABLE:return ee.UNAVAILABLE;case lt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case lt.NOT_FOUND:return ee.NOT_FOUND;case lt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case lt.ABORTED:return ee.ABORTED;case lt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case lt.DATA_LOSS:return ee.DATA_LOSS;default:return _e()}}(Ne=lt||(lt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return w_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,r){this.comparator=e,this.root=r||Tt.EMPTY}insert(e,r){return new Et(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??Tt.RED,this.left=s??Tt.EMPTY,this.right=o??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new Tt(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(t,e,r,i,s){return this}insert(t,e,r){return new Tt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ny(this.data.getIterator())}getIteratorFrom(e){return new Ny(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Nt(this.comparator);return r.data=e,r}}class Ny{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=new Et(ge.comparator);function Hi(){return kP}const TP=new Et(ge.comparator);function xf(){return TP}function ed(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const IP=new Et(ge.comparator),bP=new Nt(ge.comparator);function He(...t){let e=bP;for(const r of t)e=e.add(r);return e}const AP=new Nt(Me);function U_(){return AP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r){const i=new Map;return i.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,r)),new qc(ke.min(),i,U_(),Hi(),He())}}class il{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r){return new il(Lt.EMPTY_BYTE_STRING,r,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,r,i,s){this.O=e,this.removedTargetIds=r,this.key=i,this.F=s}}class F_{constructor(e,r){this.targetId=e,this.$=r}}class B_{constructor(e,r,i=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Dy{constructor(){this.B=0,this.L=Oy(),this.U=Lt.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=He(),r=He(),i=He();return this.L.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:_e()}}),new il(this.U,this.q,e,r,i)}J(){this.K=!1,this.L=Oy()}Y(e,r){this.K=!0,this.L=this.L.insert(e,r)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class PP{constructor(e){this.nt=e,this.st=new Map,this.it=Hi(),this.rt=Ly(),this.ot=new Nt(Me)}ut(e){for(const r of e.O)e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F);for(const r of e.removedTargetIds)this.ct(r,e.key,e.F)}ht(e){this.forEachTarget(e,r=>{const i=this.lt(r);switch(e.state){case 0:this.ft(r)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(r);break;case 3:this.ft(r)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(r)&&(this.dt(r),i.W(e.resumeToken));break;default:_e()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.st.forEach((i,s)=>{this.ft(s)&&r(s)})}_t(e){const r=e.targetId,i=e.$.count,s=this.wt(r);if(s){const o=s.target;if(_f(o))if(i===0){const l=new ge(o.path);this.ct(r,l,Bt.newNoDocument(l,ke.min()))}else $e(i===1);else this.gt(r)!==i&&(this.dt(r),this.ot=this.ot.add(r))}}yt(e){const r=new Map;this.st.forEach((o,l)=>{const c=this.wt(l);if(c){if(o.current&&_f(c.target)){const h=new ge(c.target.path);this.it.get(h)!==null||this.It(l,h)||this.ct(l,h,Bt.newNoDocument(h,e))}o.j&&(r.set(l,o.H()),o.J())}});let i=He();this.rt.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.wt(h);return!f||f.purpose===2||(c=!1,!1)}),c&&(i=i.add(o))}),this.it.forEach((o,l)=>l.setReadTime(e));const s=new qc(e,r,this.ot,this.it,i);return this.it=Hi(),this.rt=Ly(),this.ot=new Nt(Me),s}at(e,r){if(!this.ft(e))return;const i=this.It(e,r.key)?2:0;this.lt(e).Y(r.key,i),this.it=this.it.insert(r.key,r),this.rt=this.rt.insert(r.key,this.Tt(r.key).add(e))}ct(e,r,i){if(!this.ft(e))return;const s=this.lt(e);this.It(e,r)?s.Y(r,1):s.X(r),this.rt=this.rt.insert(r,this.Tt(r).delete(e)),i&&(this.it=this.it.insert(r,i))}removeTarget(e){this.st.delete(e)}gt(e){const r=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let r=this.st.get(e);return r||(r=new Dy,this.st.set(e,r)),r}Tt(e){let r=this.rt.get(e);return r||(r=new Nt(Me),this.rt=this.rt.insert(e,r)),r}ft(e){const r=this.wt(e)!==null;return r||pe("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.st.get(e);return r&&r.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Dy),this.nt.getRemoteKeysForTarget(e).forEach(r=>{this.ct(e,r,null)})}It(e,r){return this.nt.getRemoteKeysForTarget(e).has(r)}}function Ly(){return new Et(ge.comparator)}function Oy(){return new Et(ge.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),NP=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class DP{constructor(e,r){this.databaseId=e,this.N=r}}function rc(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $_(t,e){return t.N?e.toBase64():e.toUint8Array()}function LP(t,e){return rc(t,e.toTimestamp())}function gr(t){return $e(!!t),ke.fromTimestamp(function(e){const r=ei(e);return new Vt(r.seconds,r.nanos)}(t))}function yg(t,e){return function(r){return new ze(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function V_(t){const e=ze.fromString(t);return $e(H_(e)),e}function kf(t,e){return yg(t.databaseId,e.path)}function td(t,e){const r=V_(e);if(r.get(1)!==t.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ge(z_(r))}function Tf(t,e){return yg(t.databaseId,e)}function OP(t){const e=V_(t);return e.length===4?ze.emptyPath():z_(e)}function If(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function z_(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function My(t,e,r){return{name:kf(t,e),fields:r.value.mapValue.fields}}function MP(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,f){return h.N?($e(f===void 0||typeof f=="string"),Lt.fromBase64String(f||"")):($e(f===void 0||f instanceof Uint8Array),Lt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const f=h.code===void 0?ee.UNKNOWN:j_(h.code);return new fe(f,h.message||"")}(l);r=new B_(i,s,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=td(t,i.document.name),o=gr(i.document.updateTime),l=new fn({mapValue:{fields:i.document.fields}}),c=Bt.newFoundDocument(s,o,l),h=i.targetIds||[],f=i.removedTargetIds||[];r=new cu(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=td(t,i.document),o=i.readTime?gr(i.readTime):ke.min(),l=Bt.newNoDocument(s,o),c=i.removedTargetIds||[];r=new cu([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=td(t,i.document),o=i.removedTargetIds||[];r=new cu([],o,s,null)}else{if(!("filter"in e))return _e();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,o=new EP(s),l=i.targetId;r=new F_(l,o)}}return r}function jP(t,e){let r;if(e instanceof Wc)r={update:My(t,e.key,e.value)};else if(e instanceof M_)r={delete:kf(t,e.key)};else if(e instanceof lo)r={update:My(t,e.key,e.data),updateMask:qP(e.fieldMask)};else{if(!(e instanceof CP))return _e();r={verify:kf(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const l=o.transform;if(l instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof La)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nc)return{fieldPath:o.field.canonicalString(),increment:l.k};throw _e()}(0,i))),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(t,e.precondition)),r}function UP(t,e){return t&&t.length>0?($e(e!==void 0),t.map(r=>function(i,s){let o=i.updateTime?gr(i.updateTime):gr(s);return o.isEqual(ke.min())&&(o=gr(s)),new wP(o,i.transformResults||[])}(r,e))):[]}function FP(t,e){return{documents:[Tf(t,e.path)]}}function BP(t,e){const r={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(r.parent=Tf(t,i),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=Tf(t,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(h){if(h.length===0)return;const f=h.map(v=>function(y){if(y.op==="=="){if(Ey(y.value))return{unaryFilter:{field:as(y.field),op:"IS_NAN"}};if(Cy(y.value))return{unaryFilter:{field:as(y.field),op:"IS_NULL"}}}else if(y.op==="!="){if(Ey(y.value))return{unaryFilter:{field:as(y.field),op:"IS_NOT_NAN"}};if(Cy(y.value))return{unaryFilter:{field:as(y.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(y.field),op:GP(y.op),value:y.value}}}(v));return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}(e.filters);s&&(r.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:as(v.field),direction:zP(v.dir)}}(f))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=function(h,f){return h.N||ao(f)?f:{value:f}}(t,e.limit);var c;return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(r.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),r}function $P(t){let e=OP(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){$e(i===1);const v=r.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];r.where&&(o=G_(r.where));let l=[];r.orderBy&&(l=r.orderBy.map(v=>function(y){return new ea(Cs(y.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(v)));let c=null;r.limit&&(c=function(v){let y;return y=typeof v=="object"?v.value:v,ao(y)?null:y}(r.limit));let h=null;r.startAt&&(h=function(v){const y=!!v.before,k=v.values||[];return new Zu(k,y)}(r.startAt));let f=null;return r.endAt&&(f=function(v){const y=!v.before,k=v.values||[];return new Zu(k,y)}(r.endAt)),hP(e,s,l,o,c,"F",h,f)}function VP(t,e){const r=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _e()}}(0,e.purpose);return r==null?null:{"goog-listen-tags":r}}function G_(t){return t?t.unaryFilter!==void 0?[WP(t)]:t.fieldFilter!==void 0?[HP(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>G_(e)).reduce((e,r)=>e.concat(r)):_e():[]}function zP(t){return RP[t]}function GP(t){return NP[t]}function as(t){return{fieldPath:t.canonicalString()}}function Cs(t){return sn.fromServerFormat(t.fieldPath)}function HP(t){return Xt.create(Cs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(t.fieldFilter.op),t.fieldFilter.value)}function WP(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Cs(t.unaryFilter.field);return Xt.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Cs(t.unaryFilter.field);return Xt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cs(t.unaryFilter.field);return Xt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cs(t.unaryFilter.field);return Xt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}function qP(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function H_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new se((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof se?r:se.resolve(r)}catch(r){return se.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):se.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):se.reject(r)}static resolve(e){return new se((r,i)=>{r(e)})}static reject(e){return new se((r,i)=>{i(e)})}static waitFor(e){return new se((r,i)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&r()},h=>i(h))}),l=!0,o===s&&r()})}static or(e){let r=se.resolve(!1);for(const i of e)r=r.next(s=>s?se.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&SP(o,e,i[s])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&Ef(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&Ef(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const i=e.get(r.key),s=i;this.applyToLocalView(s),i.isValidDocument()||s.convertToNoDocument(ke.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),He())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(r,i)=>by(r,i))&&Vs(this.baseMutations,e.baseMutations,(r,i)=>by(r,i))}}class wg{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){$e(e.mutations.length===i.length);let s=IP;const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new wg(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,r,i,s,o=ke.min(),l=ke.min(),c=Lt.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.Jt=e}}function ZP(t){const e=$P({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dP(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.qe=new tR}addToCollectionParentIndex(e,r){return this.qe.add(r),se.resolve()}getCollectionParents(e,r){return se.resolve(this.qe.getEntries(r))}addFieldIndex(e,r){return se.resolve()}deleteFieldIndex(e,r){return se.resolve()}getDocumentsMatchingTarget(e,r){return se.resolve(null)}getFieldIndex(e,r){return se.resolve(null)}getFieldIndexes(e,r){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}updateCollectionGroup(e,r,i){return se.resolve()}updateIndexEntries(e,r){return se.resolve()}}class tR{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Nt(ze.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Nt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new qs(0)}static yn(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==KP)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.changes=new uo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?se.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,r,i){this.ds=e,this.Bs=r,this.indexManager=i}Ls(e,r){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,r).next(i=>this.Us(e,r,i))}Us(e,r,i){return this.ds.getEntry(e,r).next(s=>{for(const o of i)o.applyToLocalView(s);return s})}qs(e,r){e.forEach((i,s)=>{for(const o of r)o.applyToLocalView(s)})}Ks(e,r){return this.ds.getEntries(e,r).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,r){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>this.qs(r,i))}Qs(e,r,i){return function(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.js(e,r.path):T_(r)?this.Ws(e,r,i):this.zs(e,r,i)}js(e,r){return this.Ls(e,new ge(r)).next(i=>{let s=xf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}Ws(e,r,i){const s=r.collectionGroup;let o=xf();return this.indexManager.getCollectionParents(e,s).next(l=>se.forEach(l,c=>{const h=function(f,v){return new rl(v,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.zs(e,h,i).next(f=>{f.forEach((v,y)=>{o=o.insert(v,y)})})}).next(()=>o))}zs(e,r,i){let s;return this.ds.getAllFromCollection(e,r.path,i).next(o=>(s=o,this.Bs.getAllMutationBatchesAffectingQuery(e,r))).next(o=>{for(const l of o)for(const c of l.mutations){const h=c.key;let f=s.get(h);f==null&&(f=Bt.newInvalidDocument(h),s=s.insert(h,f)),Ef(c,f,l.localWriteTime),f.isFoundDocument()||(s=s.remove(h))}}).next(()=>(s.forEach((o,l)=>{vg(r,l)||(s=s.remove(o))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hs=i,this.Js=s}static Ys(e,r){let i=He(),s=He();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Sg(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{Xs(e){this.Zs=e}Qs(e,r,i,s){return function(o){return o.filters.length===0&&o.limit===null&&o.startAt==null&&o.endAt==null&&(o.explicitOrderBy.length===0||o.explicitOrderBy.length===1&&o.explicitOrderBy[0].field.isKeyField())}(r)||i.isEqual(ke.min())?this.ti(e,r):this.Zs.Ks(e,s).next(o=>{const l=this.ei(r,o);return(lu(r)||ec(r))&&this.ni(r.limitType,l,s,i)?this.ti(e,r):(vy()<=Oe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cf(r)),this.Zs.Qs(e,r,JA(i,-1)).next(c=>(l.forEach(h=>{c=c.insert(h.key,h)}),c)))})}ei(e,r){let i=new Nt(b_(e));return r.forEach((s,o)=>{vg(e,o)&&(i=i.add(o))}),i}ni(e,r,i,s){if(i.size!==r.size)return!0;const o=e==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ti(e,r){return vy()<=Oe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Cf(r)),this.Zs.Qs(e,r,Ws.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,r,i,s){this.persistence=e,this.si=r,this.M=s,this.ii=new Et(Me),this.ri=new uo(o=>pg(o),gg),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(i)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new rR(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ii))}}function oR(t,e,r,i){return new sR(t,e,r,i)}async function W_(t,e){const r=Ce(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.Bs.getAllMutationBatches(i).next(o=>(s=o,r.ai(e),r.Bs.getAllMutationBatches(i))).next(o=>{const l=[],c=[];let h=He();for(const f of s){l.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}for(const f of o){c.push(f.batchId);for(const v of f.mutations)h=h.add(v.key)}return r.ci.Ks(i,h).next(f=>({hi:f,removedBatchIds:l,addedBatchIds:c}))})})}function aR(t,e){const r=Ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.ui.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const v=h.batch,y=v.keys();let k=se.resolve();return y.forEach(D=>{k=k.next(()=>f.getEntry(c,D)).next(I=>{const L=h.docVersions.get(D);$e(L!==null),I.version.compareTo(L)<0&&(v.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),f.addEntry(I)))})}),k.next(()=>l.Bs.removeMutationBatch(c,v))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.Bs.performConsistencyCheck(i)).next(()=>r.ci.Ks(i,s))})}function q_(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.fs.getLastRemoteSnapshotVersion(r))}function lR(t,e){const r=Ce(t),i=e.snapshotVersion;let s=r.ii;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=r.ui.newChangeBuffer({trackRemovals:!0});s=r.ii;const c=[];e.targetChanges.forEach((f,v)=>{const y=s.get(v);if(!y)return;c.push(r.fs.removeMatchingKeys(o,f.removedDocuments,v).next(()=>r.fs.addMatchingKeys(o,f.addedDocuments,v)));let k=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.has(v)?k=k.withResumeToken(Lt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):f.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(f.resumeToken,i)),s=s.insert(v,k),function(D,I,L){return D.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(y,k,f)&&c.push(r.fs.updateTargetData(o,k))});let h=Hi();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(uR(o,l,e.documentUpdates).next(f=>{h=f})),!i.isEqual(ke.min())){const f=r.fs.getLastRemoteSnapshotVersion(o).next(v=>r.fs.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(f)}return se.waitFor(c).next(()=>l.apply(o)).next(()=>r.ci.Gs(o,h)).next(()=>h)}).then(o=>(r.ii=s,o))}function uR(t,e,r){let i=He();return r.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Hi();return r.forEach((l,c)=>{const h=s.get(l);c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):pe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),o})}function cR(t,e){const r=Ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),r.Bs.getNextMutationBatchAfterBatchId(i,e)))}function hR(t,e){const r=Ce(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.fs.getTargetData(i,e).next(o=>o?(s=o,se.resolve(s)):r.fs.allocateTargetId(i).next(l=>(s=new Ii(e,l,0,i.currentSequenceNumber),r.fs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.ii.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.ii=r.ii.insert(i.targetId,i),r.ri.set(e,i.targetId)),i})}async function bf(t,e,r){const i=Ce(t),s=i.ii.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!sl(l))throw l;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.ii=i.ii.remove(e),i.ri.delete(s.target)}function jy(t,e,r){const i=Ce(t);let s=ke.min(),o=He();return i.persistence.runTransaction("Execute query","readonly",l=>function(c,h,f){const v=Ce(c),y=v.ri.get(f);return y!==void 0?se.resolve(v.ii.get(y)):v.fs.getTargetData(h,f)}(i,l,Gi(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>i.si.Qs(l,e,r?s:ke.min(),r?o:He())).next(c=>(dR(i,fP(e),c),{documents:c,li:o})))}function dR(t,e,r){let i=ke.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.oi.set(e,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,r){return se.resolve(this.wi.get(r))}saveBundleMetadata(e,r){var i;return this.wi.set(r.id,{id:(i=r).id,version:i.version,createTime:gr(i.createTime)}),se.resolve()}getNamedQuery(e,r){return se.resolve(this.mi.get(r))}saveNamedQuery(e,r){return this.mi.set(r.name,function(i){return{name:i.name,query:ZP(i.bundledQuery),readTime:gr(i.readTime)}}(r)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.overlays=new Et(ge.comparator),this.gi=new Map}getOverlay(e,r){return se.resolve(this.overlays.get(r))}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.Xt(e,r,o)}),se.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.gi.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.gi.delete(i)),se.resolve()}getOverlaysForCollection(e,r,i){const s=ed(),o=r.length+1,l=new ge(r.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&s.set(h.getKey(),h)}return se.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new Et((f,v)=>f-v);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>i){let v=o.get(f.largestBatchId);v===null&&(v=ed(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}const c=ed(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,v)=>c.set(f,v)),!(c.size()>=s)););return se.resolve(c)}Xt(e,r,i){if(i===null)return;const s=this.overlays.get(i.key);if(s!==null){const l=this.gi.get(s.largestBatchId).delete(i.key);this.gi.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new XP(r,i));let o=this.gi.get(r);o===void 0&&(o=He(),this.gi.set(r,o)),this.gi.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.yi=new Nt(yt.pi),this.Ii=new Nt(yt.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,r){const i=new yt(e,r);this.yi=this.yi.add(i),this.Ii=this.Ii.add(i)}Ei(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.Ai(new yt(e,r))}Ri(e,r){e.forEach(i=>this.removeReference(i,r))}Pi(e){const r=new ge(new ze([])),i=new yt(r,e),s=new yt(r,e+1),o=[];return this.Ii.forEachInRange([i,s],l=>{this.Ai(l),o.push(l.key)}),o}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const r=new ge(new ze([])),i=new yt(r,e),s=new yt(r,e+1);let o=He();return this.Ii.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const r=new yt(e,0),i=this.yi.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class yt{constructor(e,r){this.key=e,this.vi=r}static pi(e,r){return ge.comparator(e.key,r.key)||Me(e.vi,r.vi)}static Ti(e,r){return Me(e.vi,r.vi)||ge.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.Bs=[],this.Si=1,this.Di=new Nt(yt.pi)}checkEmpty(e){return se.resolve(this.Bs.length===0)}addMutationBatch(e,r,i,s){const o=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const l=new QP(o,r,i,s);this.Bs.push(l);for(const c of s)this.Di=this.Di.add(new yt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,r){return se.resolve(this.Ci(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.xi(i),o=s<0?0:s;return se.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.Bs.length===0?-1:this.Si-1)}getAllMutationBatches(e){return se.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new yt(r,0),s=new yt(r,Number.POSITIVE_INFINITY),o=[];return this.Di.forEachInRange([i,s],l=>{const c=this.Ci(l.vi);o.push(c)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Nt(Me);return r.forEach(s=>{const o=new yt(s,0),l=new yt(s,Number.POSITIVE_INFINITY);this.Di.forEachInRange([o,l],c=>{i=i.add(c.vi)})}),se.resolve(this.Ni(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;ge.isDocumentKey(o)||(o=o.child(""));const l=new yt(new ge(o),0);let c=new Nt(Me);return this.Di.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.vi)),!0)},l),se.resolve(this.Ni(c))}Ni(e){const r=[];return e.forEach(i=>{const s=this.Ci(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){$e(this.ki(r.batchId,"removed")===0),this.Bs.shift();let i=this.Di;return se.forEach(r.mutations,s=>{const o=new yt(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Di=i})}_n(e){}containsKey(e,r){const i=new yt(r,0),s=this.Di.firstAfterOrEqual(i);return se.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.Bs.length,se.resolve()}ki(e,r){return this.xi(e)}xi(e){return this.Bs.length===0?0:e-this.Bs[0].batchId}Ci(e){const r=this.xi(e);return r<0||r>=this.Bs.length?null:this.Bs[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.Mi=e,this.docs=new Et(ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mi(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return se.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(r))}getEntries(e,r){let i=Hi();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Bt.newInvalidDocument(s))}),se.resolve(i)}getAllFromCollection(e,r,i){let s=Hi();const o=new ge(r.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!r.isPrefixOf(c.path))break;c.path.length>r.length+1||eP(ZA(h),i)<=0||(s=s.insert(h.key,h.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(e,r,i,s){_e()}Oi(e,r){return se.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new vR(this)}getSize(e){return se.resolve(this.size)}}class vR extends nR{constructor(e){super(),this.Kn=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(i)}),se.waitFor(r)}getFromCache(e,r){return this.Kn.getEntry(e,r)}getAllFromCache(e,r){return this.Kn.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.persistence=e,this.Fi=new uo(r=>pg(r),gg),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.$i=0,this.Bi=new _g,this.targetCount=0,this.Li=qs.gn()}forEachTarget(e,r){return this.Fi.forEach((i,s)=>r(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$i&&(this.$i=r),se.resolve()}Tn(e){this.Fi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Li=new qs(r),this.highestTargetId=r),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,r){return this.Tn(r),this.targetCount+=1,se.resolve()}updateTargetData(e,r){return this.Tn(r),se.resolve()}removeTargetData(e,r){return this.Fi.delete(r.target),this.Bi.Pi(r.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.Fi.forEach((l,c)=>{c.sequenceNumber<=r&&i.get(c.targetId)===null&&(this.Fi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),se.waitFor(o).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,r){const i=this.Fi.get(r)||null;return se.resolve(i)}addMatchingKeys(e,r,i){return this.Bi.Ei(r,i),se.resolve()}removeMatchingKeys(e,r,i){this.Bi.Ri(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Bi.Pi(r),se.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Bi.Vi(r);return se.resolve(i)}containsKey(e,r){return se.resolve(this.Bi.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,r){this.Ui={},this.overlays={},this.es=new dg(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new yR(this),this.indexManager=new eR,this.ds=function(i){return new mR(i)}(i=>this.referenceDelegate.qi(i)),this.M=new JP(r),this._s=new fR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new pR,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Ui[e.toKey()];return i||(i=new gR(r,this.referenceDelegate),this.Ui[e.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,r,i){pe("MemoryPersistence","Starting transaction:",e);const s=new SR(this.es.next());return this.referenceDelegate.Ki(),i(s).next(o=>this.referenceDelegate.Gi(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Qi(e,r){return se.or(Object.values(this.Ui).map(i=>()=>i.containsKey(e,r)))}}class SR extends YP{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.ji=new _g,this.Wi=null}static zi(e){return new Cg(e)}get Hi(){if(this.Wi)return this.Wi;throw _e()}addReference(e,r,i){return this.ji.addReference(i,r),this.Hi.delete(i.toString()),se.resolve()}removeReference(e,r,i){return this.ji.removeReference(i,r),this.Hi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,r){return this.Hi.add(r.toString()),se.resolve()}removeTarget(e,r){this.ji.Pi(r.targetId).forEach(s=>this.Hi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.Hi.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Ki(){this.Wi=new Set}Gi(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Hi,i=>{const s=ge.fromPath(i);return this.Ji(e,s).next(o=>{o||r.removeEntry(s,ke.min())})}).next(()=>(this.Wi=null,r.apply(e)))}updateLimboDocument(e,r){return this.Ji(e,r).next(i=>{i?this.Hi.delete(r.toString()):this.Hi.add(r.toString())})}qi(e){return 0}Ji(e,r){return se.or([()=>se.resolve(this.ji.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Qi(e,r)])}}class Uy{constructor(){this.activeTargetIds=U_()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _R{constructor(){this.$r=new Uy,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,r,i){this.Br[e]=r}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new Uy,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{Lr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.io=r+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,r,i,s,o){const l=this.uo(e,r);pe("RestConnection","Sending: ",l,i);const c={};return this.ao(c,s,o),this.co(e,l,c,i).then(h=>(pe("RestConnection","Received: ",h),h),h=>{throw yy("RestConnection",`${e} failed with error: `,h,"url: ",l,"request:",i),h})}ho(e,r,i,s,o){return this.oo(e,r,i,s,o)}ao(e,r,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+oo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}uo(e,r){const i=ER[e];return`${this.io}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,r,i,s){return new Promise((o,l)=>{const c=new UA;c.listenOnce(OA.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Zh.NO_ERROR:const f=c.getResponseJson();pe("Connection","XHR received:",JSON.stringify(f)),o(f);break;case Zh.TIMEOUT:pe("Connection",'RPC "'+e+'" timed out'),l(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const v=c.getStatus();if(pe("Connection",'RPC "'+e+'" failed with status:',v,"response text:",c.getResponseText()),v>0){const y=c.getResponseJson().error;if(y&&y.status&&y.message){const k=function(D){const I=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(I)>=0?I:ee.UNKNOWN}(y.status);l(new fe(k,y.message))}else l(new fe(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{pe("Connection",'RPC "'+e+'" completed.')}});const h=JSON.stringify(s);c.send(r,"POST",h,i,15)})}lo(e,r,i){const s=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DA(),l=LA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new jA({})),this.ao(c.initMessageHeaders,r,i),Dw()||Ow()||IT()||Mw()||bT()||Lw()||(c.httpHeadersOverwriteParam="$httpHeaders");const h=s.join("");pe("Connection","Creating WebChannel: "+h,c);const f=o.createWebChannel(h,c);let v=!1,y=!1;const k=new xR({Wr:I=>{y?pe("Connection","Not sending because WebChannel is closed:",I):(v||(pe("Connection","Opening WebChannel transport."),f.open(),v=!0),pe("Connection","WebChannel sending:",I),f.send(I))},zr:()=>f.close()}),D=(I,L,O)=>{I.listen(L,C=>{try{O(C)}catch(E){setTimeout(()=>{throw E},0)}})};return D(f,$l.EventType.OPEN,()=>{y||pe("Connection","WebChannel transport opened.")}),D(f,$l.EventType.CLOSE,()=>{y||(y=!0,pe("Connection","WebChannel transport closed"),k.no())}),D(f,$l.EventType.ERROR,I=>{y||(y=!0,yy("Connection","WebChannel transport errored:",I),k.no(new fe(ee.UNAVAILABLE,"The operation could not be completed")))}),D(f,$l.EventType.MESSAGE,I=>{var L;if(!y){const O=I.data[0];$e(!!O);const C=O,E=C.error||((L=C[0])===null||L===void 0?void 0:L.error);if(E){pe("Connection","WebChannel received error:",E);const T=E.status;let R=function(M){const A=lt[M];if(A!==void 0)return j_(A)}(T),x=E.message;R===void 0&&(R=ee.INTERNAL,x="Unknown error status: "+T+" with message "+E.message),y=!0,k.no(new fe(R,x)),f.close()}else pe("Connection","WebChannel received:",O),k.so(O)}}),D(l,MA.STAT_EVENT,I=>{I.stat===gy.PROXY?pe("Connection","Detected buffering proxy"):I.stat===gy.NOPROXY&&pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.eo()},0),k}}function nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new DP(t,!0)}class K_{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Yn=e,this.timerId=r,this.fo=i,this._o=s,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const r=Math.floor(this.mo+this.Eo()),i=Math.max(0,Date.now()-this.po),s=Math.max(0,r-i);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.mo} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){this.yo!==null&&(this.yo.skipDelay(),this.yo=null)}cancel(){this.yo!==null&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,r,i,s,o,l,c,h){this.Yn=e,this.Ro=i,this.Po=s,this.bo=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new K_(e,r)}Co(){return this.state===1||this.state===5||this.xo()}xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.No()}async stop(){this.Co()&&await this.close(0)}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&this.vo===null&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}async Oo(){if(this.xo())return this.close(0)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}async close(e,r){this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,e!==4?this.Do.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(Zr(r.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Lo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Yr(r)}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),r=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Vo===r&&this.qo(i,s)},i=>{e(()=>{const s=new fe(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ko(s)})})}qo(e,r){const i=this.Uo(this.Vo);this.stream=this.Go(e,r),this.stream.Hr(()=>{i(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(s=>{i(()=>this.Ko(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}No(){this.state=5,this.Do.To(async()=>{this.state=0,this.start()})}Ko(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return r=>{this.Yn.enqueueAndForget(()=>this.Vo===e?r():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TR extends Y_{constructor(e,r,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,l),this.M=o}Go(e,r){return this.bo.lo("Listen",e,r)}onMessage(e){this.Do.reset();const r=MP(this.M,e),i=function(s){if(!("targetChange"in s))return ke.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ke.min():o.readTime?gr(o.readTime):ke.min()}(e);return this.listener.Qo(r,i)}jo(e){const r={};r.database=If(this.M),r.addTarget=function(s,o){let l;const c=o.target;return l=_f(c)?{documents:FP(s,c)}:{query:BP(s,c)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=$_(s,o.resumeToken):o.snapshotVersion.compareTo(ke.min())>0&&(l.readTime=rc(s,o.snapshotVersion.toTimestamp())),l}(this.M,e);const i=VP(this.M,e);i&&(r.labels=i),this.Fo(r)}Wo(e){const r={};r.database=If(this.M),r.removeTarget=e,this.Fo(r)}}class IR extends Y_{constructor(e,r,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,l),this.M=o,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,r){return this.bo.lo("Write",e,r)}onMessage(e){if($e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const r=UP(e.writeResults,e.commitTime),i=gr(e.commitTime);return this.listener.Yo(i,r)}return $e(!e.writeResults||e.writeResults.length===0),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=If(this.M),this.Fo(e)}Jo(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>jP(this.M,i))};this.Fo(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends class{}{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.bo=i,this.M=s,this.tu=!1}eu(){if(this.tu)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,r,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.oo(e,r,i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ee.UNKNOWN,s.toString())})}ho(e,r,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ho(e,r,i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ee.UNKNOWN,s.toString())})}terminate(){this.tu=!0}}class AR{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){this.nu===0&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){this.state==="Online"?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,e==="Online"&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Zr(r),this.iu=!1):pe("OnlineStateTracker",r)}cu(){this.su!==null&&(this.su.cancel(),this.su=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr(l=>{i.enqueueAndForget(async()=>{Zi(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Ce(c);h.fu.add(4),await al(h),h.wu.set("Unknown"),h.fu.delete(4),await Yc(h)}(this))})}),this.wu=new AR(i,s)}}async function Yc(t){if(Zi(t))for(const e of t.du)await e(!0)}async function al(t){for(const e of t.du)await e(!1)}function Q_(t,e){const r=Ce(t);r.lu.has(e.targetId)||(r.lu.set(e.targetId,e),kg(r)?xg(r):co(r).xo()&&Eg(r,e))}function X_(t,e){const r=Ce(t),i=co(r);r.lu.delete(e),i.xo()&&J_(r,e),r.lu.size===0&&(i.xo()?i.Mo():Zi(r)&&r.wu.set("Unknown"))}function Eg(t,e){t.mu.Z(e.targetId),co(t).jo(e)}function J_(t,e){t.mu.Z(e),co(t).Wo(e)}function xg(t){t.mu=new PP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.lu.get(e)||null}),co(t).start(),t.wu.ru()}function kg(t){return Zi(t)&&!co(t).Co()&&t.lu.size>0}function Zi(t){return Ce(t).fu.size===0}function Z_(t){t.mu=void 0}async function RR(t){t.lu.forEach((e,r)=>{Eg(t,e)})}async function NR(t,e){Z_(t),kg(t)?(t.wu.au(e),xg(t)):t.wu.set("Unknown")}async function DR(t,e,r){if(t.wu.set("Online"),e instanceof B_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.lu.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.lu.delete(l),i.mu.removeTarget(l))}(t,e)}catch(i){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ic(t,i)}else if(e instanceof cu?t.mu.ut(e):e instanceof F_?t.mu._t(e):t.mu.ht(e),!r.isEqual(ke.min()))try{const i=await q_(t.localStore);r.compareTo(i)>=0&&await function(s,o){const l=s.mu.yt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.lu.get(h);f&&s.lu.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach(c=>{const h=s.lu.get(c);if(!h)return;s.lu.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),J_(s,c);const f=new Ii(h.target,c,1,h.sequenceNumber);Eg(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){pe("RemoteStore","Failed to raise snapshot:",i),await ic(t,i)}}async function ic(t,e,r){if(!sl(e))throw e;t.fu.add(1),await al(t),t.wu.set("Offline"),r||(r=()=>q_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await r(),t.fu.delete(1),await Yc(t)})}function eC(t,e){return e().catch(r=>ic(t,r,e))}async function Qc(t){const e=Ce(t),r=ti(e);let i=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;LR(e);)try{const s=await cR(e.localStore,i);if(s===null){e.hu.length===0&&r.Mo();break}i=s.batchId,OR(e,s)}catch(s){await ic(e,s)}tC(e)&&nC(e)}function LR(t){return Zi(t)&&t.hu.length<10}function OR(t,e){t.hu.push(e);const r=ti(t);r.xo()&&r.Ho&&r.Jo(e.mutations)}function tC(t){return Zi(t)&&!ti(t).Co()&&t.hu.length>0}function nC(t){ti(t).start()}async function MR(t){ti(t).Zo()}async function jR(t){const e=ti(t);for(const r of t.hu)e.Jo(r.mutations)}async function UR(t,e,r){const i=t.hu.shift(),s=wg.from(i,e,r);await eC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qc(t)}async function FR(t,e){e&&ti(t).Ho&&await async function(r,i){if(s=i.code,xP(s)&&s!==ee.ABORTED){const o=r.hu.shift();ti(r).ko(),await eC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Qc(r)}var s}(t,e),tC(t)&&nC(t)}async function By(t,e){const r=Ce(t);r.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const i=Zi(r);r.fu.add(3),await al(r),i&&r.wu.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.fu.delete(3),await Yc(r)}async function BR(t,e){const r=Ce(t);e?(r.fu.delete(2),await Yc(r)):e||(r.fu.add(2),await al(r),r.wu.set("Unknown"))}function co(t){return t.gu||(t.gu=function(e,r,i){const s=Ce(e);return s.eu(),new TR(r,s.bo,s.authCredentials,s.appCheckCredentials,s.M,i)}(t.datastore,t.asyncQueue,{Hr:RR.bind(null,t),Yr:NR.bind(null,t),Qo:DR.bind(null,t)}),t.du.push(async e=>{e?(t.gu.ko(),kg(t)?xg(t):t.wu.set("Unknown")):(await t.gu.stop(),Z_(t))})),t.gu}function ti(t){return t.yu||(t.yu=function(e,r,i){const s=Ce(e);return s.eu(),new IR(r,s.bo,s.authCredentials,s.appCheckCredentials,s.M,i)}(t.datastore,t.asyncQueue,{Hr:MR.bind(null,t),Yr:FR.bind(null,t),Xo:jR.bind(null,t),Yo:UR.bind(null,t)}),t.du.push(async e=>{e?(t.yu.ko(),await Qc(t)):(await t.yu.stop(),t.hu.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.hu.length} pending writes`),t.hu=[]))})),t.yu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,r,i,s,o){const l=Date.now()+i,c=new Tg(e,r,l,s,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(t,e){if(Zr("AsyncQueue",`${e}: ${t}`),sl(t))return new fe(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.comparator=e?(r,i)=>e(r,i)||ge.comparator(r.key,i.key):(r,i)=>ge.comparator(r.key,i.key),this.keyedMap=xf(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new Ns(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Ns;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.pu=new Et(ge.comparator)}track(e){const r=e.doc.key,i=this.pu.get(r);i?e.type!==0&&i.type===3?this.pu=this.pu.insert(r,e):e.type===3&&i.type!==1?this.pu=this.pu.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pu=this.pu.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pu=this.pu.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pu=this.pu.remove(r):e.type===1&&i.type===2?this.pu=this.pu.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pu=this.pu.insert(r,{type:2,doc:e.doc}):_e():this.pu=this.pu.insert(r,e)}Iu(){const e=[];return this.pu.inorderTraversal((r,i)=>{e.push(i)}),e}}class Ks{constructor(e,r,i,s,o,l,c,h){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h}static fromInitialDocuments(e,r,i,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ks(e,r,Ns.emptySet(r),o,i,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.Tu=void 0,this.listeners=[]}}class VR{constructor(){this.queries=new uo(e=>I_(e),zc),this.onlineState="Unknown",this.Eu=new Set}}async function zR(t,e){const r=Ce(t),i=e.query;let s=!1,o=r.queries.get(i);if(o||(s=!0,o=new $R),s)try{o.Tu=await r.onListen(i)}catch(l){const c=Ig(l,`Initialization of query '${Cf(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,o),o.listeners.push(e),e.Au(r.onlineState),o.Tu&&e.Ru(o.Tu)&&bg(r)}async function GR(t,e){const r=Ce(t),i=e.query;let s=!1;const o=r.queries.get(i);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),s=o.listeners.length===0)}if(s)return r.queries.delete(i),r.onUnlisten(i)}function HR(t,e){const r=Ce(t);let i=!1;for(const s of e){const o=s.query,l=r.queries.get(o);if(l){for(const c of l.listeners)c.Ru(s)&&(i=!0);l.Tu=s}}i&&bg(r)}function WR(t,e,r){const i=Ce(t),s=i.queries.get(e);if(s)for(const o of s.listeners)o.onError(r);i.queries.delete(e)}function bg(t){t.Eu.forEach(e=>{e.next()})}class qR{constructor(e,r,i){this.query=e,this.Pu=r,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}Ru(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ks(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),r=!0):this.Su(e,this.onlineState)&&(this.Du(e),r=!0),this.Vu=e,r}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let r=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),r=!0),r}Su(e,r){if(!e.fromCache)return!0;const i=r!=="Offline";return(!this.options.Cu||!i)&&(!e.docs.isEmpty()||r==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const r=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Du(e){e=Ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.key=e}}class iC{constructor(e){this.key=e}}class KR{constructor(e,r){this.query=e,this.$u=r,this.Bu=null,this.current=!1,this.Lu=He(),this.mutatedKeys=He(),this.Uu=b_(e),this.qu=new Ns(this.Uu)}get Ku(){return this.$u}Gu(e,r){const i=r?r.Qu:new $y,s=r?r.qu:this.qu;let o=r?r.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=lu(this.query)&&s.size===this.query.limit?s.last():null,f=ec(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,y)=>{const k=s.get(v),D=vg(this.query,y)?y:null,I=!!k&&this.mutatedKeys.has(k.key),L=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let O=!1;k&&D?k.data.isEqual(D.data)?I!==L&&(i.track({type:3,doc:D}),O=!0):this.ju(k,D)||(i.track({type:2,doc:D}),O=!0,(h&&this.Uu(D,h)>0||f&&this.Uu(D,f)<0)&&(c=!0)):!k&&D?(i.track({type:0,doc:D}),O=!0):k&&!D&&(i.track({type:1,doc:k}),O=!0,(h||f)&&(c=!0)),O&&(D?(l=l.add(D),o=L?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),lu(this.query)||ec(this.query))for(;l.size>this.query.limit;){const v=lu(this.query)?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{qu:l,Qu:i,ni:c,mutatedKeys:o}}ju(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i){const s=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const o=e.Qu.Iu();o.sort((f,v)=>function(y,k){const D=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return D(y)-D(k)}(f.type,v.type)||this.Uu(f.doc,v.doc)),this.Wu(i);const l=r?this.zu():[],c=this.Lu.size===0&&this.current?1:0,h=c!==this.Bu;return this.Bu=c,o.length!==0||h?{snapshot:new Ks(this.query,e.qu,s,o,e.mutatedKeys,c===0,h,!1),Hu:l}:{Hu:l}}Au(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new $y,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(r=>this.$u=this.$u.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.$u=this.$u.delete(r)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=He(),this.qu.forEach(i=>{this.Ju(i.key)&&(this.Lu=this.Lu.add(i.key))});const r=[];return e.forEach(i=>{this.Lu.has(i)||r.push(new iC(i))}),this.Lu.forEach(i=>{e.has(i)||r.push(new rC(i))}),r}Yu(e){this.$u=e.li,this.Lu=He();const r=this.Gu(e.documents);return this.applyChanges(r,!0)}Xu(){return Ks.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,this.Bu===0)}}class YR{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class QR{constructor(e){this.key=e,this.Zu=!1}}class XR{constructor(e,r,i,s,o,l){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.ta={},this.ea=new uo(c=>I_(c),zc),this.na=new Map,this.sa=new Set,this.ia=new Et(ge.comparator),this.ra=new Map,this.oa=new _g,this.ua={},this.aa=new Map,this.ca=qs.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return this.ha===!0}}async function JR(t,e){const r=lN(t);let i,s;const o=r.ea.get(e);if(o)i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),s=o.view.Xu();else{const l=await hR(r.localStore,Gi(e));r.isPrimaryClient&&Q_(r.remoteStore,l);const c=r.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,s=await ZR(r,e,i,c==="current")}return s}async function ZR(t,e,r,i){t.la=(v,y,k)=>async function(D,I,L,O){let C=I.view.Gu(L);C.ni&&(C=await jy(D.localStore,I.query,!1).then(({documents:R})=>I.view.Gu(R,C)));const E=O&&O.targetChanges.get(I.targetId),T=I.view.applyChanges(C,D.isPrimaryClient,E);return zy(D,I.targetId,T.Hu),T.snapshot}(t,v,y,k);const s=await jy(t.localStore,e,!0),o=new KR(e,s.li),l=o.Gu(s.documents),c=il.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline"),h=o.applyChanges(l,t.isPrimaryClient,c);zy(t,r,h.Hu);const f=new YR(e,r,o);return t.ea.set(e,f),t.na.has(r)?t.na.get(r).push(e):t.na.set(r,[e]),h.snapshot}async function eN(t,e){const r=Ce(t),i=r.ea.get(e),s=r.na.get(i.targetId);if(s.length>1)return r.na.set(i.targetId,s.filter(o=>!zc(o,e))),void r.ea.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),X_(r.remoteStore,i.targetId),Af(r,i.targetId)}).catch(ol)):(Af(r,i.targetId),await bf(r.localStore,i.targetId,!0))}async function tN(t,e,r){const i=uN(t);try{const s=await function(o,l){const c=Ce(o),h=Vt.now(),f=l.reduce((y,k)=>y.add(k.key),He());let v;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>c.ci.Ks(y,f).next(k=>{v=k;const D=[];for(const I of l){const L=_P(I,v.get(I.key));L!=null&&D.push(new lo(I.key,L,C_(L.value.mapValue),Wr.exists(!0)))}return c.Bs.addMutationBatch(y,h,D,l)})).then(y=>(y.applyToLocalDocumentSet(v),{batchId:y.batchId,changes:v}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.ua[o.currentUser.toKey()];h||(h=new Et(Me)),h=h.insert(l,c),o.ua[o.currentUser.toKey()]=h}(i,s.batchId,r),await ll(i,s.changes),await Qc(i.remoteStore)}catch(s){const o=Ig(s,"Failed to persist write");r.reject(o)}}async function sC(t,e){const r=Ce(t);try{const i=await lR(r.localStore,e);e.targetChanges.forEach((s,o)=>{const l=r.ra.get(o);l&&($e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Zu=!0:s.modifiedDocuments.size>0?$e(l.Zu):s.removedDocuments.size>0&&($e(l.Zu),l.Zu=!1))}),await ll(r,i,e)}catch(i){await ol(i)}}function Vy(t,e,r){const i=Ce(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ea.forEach((o,l)=>{const c=l.view.Au(e);c.snapshot&&s.push(c.snapshot)}),function(o,l){const c=Ce(o);c.onlineState=l;let h=!1;c.queries.forEach((f,v)=>{for(const y of v.listeners)y.Au(l)&&(h=!0)}),h&&bg(c)}(i.eventManager,e),s.length&&i.ta.Qo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function nN(t,e,r){const i=Ce(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.ra.get(e),o=s&&s.key;if(o){let l=new Et(ge.comparator);l=l.insert(o,Bt.newNoDocument(o,ke.min()));const c=He().add(o),h=new qc(ke.min(),new Map,new Nt(Me),l,c);await sC(i,h),i.ia=i.ia.remove(o),i.ra.delete(e),Ag(i)}else await bf(i.localStore,e,!1).then(()=>Af(i,e,r)).catch(ol)}async function rN(t,e){const r=Ce(t),i=e.batch.batchId;try{const s=await aR(r.localStore,e);aC(r,i,null),oC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await ll(r,s)}catch(s){await ol(s)}}async function iN(t,e,r){const i=Ce(t);try{const s=await function(o,l){const c=Ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.Bs.lookupMutationBatch(h,l).next(v=>($e(v!==null),f=v.keys(),c.Bs.removeMutationBatch(h,v))).next(()=>c.Bs.performConsistencyCheck(h)).next(()=>c.ci.Ks(h,f))})}(i.localStore,e);aC(i,e,r),oC(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await ll(i,s)}catch(s){await ol(s)}}function oC(t,e){(t.aa.get(e)||[]).forEach(r=>{r.resolve()}),t.aa.delete(e)}function aC(t,e,r){const i=Ce(t);let s=i.ua[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.ua[i.currentUser.toKey()]=s}}function Af(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.na.get(e))t.ea.delete(i),r&&t.ta.fa(i,r);t.na.delete(e),t.isPrimaryClient&&t.oa.Pi(e).forEach(i=>{t.oa.containsKey(i)||lC(t,i)})}function lC(t,e){t.sa.delete(e.path.canonicalString());const r=t.ia.get(e);r!==null&&(X_(t.remoteStore,r),t.ia=t.ia.remove(e),t.ra.delete(r),Ag(t))}function zy(t,e,r){for(const i of r)i instanceof rC?(t.oa.addReference(i.key,e),sN(t,i)):i instanceof iC?(pe("SyncEngine","Document no longer in limbo: "+i.key),t.oa.removeReference(i.key,e),t.oa.containsKey(i.key)||lC(t,i.key)):_e()}function sN(t,e){const r=e.key,i=r.path.canonicalString();t.ia.get(r)||t.sa.has(i)||(pe("SyncEngine","New document in limbo: "+r),t.sa.add(i),Ag(t))}function Ag(t){for(;t.sa.size>0&&t.ia.size<t.maxConcurrentLimboResolutions;){const e=t.sa.values().next().value;t.sa.delete(e);const r=new ge(ze.fromString(e)),i=t.ca.next();t.ra.set(i,new QR(r)),t.ia=t.ia.insert(r,i),Q_(t.remoteStore,new Ii(Gi(mg(r.path)),i,2,dg.A))}}async function ll(t,e,r){const i=Ce(t),s=[],o=[],l=[];i.ea.isEmpty()||(i.ea.forEach((c,h)=>{l.push(i.la(h,e,r).then(f=>{if(f){i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,f.fromCache?"not-current":"current"),s.push(f);const v=Sg.Ys(h.targetId,f);o.push(v)}}))}),await Promise.all(l),i.ta.Qo(s),await async function(c,h){const f=Ce(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>se.forEach(h,y=>se.forEach(y.Hs,k=>f.persistence.referenceDelegate.addReference(v,y.targetId,k)).next(()=>se.forEach(y.Js,k=>f.persistence.referenceDelegate.removeReference(v,y.targetId,k)))))}catch(v){if(!sl(v))throw v;pe("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const y=v.targetId;if(!v.fromCache){const k=f.ii.get(y),D=k.snapshotVersion,I=k.withLastLimboFreeSnapshotVersion(D);f.ii=f.ii.insert(y,I)}}}(i.localStore,o))}async function oN(t,e){const r=Ce(t);if(!r.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const i=await W_(r.localStore,e);r.currentUser=e,function(s,o){s.aa.forEach(l=>{l.forEach(c=>{c.reject(new fe(ee.CANCELLED,o))})}),s.aa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ll(r,i.hi)}}function aN(t,e){const r=Ce(t),i=r.ra.get(e);if(i&&i.Zu)return He().add(i.key);{let s=He();const o=r.na.get(e);if(!o)return s;for(const l of o){const c=r.ea.get(l);s=s.unionWith(c.view.Ku)}return s}}function lN(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nN.bind(null,e),e.ta.Qo=HR.bind(null,e.eventManager),e.ta.fa=WR.bind(null,e.eventManager),e}function uN(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iN.bind(null,e),e}class cN{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=Kc(e.databaseInfo.databaseId),this.sharedClientState=this._a(e),this.persistence=this.wa(e),await this.persistence.start(),this.gcScheduler=this.ma(e),this.localStore=this.ga(e)}ma(e){return null}ga(e){return oR(this.persistence,new iR,e.initialUser,this.M)}wa(e){return new wR(Cg.zi,this.M)}_a(e){return new _R}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hN{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Vy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oN.bind(null,this.syncEngine),await BR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new VR}createDatastore(e){const r=Kc(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new kR(s));var s;return function(o,l,c,h){return new bR(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=c=>Vy(this.syncEngine,c,0),l=Fy.vt()?new Fy:new CR,new PR(r,i,s,o,l);var r,i,s,o,l}createSyncEngine(e,r){return function(i,s,o,l,c,h,f){const v=new XR(i,s,o,l,c,h);return f&&(v.ha=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=Ce(e);pe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),await al(r),r._u.shutdown(),r.wu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,r,i,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=y_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{pe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(pe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=Ig(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function pN(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await W_(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function gN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await mN(t);pe("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(r,i),t.setCredentialChangeListener(s=>By(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,o)=>By(e.remoteStore,o)),t.onlineComponents=e}async function mN(t){return t.offlineComponents||(pe("FirestoreClient","Using default OfflineComponentProvider"),await pN(t,new cN)),t.offlineComponents}async function uC(t){return t.onlineComponents||(pe("FirestoreClient","Using default OnlineComponentProvider"),await gN(t,new hN)),t.onlineComponents}function vN(t){return uC(t).then(e=>e.syncEngine)}async function Gy(t){const e=await uC(t),r=e.eventManager;return r.onListen=JR.bind(null,e.syncEngine),r.onUnlisten=eN.bind(null,e.syncEngine),r}const Hy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e,r){if(!r)throw new fe(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yN(t,e,r,i){if(e===!0&&i===!0)throw new fe(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Wy(t){if(!ge.isDocumentKey(t))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qy(t){if(ge.isDocumentKey(t))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Xc(t);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,r,i){this._authCredentials=r,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,e instanceof Gs?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(s.options.projectId)}(e))}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BA;switch(r.type){case"gapi":const i=r.client;return $e(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new zA(i,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Hy.get(e);r&&(pe("ComponentProvider","Removing Datastore"),Hy.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class ul{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ul(this.firestore,e,this._query)}}class qr extends ul{constructor(e,r,i){super(e,r,mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new ge(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function Ze(t,e,...r){if(t=Ke(t),cC("collection","path",e),t instanceof Pg){const i=ze.fromString(e,...r);return qy(i),new qr(t,null,i)}{if(!(t instanceof cn||t instanceof qr))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ze.fromString(e,...r));return qy(i),new qr(t.firestore,null,i)}}function It(t,e,...r){if(t=Ke(t),arguments.length===1&&(e=y_.R()),cC("doc","path",e),t instanceof Pg){const i=ze.fromString(e,...r);return Wy(i),new cn(t,null,new ge(i))}{if(!(t instanceof cn||t instanceof qr))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ze.fromString(e,...r));return Wy(i),new cn(t.firestore,t instanceof qr?t.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new K_(this,"async_queue_retry"),this.qa=()=>{const r=nd();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Do.Ao()};const e=nd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const r=nd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const r=new Ti;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}async Qa(){if(this.Ma.length!==0){try{await this.Ma[0](),this.Ma.shift(),this.Do.reset()}catch(e){if(!sl(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Ma.length>0&&this.Do.To(()=>this.Qa())}}Ga(e){const r=this.ka.then(()=>(this.Ba=!0,e().catch(i=>{this.$a=i,this.Ba=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw Zr("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Ba=!1,i))));return this.ka=r,r}enqueueAfterDelay(e,r,i){this.Ka(),this.Ua.indexOf(e)>-1&&(r=0);const s=Tg.createAndSchedule(this,e,r,i,o=>this.ja(o));return this.Fa.push(s),s}Ka(){this.$a&&_e()}verifyOperationInProgress(){}async Wa(){let e;do e=this.ka,await e;while(e!==this.ka)}za(e){for(const r of this.Fa)if(r.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.Fa)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const r=this.Fa.indexOf(e);this.Fa.splice(r,1)}}function Yy(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ys extends Pg{constructor(e,r,i){super(e,r,i),this.type="firestore",this._queue=new wN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dC(this),this._firestoreClient.terminate()}}function SN(t=Rp()){return kc(t,"firestore").getImmediate()}function hC(t){return t._firestoreClient||dC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dC(t){var e;const r=t._freezeSettings(),i=function(s,o,l,c){return new YA(s,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new fN(t._authCredentials,t._appCheckCredentials,t._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qs(Lt.fromBase64String(e))}catch(r){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Qs(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=/^__.*__$/;class CN{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,r,this.fieldTransforms):new Wc(e,this.data,r,this.fieldTransforms)}}class fC{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new lo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function pC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Dg{constructor(e,r,i,s,o,l){this.settings=e,this.databaseId=r,this.M=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Za({path:i,ec:!1});return s.nc(e),s}sc(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Za({path:i,ec:!1});return s.Ya(),s}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return sc(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(e.length===0)throw this.rc("Document fields must not be empty");if(pC(this.Xa)&&_N.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class EN{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.M=i||Kc(e)}ac(e,r,i,s=!1){return new Dg({Xa:e,methodName:r,uc:i,path:sn.emptyPath(),ec:!1,oc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Lg(t){const e=t._freezeSettings(),r=Kc(t._databaseId);return new EN(t._databaseId,!!e.ignoreUndefinedProperties,r)}function xN(t,e,r,i,s,o={}){const l=t.ac(o.merge||o.mergeFields?2:0,e,r,s);Og("Data must be an object, but it was:",l,i);const c=gC(i,l);let h,f;if(o.merge)h=new Pa(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const k=Pf(e,y,r);if(!l.contains(k))throw new fe(ee.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);vC(v,k)||v.push(k)}h=new Pa(v),f=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=l.fieldTransforms;return new CN(new fn(c),h,f)}class Zc extends Rg{_toFieldTransform(e){if(e.Xa!==2)throw e.Xa===1?e.rc(`${this._methodName}() can only appear at the top level of your update data`):e.rc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}function kN(t,e,r,i){const s=t.ac(1,e,r);Og("Data must be an object, but it was:",s,i);const o=[],l=fn.empty();Ji(i,(h,f)=>{const v=Mg(e,h,r);f=Ke(f);const y=s.sc(v);if(f instanceof Zc)o.push(v);else{const k=cl(f,y);k!=null&&(o.push(v),l.set(v,k))}});const c=new Pa(o);return new fC(l,c,s.fieldTransforms)}function TN(t,e,r,i,s,o){const l=t.ac(1,e,r),c=[Pf(e,i,r)],h=[s];if(o.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<o.length;k+=2)c.push(Pf(e,o[k])),h.push(o[k+1]);const f=[],v=fn.empty();for(let k=c.length-1;k>=0;--k)if(!vC(f,c[k])){const D=c[k];let I=h[k];I=Ke(I);const L=l.sc(D);if(I instanceof Zc)f.push(D);else{const O=cl(I,L);O!=null&&(f.push(D),v.set(D,O))}}const y=new Pa(f);return new fC(v,y,l.fieldTransforms)}function IN(t,e,r,i=!1){return cl(r,t.ac(i?4:3,e))}function cl(t,e){if(mC(t=Ke(t)))return Og("Unsupported field value:",e,t),gC(t,e);if(t instanceof Rg)return function(r,i){if(!pC(i.Xa))throw i.rc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.rc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ec&&e.Xa!==4)throw e.rc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=cl(l,i.ic(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gP(i.M,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vt.fromDate(r);return{timestampValue:rc(i.M,s)}}if(r instanceof Vt){const s=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rc(i.M,s)}}if(r instanceof Ng)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qs)return{bytesValue:$_(i.M,r._byteString)};if(r instanceof cn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.rc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.rc(`Unsupported field value: ${Xc(r)}`)}(t,e)}function gC(t,e){const r={};return w_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(i,s)=>{const o=cl(s,e.tc(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function mC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof Ng||t instanceof Qs||t instanceof cn||t instanceof Rg)}function Og(t,e,r){if(!mC(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const i=Xc(r);throw i==="an object"?e.rc(t+" a custom object"):e.rc(t+" "+i)}}function Pf(t,e,r){if((e=Ke(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return Mg(t,e);throw sc("Field path arguments must be of type string or ",t,!1,void 0,r)}const bN=new RegExp("[~\\*/\\[\\]]");function Mg(t,e,r){if(e.search(bN)>=0)throw sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Jc(...e.split("."))._internalPath}catch{throw sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function sc(t,e,r,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${s}`),h+=")"),new fe(ee.INVALID_ARGUMENT,c+t+h)}function vC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class AN extends yC{data(){return super.data()}}function jg(t,e){return typeof e=="string"?Mg(t,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wC extends yC{constructor(e,r,i,s,o,l){super(e,r,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(jg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class hu extends wC{data(e={}){return super.data(e)}}class PN{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Bo(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new hu(this._firestore,this._userDataWriter,i.key,i,new Bo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new fe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new hu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new hu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:RN(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function RN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){if(ec(t)&&t.explicitOrderBy.length===0)throw new fe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DN{}function Yt(t,...e){for(const r of e)t=r._apply(t);return t}class LN extends DN{constructor(e,r,i){super(),this.lc=e,this.fc=r,this.dc=i,this.type="where"}_apply(e){const r=Lg(e.firestore),i=function(s,o,l,c,h,f,v){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Xy(v,f);const D=[];for(const I of v)D.push(Qy(c,s,I));y={arrayValue:{values:D}}}else y=Qy(c,s,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Xy(v,f),y=IN(l,o,v,f==="in"||f==="not-in");const k=Xt.create(h,f,y);return function(D,I){if(I.S()){const O=k_(D);if(O!==null&&!O.isEqual(I.field))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${O.toString()}' and '${I.field.toString()}'`);const C=x_(D);C!==null&&ON(D,I.field,C)}const L=function(O,C){for(const E of O.filters)if(C.indexOf(E.op)>=0)return E.op;return null}(D,function(O){switch(O){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(I.op));if(L!==null)throw L===I.op?new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${I.op.toString()}' filter.`):new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${I.op.toString()}' filters with '${L.toString()}' filters.`)}(s,k),k}(e._query,"where",r,e.firestore._databaseId,this.lc,this.fc,this.dc);return new ul(e.firestore,e.converter,function(s,o){const l=s.filters.concat([o]);return new rl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),l,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,i))}}function bt(t,e,r){const i=e,s=jg("where",t);return new LN(s,i,r)}function Qy(t,e,r){if(typeof(r=Ke(r))=="string"){if(r==="")throw new fe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T_(e)&&r.indexOf("/")!==-1)throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const i=e.path.child(ze.fromString(r));if(!ge.isDocumentKey(i))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _y(t,new ge(i))}if(r instanceof cn)return _y(t,r._key);throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(r)}.`)}function Xy(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ON(t,e,r){if(!r.isEqual(e))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{convertValue(e,r="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw _e()}}convertObject(e,r){const i={};return Ji(e.fields,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertGeoPoint(e){return new Ng(ut(e.latitude),ut(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=__(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const r=ei(e);return new Vt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=ze.fromString(e);$e(H_(i));const s=new Gs(i.get(1),i.get(3)),o=new ge(i.popFirst(5));return s.isEqual(r)||Zr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e,r){let i;return i=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,i}class SC extends MN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,r)}}function Wn(t,e,r,...i){t=bi(t,cn);const s=bi(t.firestore,Ys),o=Lg(s);let l;return l=typeof(e=Ke(e))=="string"||e instanceof Jc?TN(o,"updateDoc",t._key,e,r,i):kN(o,"updateDoc",t._key,e),Ug(s,[l.toMutation(t._key,Wr.exists(!0))])}function Jy(t){return Ug(bi(t.firestore,Ys),[new M_(t._key,Wr.none())])}function zl(t,e){const r=bi(t.firestore,Ys),i=It(t),s=jN(t.converter,e);return Ug(r,[xN(Lg(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Wr.exists(!1))]).then(()=>i)}function ct(t,...e){var r,i,s;t=Ke(t);let o={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||Yy(e[l])||(o=e[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges};if(Yy(e[l])){const y=e[l];e[l]=(r=y.next)===null||r===void 0?void 0:r.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,f,v;if(t instanceof cn)f=bi(t.firestore,Ys),v=mg(t._key.path),h={next:y=>{e[l]&&e[l](UN(f,t,y))},error:e[l+1],complete:e[l+2]};else{const y=bi(t,ul);f=bi(y.firestore,Ys),v=y._query;const k=new SC(f);h={next:D=>{e[l]&&e[l](new PN(f,k,y,D))},error:e[l+1],complete:e[l+2]},NN(t._query)}return function(y,k,D,I){const L=new dN(I),O=new qR(k,L,D);return y.asyncQueue.enqueueAndForget(async()=>zR(await Gy(y),O)),()=>{L.Ia(),y.asyncQueue.enqueueAndForget(async()=>GR(await Gy(y),O))}}(hC(f),v,c,h)}function Ug(t,e){return function(r,i){const s=new Ti;return r.asyncQueue.enqueueAndForget(async()=>tN(await vN(r),i,s)),s.promise}(hC(t),e)}function UN(t,e,r){const i=r.docs.get(e._key),s=new SC(t);return new wC(t,s,e._key,i,new Bo(r.hasPendingWrites,r.fromCache),e.converter)}(function(t,e=!0){(function(r){oo=r})(to),Oi(new Jr("firestore",(r,{options:i})=>{const s=r.getProvider("app").getImmediate(),o=new Ys(s,new $A(r.getProvider("auth-internal")),new HA(r.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC")),Jn(my,"3.4.8",t),Jn(my,"3.4.8","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebasestorage.googleapis.com",CC="storageBucket",FN=2*60*1e3,BN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends si{constructor(e,r){super(rd(e),`Firebase Storage: ${r} (${rd(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}_codeEquals(e){return rd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function rd(t){return"storage/"+t}function Fg(){const t="An unknown error occurred, please check the error payload for server response.";return new it("unknown",t)}function $N(t){return new it("object-not-found","Object '"+t+"' does not exist.")}function VN(t){return new it("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it("unauthenticated",t)}function GN(){return new it("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function HN(t){return new it("unauthorized","User does not have permission to access '"+t+"'.")}function WN(){return new it("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function qN(){return new it("canceled","User canceled the upload/download.")}function KN(t){return new it("invalid-url","Invalid URL '"+t+"'.")}function YN(t){return new it("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function QN(){return new it("no-default-bucket","No default bucket found. Did you set the '"+CC+"' property when initializing the app?")}function XN(){return new it("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function JN(){return new it("no-download-url","The given file does not have any download URLs.")}function Rf(t){return new it("invalid-argument",t)}function EC(){return new it("app-deleted","The Firebase app was deleted.")}function ZN(t){return new it("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ta(t,e){return new it("invalid-format","String does not match format '"+t+"': "+e)}function Ro(t){throw new it("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let i;try{i=gn.makeFromUrl(e,r)}catch{return new gn(e,"")}if(i.path==="")return i;throw YN(e)}static makeFromUrl(e,r){let i=null;const s="([A-Za-z0-9.\\-_]+)";function o(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function f(R){R.path_=decodeURIComponent(R.path)}const v="v[A-Za-z0-9_]+",y=r.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",D=new RegExp(`^https?://${y}/${v}/b/${s}/o${k}`,"i"),I={bucket:1,path:3},L=r===_C?"(?:storage.googleapis.com|storage.cloud.google.com)":r,O="([^?#]*)",C=new RegExp(`^https?://${L}/${s}/${O}`,"i"),T=[{regex:c,indices:h,postModify:o},{regex:D,indices:I,postModify:f},{regex:C,indices:{bucket:1,path:2},postModify:f}];for(let R=0;R<T.length;R++){const x=T[R],M=x.regex.exec(e);if(M){const A=M[x.indices.bucket];let $=M[x.indices.path];$||($=""),i=new gn(A,$),x.postModify(i);break}}if(i==null)throw KN(e);return i}}class eD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t,e,r){let i=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let f=!1;function v(...O){f||(f=!0,e.apply(null,O))}function y(O){s=setTimeout(()=>{s=null,t(D,h())},O)}function k(){o&&clearTimeout(o)}function D(O,...C){if(f){k();return}if(O){k(),v.call(null,O,...C);return}if(h()||l){k(),v.call(null,O,...C);return}i<64&&(i*=2);let T;c===1?(c=2,T=0):T=(i+Math.random())*1e3,y(T)}let I=!1;function L(O){I||(I=!0,k(),!f&&(s!==null?(O||(c=2),clearTimeout(s),y(0)):O||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,L(!0)},r),L}function nD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){return t!==void 0}function iD(t){return typeof t=="object"&&!Array.isArray(t)}function Bg(t){return typeof t=="string"||t instanceof String}function Zy(t){return $g()&&t instanceof Blob}function $g(){return typeof Blob<"u"}function e0(t,e,r,i){if(i<e)throw Rf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>r)throw Rf(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t,e,r){let i=e;return r==null&&(i=`https://${e}`),`${r}://${i}/v0${t}`}function xC(t){const e=encodeURIComponent;let r="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);r=r+s+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ai||(Ai={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,r,i,s,o,l,c,h,f,v,y){this.url_=e,this.method_=r,this.headers_=i,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=v,this.connectionFactory_=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,D)=>{this.resolve_=k,this.reject_=D,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Gl(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Ai.NO_ERROR,h=o.getStatus();if(!c||this.isRetryStatusCode_(h)){const v=o.getErrorCode()===Ai.ABORT;i(!1,new Gl(!1,null,v));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Gl(f,o))})},r=(i,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());rD(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=Fg();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?EC():qN();l(h)}else{const h=WN();l(h)}};this.canceled_?r(!1,new Gl(!1,null,!0)):this.backoffId_=tD(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const r=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,o=this.additionalRetryCodes_.indexOf(e)!==-1;return r||s||o}}class Gl{constructor(e,r,i){this.wasSuccessCode=e,this.connection=r,this.canceled=!!i}}function oD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cD(t,e,r,i,s,o){const l=xC(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return lD(h,e),oD(h,r),aD(h,o),uD(h,i),new sD(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dD(...t){const e=hD();if(e!==void 0){const r=new e;for(let i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}else{if($g())return new Blob(t);throw new it("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function fD(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class id{constructor(e,r){this.data=e,this.contentType=r||null}}function kC(t,e){switch(t){case Ln.RAW:return new id(TC(e));case Ln.BASE64:case Ln.BASE64URL:return new id(IC(t,e));case Ln.DATA_URL:return new id(mD(e),vD(e))}throw Fg()}function TC(t){const e=[];for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++r);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function gD(t){let e;try{e=decodeURIComponent(t)}catch{throw ta(Ln.DATA_URL,"Malformed data URL.")}return TC(e)}function IC(t,e){switch(t){case Ln.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw ta(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw ta(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=pD(e)}catch{throw ta(t,"Invalid character found")}const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}class bC{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw ta(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=r[1]||null;i!=null&&(this.base64=yD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function mD(t){const e=new bC(t);return e.base64?IC(Ln.BASE64,e.rest):gD(e.rest)}function vD(t){return new bC(t).contentType}function yD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,r){let i=0,s="";Zy(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,r){if(Zy(this.data_)){const i=this.data_,s=fD(i,e,r);return s===null?null:new Lr(s)}else{const i=new Uint8Array(this.data_.buffer,e,r-e);return new Lr(i,!0)}}static getBlob(...e){if($g()){const r=e.map(i=>i instanceof Lr?i.data_:i);return new Lr(dD.apply(null,r))}else{const r=e.map(l=>Bg(l)?kC(Ln.RAW,l).data:l.data_);let i=0;r.forEach(l=>{i+=l.byteLength});const s=new Uint8Array(i);let o=0;return r.forEach(l=>{for(let c=0;c<l.length;c++)s[o++]=l[c]}),new Lr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){let e;try{e=JSON.parse(t)}catch{return null}return iD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function SD(t,e){const r=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?r:t+"/"+r}function PC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t,e){return e}class Ht{constructor(e,r,i,s){this.server=e,this.local=r||e,this.writable=!!i,this.xform=s||_D}}let Hl=null;function CD(t){return!Bg(t)||t.length<2?t:PC(t)}function RC(){if(Hl)return Hl;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(o,l){return CD(l)}const r=new Ht("name");r.xform=e,t.push(r);function i(o,l){return l!==void 0?Number(l):l}const s=new Ht("size");return s.xform=i,t.push(s),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),Hl=t,Hl}function ED(t,e){function r(){const i=t.bucket,s=t.fullPath,o=new gn(i,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function xD(t,e,r){const i={};i.type="file";const s=r.length;for(let o=0;o<s;o++){const l=r[o];i[l.local]=l.xform(i,e[l.server])}return ED(i,t),i}function NC(t,e,r){const i=AC(e);return i===null?null:xD(t,i,r)}function kD(t,e,r,i){const s=AC(e);if(s===null||!Bg(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const v=t.bucket,y=t.fullPath,k="/b/"+l(v)+"/o/"+l(y),D=Vg(k,r,i),I=xC({alt:"media",token:f});return D+I})[0]}function TD(t,e){const r={},i=e.length;for(let s=0;s<i;s++){const o=e[s];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class DC{constructor(e,r,i,s){this.url=e,this.method=r,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){if(!t)throw Fg()}function ID(t,e){function r(i,s){const o=NC(t,s,e);return LC(o!==null),o}return r}function bD(t,e){function r(i,s){const o=NC(t,s,e);return LC(o!==null),kD(o,s,t.host,t._protocol)}return r}function OC(t){function e(r,i){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=GN():s=zN():r.getStatus()===402?s=VN(t.bucket):r.getStatus()===403?s=HN(t.path):s=i,s.serverResponse=i.serverResponse,s}return e}function AD(t){const e=OC(t);function r(i,s){let o=e(i,s);return i.getStatus()===404&&(o=$N(t.path)),o.serverResponse=s.serverResponse,o}return r}function PD(t,e,r){const i=e.fullServerUrl(),s=Vg(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new DC(s,o,bD(t,r),l);return c.errorHandler=AD(e),c}function RD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ND(t,e,r){const i=Object.assign({},r);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=RD(null,e)),i}function DD(t,e,r,i,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let T="";for(let R=0;R<2;R++)T=T+Math.random().toString().slice(2);return T}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const f=ND(e,i,s),v=TD(f,r),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,k=`\r
--`+h+"--",D=Lr.getBlob(y,i,k);if(D===null)throw XN();const I={name:f.fullPath},L=Vg(o,t.host,t._protocol),O="POST",C=t.maxUploadRetryTime,E=new DC(L,O,ID(t,r),C);return E.urlParams=I,E.headers=l,E.body=D.uploadData(),E.errorHandler=OC(e),E}class LD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ai.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ai.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ai.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,i,s){if(this.sent_)throw Ro("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ro("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ro("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ro("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ro("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OD extends LD{initXhr(){this.xhr_.responseType="text"}}function MC(){return new OD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,r){this._service=e,r instanceof gn?this._location=r:this._location=gn.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Wi(e,r)}get root(){const e=new gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PC(this._location.path)}get storage(){return this._service}get parent(){const e=wD(this._location.path);if(e===null)return null;const r=new gn(this._location.bucket,e);return new Wi(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw ZN(e)}}function MD(t,e,r){t._throwIfRoot("uploadBytes");const i=DD(t.storage,t._location,RC(),new Lr(e,!0),r);return t.storage.makeRequestWithTokens(i,MC).then(s=>({metadata:s,ref:t}))}function jD(t,e,r=Ln.RAW,i){t._throwIfRoot("uploadString");const s=kC(r,e),o=Object.assign({},i);return o.contentType==null&&s.contentType!=null&&(o.contentType=s.contentType),MD(t,s.data,o)}function UD(t){t._throwIfRoot("getDownloadURL");const e=PD(t.storage,t._location,RC());return t.storage.makeRequestWithTokens(e,MC).then(r=>{if(r===null)throw JN();return r})}function FD(t,e){const r=SD(t._location.path,e),i=new gn(t._location.bucket,r);return new Wi(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){return/^[A-Za-z]+:\/\//.test(t)}function $D(t,e){return new Wi(t,e)}function jC(t,e){if(t instanceof zg){const r=t;if(r._bucket==null)throw QN();const i=new Wi(r,r._bucket);return e!=null?jC(i,e):i}else return e!==void 0?FD(t,e):t}function VD(t,e){if(e&&BD(e)){if(t instanceof zg)return $D(t,e);throw Rf("To use ref(service, url), the first argument must be a Storage instance.")}else return jC(t,e)}function t0(t,e){const r=e==null?void 0:e[CC];return r==null?null:gn.makeFromBucketSpec(r,t)}class zg{constructor(e,r,i,s,o){this.app=e,this._authProvider=r,this._appCheckProvider=i,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=_C,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FN,this._maxUploadRetryTime=BN,this._requests=new Set,s!=null?this._bucket=gn.makeFromBucketSpec(s,this._host):this._bucket=t0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,e):this._bucket=t0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){e0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){e0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wi(this,e)}_makeRequest(e,r,i,s){if(this._deleted)return new eD(EC());{const o=cD(e,this._appId,i,s,r,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,i,s).getPromise()}}const n0="@firebase/storage",r0="0.9.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="storage";function zD(t,e,r,i){return t=Ke(t),jD(t,e,r,i)}function GD(t){return t=Ke(t),UD(t)}function HD(t,e){return t=Ke(t),VD(t,e)}function WD(t=Rp(),e){return t=Ke(t),kc(t,UC).getImmediate({identifier:e})}function qD(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new zg(r,i,s,e,to)}function KD(){Oi(new Jr(UC,qD,"PUBLIC").setMultipleInstances(!0)),Jn(n0,r0,""),Jn(n0,r0,"esm2017")}KD();const YD={apiKey:"AIzaSyAdYeQZYe6wHGUOU0SOwv1sbppnSoViJ2M",authDomain:"etudyonet-clone-3.firebaseapp.com",projectId:"etudyonet-clone-3",storageBucket:"etudyonet-clone-3.appspot.com",messagingSenderId:"555691155641",appId:"1:555691155641:web:13e1ad4042d03e16dd7b68"},Gg=xI(YD),be=SN(Gg),ve=Nb(Gg),QD=WD(Gg),FC=W.createContext(),XD=({children:t})=>{var Q;const[e,r]=W.useState({}),i=Fn(),s=Ze(be,"users"),o=Ze(be,"offers"),l=Ze(be,"requests"),c=Yt(Ze(be,"offers"),bt("authorId","==",`${(Q=ve.currentUser)==null?void 0:Q.uid}`)),[h,f]=W.useState(),[v,y]=W.useState(),[k,D]=W.useState("");W.useEffect(()=>_2(ve,H=>{r(H)}),[]);const I=(z,H)=>m2(ve,z,H),L=()=>(i("/"),C2(ve)),O=(z,H)=>v2(ve,z,H),C=z=>Vh(ve.currentUser,{displayName:z}),E=(z,H,X,F,G,J,te,ae)=>zl(s,{id:ve.currentUser.uid,name:z,email:H,bio:X,messanger:F,instagram:G,phoneNumber:J,deals:0,stars:0,photoURL:te,password:ae}),T=async(z,H,X,F,G)=>{await zl(o,{authorId:ve.currentUser.uid,name:z,phoneNumber:H,content:X,price:F,photoURl:e==null?void 0:e.photoURL})},R=async(z,H,X,F,G,J)=>await zl(l,{senderId:z,senderName:H,resId:X,resName:F,content:G,price:J,state:"waiting",message:null}),x=(z,H,X)=>Wn(z,{state:"refuse",message:H||`${X} has nothing to say`});W.useEffect(()=>{var z;k||ct(o,H=>{y(H.docs)}),ct(Yt(Ze(be,"users"),bt("id","==",`${(z=ve==null?void 0:ve.currentUser)==null?void 0:z.uid}`)),H=>{H.docs.forEach(X=>{f(X.data().password)})})},[e]);const M=(z,H,X)=>{Wn(z,{state:"accept"}),Wn(It(be,"users",`${H}`),{deals:X+1})},A=z=>Jy(It(be,"offers",`${z}`)),$=()=>{ct(o,z=>{y(k?z.docs.filter(H=>{var X,F;if((X=H.data().name)!=null&&X.toLowerCase().includes(k==null?void 0:k.toLowerCase())||(F=H.data().content)!=null&&F.toLowerCase().includes(k==null?void 0:k.toLowerCase()))return H}):z.docs)})},K=()=>{ct(o,z=>{y(z.docs)})},V=z=>Jy(z),B=async(z,H,X,F,G,J,te,ae,oe,Se,xe,Ee,Pe)=>{const st=Qi.credential(ve==null?void 0:ve.currentUser.email,h&&h);await g2(ve.currentUser,st),await w2(ve==null?void 0:ve.currentUser,z),await Vh(ve.currentUser,{displayName:Ee||Pe}),await Wn(It(be,"users",`${X}`),{name:Ee||Pe,email:z||H,bio:F||G,messanger:J||te,instagram:ae||oe,phoneNumber:Se||(xe=="00000000"?"Not available":xe)}),i("/profile")},U=(z,H,X,F,G,J,te,ae,oe,Se,xe,Ee,Pe,st)=>{oe?(Wn(It(be,"users",`${st}`),{stars:Pe+te}),zl(Ze(be,"reviews"),{senderId:z,senderPhoto:H,senderName:X,resId:F,resName:G,content:J||null,rate:te,deals:1})):(Wn(It(be,"users",`${st}`),{stars:Pe+te}),Wn(It(be,"reviews",`${ae}`),{content:J||Ee,rate:te||xe,deals:Se+1}))},P=async(z,H,X,F)=>{var te;const G=HD(QD,H.uid+".png");X(!0),await zD(G,z,"data_url");const J=await GD(G);await Vh(ve.currentUser,{photoURL:J}),await Wn(F,{photoURL:J}),console.log("wait..."),ct(c,ae=>{ae.docs.forEach(oe=>{Wn(It(be,"offers",`${oe.Id}`),{photoURl:J})})}),window.location.reload(!1),ct(Yt(Ze(be,"reviews"),bt("senderId","==",`${(te=ve.currentUser)==null?void 0:te.uid}`)),ae=>{ae.docs.forEach(oe=>{Wn(It(be,"reviews",`${oe.id}`),{senderPhoto:J})})}),X(!1)};return g.jsx(FC.Provider,{value:{CreateUser:I,user:e,logout:L,signIn:O,setUserName:C,createUserData:E,upload:P,createOffer:T,deleteOffer:A,createRequest:R,refuseRequest:x,acceptRequest:M,deleteRequest:V,createReview:U,updateUser:B,offers:v,search:$,cancelSearch:K,value:k,setValue:D},children:t})},Bn=()=>W.useContext(FC);const Kr="/assets/avatar-2603ac74.webp",JD="/assets/logo-1c709ec8.webp";var BC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i0=fr.createContext&&fr.createContext(BC),Yr=globalThis&&globalThis.__assign||function(){return Yr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Yr.apply(this,arguments)},ZD=globalThis&&globalThis.__rest||function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r};function $C(t){return t&&t.map(function(e,r){return fr.createElement(e.tag,Yr({key:r},e.attr),$C(e.child))})}function hl(t){return function(e){return fr.createElement(eL,Yr({attr:Yr({},t.attr)},e),$C(t.child))}}function eL(t){var e=function(r){var i=t.attr,s=t.size,o=t.title,l=ZD(t,["attr","size","title"]),c=s||r.size||"1em",h;return r.className&&(h=r.className),t.className&&(h=(h?h+" ":"")+t.className),fr.createElement("svg",Yr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,l,{className:h,style:Yr(Yr({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&fr.createElement("title",null,o),t.children)};return i0!==void 0?fr.createElement(i0.Consumer,null,function(r){return e(r)}):e(BC)}function tL(t){return hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}}]})(t)}function s0(t){return hl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]})(t)}function nL(){const[t,e]=W.useState(""),{user:r,logout:i}=Bn(),s=Fn(),[o,l]=W.useState(0),[c,h]=W.useState(0),[f,v]=W.useState(0);return W.useEffect(()=>{r&&e(r.photoURL),ct(Ze(be,"requests"),y=>{var k;l(0),(k=y.docs)==null||k.forEach(D=>{D.data().state!="waiting"&&D.data().senderId==(r==null?void 0:r.uid)&&l(I=>I+1)})}),ct(Ze(be,"requests"),y=>{var k;h(0),(k=y.docs)==null||k.forEach(D=>{D.data().state=="waiting"&&D.data().resId==(r==null?void 0:r.uid)&&h(I=>I+1)})})},[r]),g.jsxs("header",{className:"navbar",children:[g.jsxs("div",{id:"logo",onClick:()=>{s("/"),scrollTo(0,0)},children:[g.jsx("img",{src:JD,alt:""}),g.jsxs("h2",{children:["Etudyo",g.jsx("span",{children:"net"})]})]}),g.jsxs("ul",{className:"middle-section",children:[g.jsx("li",{id:window.location.pathname=="/"?"home":"undefined",onClick:()=>{s("/"),scrollTo(0,0)},children:"Home"}),g.jsx("li",{id:window.location.pathname=="/about"?"about":"undefined",onClick:()=>{s("/about")},children:"About"}),g.jsx("li",{id:window.location.pathname=="/contact"?"contact":"undefined",onClick:()=>{s("/#")},children:"Contact"})]}),r&&g.jsxs("div",{className:"drop-down",children:[g.jsx("ul",{children:g.jsxs("li",{onClick:()=>{s("/notifications")},title:"notifications",children:[c+o!="0"&&g.jsx("div",{id:"hey",children:o+c}),g.jsx(s0,{size:"24px",color:window.location.pathname=="/notifications"?"#FF8C00":"#333C41"})]})}),g.jsx("span",{class:"material-symbols-outlined",onClick:()=>{v(1)},children:"menu"}),f==1&&g.jsxs("div",{className:"white-space",children:[g.jsx("span",{class:"material-symbols-outlined",onClick:()=>{v(2),setTimeout(()=>{v(0)},700)},children:"close"}),g.jsxs("ul",{className:"links",children:[g.jsx("li",{onClick:()=>{s("/profile"),scrollTo(0,0)},id:window.location.pathname=="/profile"?"profile":"undefined",title:"profile",children:"Profile"}),g.jsx("li",{id:window.location.pathname=="/"?"home":"undefined",onClick:()=>{s("/"),scrollTo(0,0)},children:"Home"}),g.jsx("li",{id:window.location.pathname=="/about"?"about":"undefined",onClick:()=>{s("/about")},children:"About"}),g.jsx("li",{id:window.location.pathname=="/contact"?"contact":"undefined",onClick:()=>{s("/#")},children:"Contact"}),g.jsx("li",{onClick:i,children:g.jsx("button",{children:"Logout"})})]})]}),f==2&&g.jsx(g.Fragment,{children:g.jsxs("div",{className:"white-space2",children:[g.jsx("span",{class:"material-symbols-outlined",onClick:()=>{v(2)},children:"close"}),g.jsxs("ul",{className:"links",children:[g.jsx("li",{onClick:()=>{s("/profile"),scrollTo(0,0)},id:window.location.pathname=="/profile"?"profile":"undefined",title:"profile",children:"Profile"}),g.jsx("li",{id:window.location.pathname=="/"?"home":"undefined",onClick:()=>{s("/"),scrollTo(0,0)},children:"Home"}),g.jsx("li",{id:window.location.pathname=="/about"?"about":"undefined",onClick:()=>{s("/about")},children:"About"}),g.jsx("li",{id:window.location.pathname=="/contact"?"contact":"undefined",onClick:()=>{s("/#")},children:"Contact"}),g.jsx("li",{onClick:()=>{v(0)},children:g.jsx("button",{children:"Logout"})})]})]})})]}),r?g.jsxs("ul",{className:"user-section",children:[g.jsxs("li",{onClick:()=>{s("/notifications"),scrollTo(0,0)},title:"notifications",children:[c+o!="0"&&g.jsx("div",{id:"hey",children:o+c}),g.jsx(s0,{size:"24px",color:window.location.pathname=="/notifications"?"#FF8C00":"#333C41"})]}),g.jsx("li",{onClick:()=>{s("/profile"),scrollTo(0,0)},title:"profile",children:t?g.jsx("img",{src:t}):g.jsx("img",{src:Kr})}),g.jsx("button",{id:"logout",onClick:()=>{i()},children:"Logout"})]}):g.jsx("div",{id:"sginin-section",children:g.jsx("button",{id:"signin",onClick:()=>{s("/signin"),scrollTo(0,0)},children:"Sign in"})})]})}const rL="/assets/banner-0691c4c8.jpg";function Hg(){const{search:t,cancelSearch:e,value:r,setValue:i,user:s}=Bn(),o=Fn(),l=h=>{h==null||h.preventDefault(),window.location.pathname!="/"&&(scrollTo(0,300),o("/"),t())},c=h=>{h==null||h.preventDefault(),e(),document.getElementById("searchbar").value="",i(void 0)};return W.useEffect(()=>{s||c()},[!s]),g.jsxs("div",{className:"top",children:[g.jsx("img",{src:rL,alt:"banner",className:"banner"}),g.jsxs("form",{onSubmit:l,className:"search-area",children:[g.jsx("input",{type:"text",onChange:h=>{i(h.target.value)},id:"searchbar",placeholder:"Search for any offer",defaultValue:r,required:!0}),g.jsx("div",{id:"cancel",children:r&&g.jsx("span",{className:"material-symbols-outlined",onClick:c,children:"close"})}),g.jsx("button",{children:"search"})]}),window.location.pathname=="/profile"&&g.jsx(tL,{className:"setting",size:"30px",onClick:()=>{o("/settings"),scrollTo(0,-50)}})]})}function iL(){const{offers:t,user:e}=Bn(),r=Fn(),i=t!=null&&t.length?t.map(s=>g.jsxs("div",{className:"offer",onClick:()=>{r(`/users/${s.data().authorId}`),scrollTo(0,0)},children:[g.jsxs("div",{className:"offer-top",children:[g.jsx("img",{src:s.data().photoURl?s.data().photoURl:Kr,alt:""}),g.jsxs("div",{children:[s.data().name.length>=15?g.jsxs("h3",{children:[s.data().name.substr(0,15),"..."]}):g.jsx("h3",{children:s.data().name}),g.jsx("div",{className:"phoneNumber",children:s.data().phoneNumber=="Not available"?g.jsx("h2",{children:"   "}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"+216"}),g.jsx("h2",{children:s.data().phoneNumber.substr(0,2)}),g.jsx("h2",{children:s.data().phoneNumber.substr(2,3)}),g.jsx("h2",{children:s.data().phoneNumber.substr(5,5)})]})})]})]}),g.jsx("div",{className:"offer-content",children:g.jsx("h3",{children:s.data().content})}),g.jsx("div",{className:"offer-footer",children:g.jsxs("h4",{children:["STARTING AT ",g.jsxs("span",{children:[s.data().price.trim(),"DT"]})]})})]},s.id)):g.jsxs("div",{className:"person",children:[g.jsx("div",{id:"head"}),g.jsx("div",{id:"body"}),g.jsx("div",{id:"body2"}),g.jsx("div",{id:"circle"}),g.jsxs("div",{className:"qmarks",children:[g.jsx("h3",{className:"q1",children:"?"}),g.jsx("h3",{className:"q2",children:"?"}),g.jsx("h3",{className:"q3",children:"?"})]}),g.jsx("h3",{children:"No results found for your search."})]});return g.jsxs("div",{children:[g.jsx(Hg,{}),g.jsx("div",{className:"home",children:g.jsx("div",{className:"offers-section",children:i})})]})}const Wg="data:image/webp;base64,UklGRjYBAABXRUJQVlA4TCkBAAAvF8AFEG/BqG0kSe6Z92JfvHdozH8wjmQr0cPhxM8/ARIigL26+yIBzvTxNBwkHg6OAEIuCSIGJBYSxwAHiZc7FheRzDAky6gsg/0EZ2yWDVmyfJbLcgi/FhBr223bfHcVMCJDudtgQosRDDn7D6iWskBE/ycA/1BOLiPrks6pza19qqRv+pyWXIdhLRaTONMRWS2n0cqFto0HS5sZrOnmrL8JaA7GaYlOYpSfOJn8Ve0o9UhHPlZZ3oiIhO0JYEv2wJG9sZtKhpttADMk3DxH1W0zImHTG+WXTMxkir1PeQ9MaajLJnlmlxnrvc+M2U95+2KGtjFG6SSb0KyVGeOb41jtEdyYbsrzUE0KXOggT31GT0mpOj8e18wqACjbjDIfOgDJZZkX/EsA",qg="data:image/webp;base64,UklGRpIAAABXRUJQVlA4TIUAAAAvF8AFEIegqG0bKOH/GN57NOY/DESSoQH9U4lAg5VAIGKtxIC8AXgLet0K9JLAQSRJilTLfHP+7VLvg4CI/k8AcM4mLsfVUlFKskvuyD0DLrIxOrC0I/mPrfRyvcNenoL6BTbvTTrqvSb/0Aoh9C3yf3FxR3RA7trIAJZKE0uyC24p8wQAAA==",VC="data:image/webp;base64,UklGRhABAABXRUJQVlA4TAMBAAAvF8AFEE/BuG3bQGpf3X/T3p3yPK2BSG3bePv/Zwf2bRDFbdtGRPZftoe+rUG2kepP9SiPsCf4AO5br9EEnxkTTPkMwxKMCTSaz2gsDEvAWPAVhgXECHHYEILfwoZjU/fVNz86CA4jSU4c0fOb2WNm55+h4KQQIvrPyG3bSDZ9bGd5xhW5979KCqVAS3U7T0ieGNNPRysQ4rYAU0GaLevpHDpBnJa90XpgqQVRptEpA1oQZWQeXoODFrxDHIy6WjHXSWtu0UtPANhbnRbij+nWHGdG+q2cwOqCLng+2BSYc/n97wXmnL9KRUqWyE+Qm0hehrScRrtFtCwgLN/PnfPrp5IoAA==",zC="data:image/webp;base64,UklGRt4AAABXRUJQVlA4TNEAAAAvF8AFEOegoG0bKdHx1+H9Q2P+A0HbtukYjMFO+UjvI1ggcz8PFAgABRIUZFMCWv2IyFEPg97uAg4jSXKaZfhDXnqLe/JP1FcpgYj+T4D+sMyv03OW9ODSpyacT6eD4Y1BF2YM2nCuNzafzYnI5thi9chyg89K1WDaK4Yr2pA83OrGDLeqPWXDslQ7CNKR4oApOmA6NMHdA9w93Jud5Qleqrf7KBXD6kY13KCD1WjzymFVh5sP2/dFZz1gfHXhiHkspNOTw+vNpXdJ+fc6/Sv6QwA=",Ds="data:image/webp;base64,UklGRhIBAABXRUJQVlA4TAUBAAAvF8AFEN+goG0bKdHx1+H9Q2P+A0HbtmkZjMFP/QhvBgtknueDAgGQglaBNEALakTkaoazvQUcxrbVRM8rXzBsXgyf/isVsYWI/k+A6uUdDULcXc3lEbhevGE1iD+X1v8Etl6sgei6dKNfK2481fyk91Mi6WYiSsqY3+l6spTY1b5KL6IE3vZgU0ffZQZVP8fpILg0sP4ZKx96c22wSZrYf8ynLwRsM16q/RklrfDyBCSdI5tjkgdekl5YqRirerIyT51z0XnFpCeLVNS+MEsOq246uKQn5m1uPCWpG4hNbpiqDg3lCJjXBMppeef/7xEgFTVErmNWIxBe7znG+b2q2Ya96DYA",GC="data:image/webp;base64,UklGRvYAAABXRUJQVlA4TOoAAAAvF8AFEL+gsG3bRkb+R+5NOvTG/IdBtpHuCP796R6hBh9I32dwEAEBUCE+gvsKIiUijwEObNuqkltHH8+/FDznP1YJG0JE/ydAUlnN6LS0fSXpcv64vaSN8aihzqin4fpioe5wvAyUjVP9CfCDNVEfQIGKGe9WmSxNWQ6kwED3y2luNeEh+OGMR9RsuO6/MhaSFAOlbyKreTD3GbUV2JN3q5L6Js5WZu4rDHELI/fJsVxjH1n14DXR9OuH8b5JeUo2FTUDM2qrv5IWjn+crIUhnoXxkWNnjZ6o+8gqvRb+6JckfZdkPWZrkQQ=";function Nf(t){return hl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(t)}var HC={exports:{}};(function(t,e){(function(r,i){t.exports=i(W)})(self,function(r){return(()=>{var i={303:(c,h,f)=>{c.exports=f(302),f(200),f(630),f(16),f(677),f(635),f(166),f(140),f(922)},635:(c,h,f)=>{var v,y,k;(function(D){y=[f(302),f(677)],(k=typeof(v=function(I){var L=I.ExifMap.prototype;L.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},L.tags.ifd1=L.tags,L.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},L.getText=function(O){var C=this.get(O);switch(O){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[O][C];case"ExifVersion":case"FlashpixVersion":return C?String.fromCharCode(C[0],C[1],C[2],C[3]):void 0;case"ComponentsConfiguration":return C?this.stringValues[O][C[0]]+this.stringValues[O][C[1]]+this.stringValues[O][C[2]]+this.stringValues[O][C[3]]:void 0;case"GPSVersionID":return C?C[0]+"."+C[1]+"."+C[2]+"."+C[3]:void 0}return String(C)},L.getAll=function(){var O,C,E,T={};for(O in this)Object.prototype.hasOwnProperty.call(this,O)&&((C=this[O])&&C.getAll?T[this.ifds[O].name]=C.getAll():(E=this.tags[O])&&(T[E]=this.getText(E)));return T},L.getName=function(O){var C=this.tags[O];return typeof C=="object"?this.ifds[O].name:C},function(){var O,C,E,T=L.tags;for(O in T)if(Object.prototype.hasOwnProperty.call(T,O))if(C=L.ifds[O])for(O in E=T[O])Object.prototype.hasOwnProperty.call(E,O)&&(C.map[E[O]]=Number(O));else L.map[T[O]]=Number(O)}()})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},677:(c,h,f)=>{var v,y,k;(function(D){y=[f(302),f(630)],(k=typeof(v=function(I){function L(R){R&&(Object.defineProperty(this,"map",{value:this.ifds[R].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[R]||{}}))}L.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},L.prototype.ifds={ifd1:{name:"Thumbnail",map:L.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},L.prototype.get=function(R){return this[R]||this[this.map[R]]};var O={1:{getValue:function(R,x){return R.getUint8(x)},size:1},2:{getValue:function(R,x){return String.fromCharCode(R.getUint8(x))},size:1,ascii:!0},3:{getValue:function(R,x,M){return R.getUint16(x,M)},size:2},4:{getValue:function(R,x,M){return R.getUint32(x,M)},size:4},5:{getValue:function(R,x,M){return R.getUint32(x,M)/R.getUint32(x+4,M)},size:8},9:{getValue:function(R,x,M){return R.getInt32(x,M)},size:4},10:{getValue:function(R,x,M){return R.getInt32(x,M)/R.getInt32(x+4,M)},size:8}};function C(R,x,M,A,$,K){var V,B,U,P,Q,z,H=O[A];if(H){if(!((B=(V=H.size*$)>4?x+R.getUint32(M+8,K):M+8)+V>R.byteLength)){if($===1)return H.getValue(R,B,K);for(U=[],P=0;P<$;P+=1)U[P]=H.getValue(R,B+P*H.size,K);if(H.ascii){for(Q="",P=0;P<U.length&&(z=U[P])!=="\0";P+=1)Q+=z;return Q}return U}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function E(R,x,M){return(!R||R[M])&&(!x||x[M]!==!0)}function T(R,x,M,A,$,K,V,B){var U,P,Q,z,H,X;if(M+6>R.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((P=M+2+12*(U=R.getUint16(M,A)))+4>R.byteLength)){for(Q=0;Q<U;Q+=1)z=M+2+12*Q,E(V,B,H=R.getUint16(z,A))&&(X=C(R,x,z,R.getUint16(z+2,A),R.getUint32(z+4,A),A),$[H]=X,K&&(K[H]=z));return R.getUint32(P,A)}console.log("Invalid Exif data: Invalid directory size.")}}O[7]=O[1],I.parseExifData=function(R,x,M,A,$){if(!$.disableExif){var K,V,B,U=$.includeExifTags,P=$.excludeExifTags||{34665:{37500:!0}},Q=x+10;if(R.getUint32(x+4)===1165519206)if(Q+8>R.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(R.getUint16(x+8)===0){switch(R.getUint16(Q)){case 18761:K=!0;break;case 19789:K=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}R.getUint16(Q+2,K)===42?(V=R.getUint32(Q+4,K),A.exif=new L,$.disableExifOffsets||(A.exifOffsets=new L,A.exifTiffOffset=Q,A.exifLittleEndian=K),(V=T(R,Q,Q+V,K,A.exif,A.exifOffsets,U,P))&&E(U,P,"ifd1")&&(A.exif.ifd1=V,A.exifOffsets&&(A.exifOffsets.ifd1=Q+V)),Object.keys(A.exif.ifds).forEach(function(z){(function(H,X,F,G,J,te,ae){var oe=H.exif[X];oe&&(H.exif[X]=new L(X),H.exifOffsets&&(H.exifOffsets[X]=new L(X)),T(F,G,G+oe,J,H.exif[X],H.exifOffsets&&H.exifOffsets[X],te&&te[X],ae&&ae[X]))})(A,z,R,Q,K,U,P)}),(B=A.exif.ifd1)&&B[513]&&(B[513]=function(z,H,X){if(X){if(!(H+X>z.byteLength))return new Blob([I.bufferSlice.call(z.buffer,H,H+X)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(R,Q+B[513],B[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},I.metaDataParsers.jpeg[65505].push(I.parseExifData),I.exifWriters={274:function(R,x,M){var A=x.exifOffsets[274];return A&&new DataView(R,A+8,2).setUint16(0,M,x.exifLittleEndian),R}},I.writeExifData=function(R,x,M,A){return I.exifWriters[x.exif.map[M]](R,x,A)},I.ExifMap=L})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},16:(c,h,f)=>{var v,y,k;(function(D){y=[f(302)],(k=typeof(v=function(I){var L=I.global;L.fetch&&L.Request&&L.Response&&L.Response.prototype.blob?I.fetchBlob=function(O,C,E){function T(R){return R.blob()}if(L.Promise&&typeof C!="function")return fetch(new Request(O,C)).then(T);fetch(new Request(O,E)).then(T).then(C).catch(function(R){C(null,R)})}:L.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(I.fetchBlob=function(O,C,E){function T(R,x){E=E||{};var M=new XMLHttpRequest;M.open(E.method||"GET",O),E.headers&&Object.keys(E.headers).forEach(function(A){M.setRequestHeader(A,E.headers[A])}),M.withCredentials=E.credentials==="include",M.responseType="blob",M.onload=function(){R(M.response)},M.onerror=M.onabort=M.ontimeout=function(A){R===x?x(null,A):x(A)},M.send(E.body)}return L.Promise&&typeof C!="function"?(E=C,new Promise(T)):T(C,C)})})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},140:(c,h,f)=>{var v,y,k;(function(D){y=[f(302),f(166)],(k=typeof(v=function(I){var L=I.IptcMap.prototype;L.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},L.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},L.getText=function(O){var C=this.get(O),E=this.map[O],T=this.stringValues[E];return T?T[C]:String(C)},L.getAll=function(){var O,C,E={};for(O in this)Object.prototype.hasOwnProperty.call(this,O)&&(C=this.tags[O])&&(E[C]=this.getText(C));return E},L.getName=function(O){return this.tags[O]},function(){var O,C=L.tags,E=L.map||{};for(O in C)Object.prototype.hasOwnProperty.call(C,O)&&(E[C[O]]=Number(O))}()})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},166:(c,h,f)=>{var v,y,k;(function(D){y=[f(302),f(630)],(k=typeof(v=function(I){function L(){}function O(x,M,A,$,K){return M.types[x]==="binary"?new Blob([A.buffer.slice($,$+K)]):M.types[x]==="Uint16"?A.getUint16($):function(V,B,U){for(var P="",Q=B+U,z=B;z<Q;z+=1)P+=String.fromCharCode(V.getUint8(z));return P}(A,$,K)}function C(x,M){return x===void 0?M:x instanceof Array?(x.push(M),x):[x,M]}function E(x,M,A,$,K,V){for(var B,U,P,Q=M+A,z=M;z<Q;)x.getUint8(z)===28&&x.getUint8(z+1)===2&&(P=x.getUint8(z+2),K&&!K[P]||V&&V[P]||(U=x.getInt16(z+3),B=O(P,$.iptc,x,z+5,U),$.iptc[P]=C($.iptc[P],B),$.iptcOffsets&&($.iptcOffsets[P]=z))),z+=1}function T(x,M){return x.getUint32(M)===943868237&&x.getUint16(M+4)===1028}function R(x,M){var A=x.getUint8(M+7);return A%2!=0&&(A+=1),A===0&&(A=4),A}L.prototype.map={ObjectName:5},L.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},L.prototype.get=function(x){return this[x]||this[this.map[x]]},I.parseIptcData=function(x,M,A,$,K){if(!K.disableIptc)for(var V=M+A;M+8<V;){if(T(x,M)){var B=R(x,M),U=M+8+B;if(U>V){console.log("Invalid IPTC data: Invalid segment offset.");break}var P=x.getUint16(M+6+B);if(M+P>V){console.log("Invalid IPTC data: Invalid segment size.");break}return $.iptc=new L,K.disableIptcOffsets||($.iptcOffsets=new L),void E(x,U,P,$,K.includeIptcTags,K.excludeIptcTags||{202:!0})}M+=1}},I.metaDataParsers.jpeg[65517].push(I.parseIptcData),I.IptcMap=L})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},630:(c,h,f)=>{var v,y,k;(function(D){y=[f(302)],(k=typeof(v=function(I){var L=I.global,O=I.transform,C=L.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),E=L.ArrayBuffer&&ArrayBuffer.prototype.slice||function(M,A){A=A||this.byteLength-M;var $=new Uint8Array(this,M,A),K=new Uint8Array(A);return K.set($),K.buffer},T={jpeg:{65505:[],65517:[]}};function R(M,A,$,K){var V=this;function B(U,P){if(!(L.DataView&&C&&M&&M.size>=12&&M.type==="image/jpeg"))return U(K);var Q=$.maxMetaDataSize||262144;I.readFile(C.call(M,0,Q),function(z){var H=new DataView(z);if(H.getUint16(0)!==65496)return P(new Error("Invalid JPEG file: Missing JPEG marker."));for(var X,F,G,J,te=2,ae=H.byteLength-4,oe=te;te<ae&&((X=H.getUint16(te))>=65504&&X<=65519||X===65534);){if(te+(F=H.getUint16(te+2)+2)>H.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((G=T.jpeg[X])&&!$.disableMetaDataParsers)for(J=0;J<G.length;J+=1)G[J].call(V,H,te,F,K,$);oe=te+=F}!$.disableImageHead&&oe>6&&(K.imageHead=E.call(z,0,oe)),U(K)},P,"readAsArrayBuffer")||U(K)}return $=$||{},L.Promise&&typeof A!="function"?(K=$=A||{},new Promise(B)):(K=K||{},B(A,A))}function x(M,A,$){return M&&A&&$?new Blob([$,C.call(M,A.byteLength)],{type:"image/jpeg"}):null}I.transform=function(M,A,$,K,V){I.requiresMetaData(A)?R(K,function(B){B!==V&&(L.console&&console.log(B),B=V),O.call(I,M,A,$,K,B)},A,V=V||{}):O.apply(I,arguments)},I.blobSlice=C,I.bufferSlice=E,I.replaceHead=function(M,A,$){var K={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!$&&L.Promise)return R(M,K).then(function(V){return x(M,V.imageHead,A)});R(M,function(V){$(x(M,V.imageHead,A))},K)},I.parseMetaData=R,I.metaDataParsers=T})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},922:(c,h,f)=>{var v,y,k;(function(D){y=[f(302),f(200),f(630)],(k=typeof(v=function(I){var L=I.transform,O=I.requiresCanvas,C=I.requiresMetaData,E=I.transformCoordinates,T=I.getTransformedOptions;function R(A,$){var K=A&&A.orientation;return K===!0&&!I.orientation||K===1&&I.orientation||(!$||I.orientation)&&K>1&&K<9}function x(A,$){return A!==$&&(A===1&&$>1&&$<9||A>1&&A<9)}function M(A,$){if($>1&&$<9)switch(A){case 2:case 4:return $>4;case 5:case 7:return $%2==0;case 6:case 8:return $===2||$===4||$===5||$===7}return!1}(function(A){if(A.global.document){var $=document.createElement("img");$.onload=function(){if(A.orientation=$.width===2&&$.height===3,A.orientation){var K=A.createCanvas(1,1,!0).getContext("2d");K.drawImage($,1,1,1,1,0,0,1,1),A.orientationCropBug=K.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},$.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="}})(I),I.requiresCanvas=function(A){return R(A)||O.call(I,A)},I.requiresMetaData=function(A){return R(A,!0)||C.call(I,A)},I.transform=function(A,$,K,V,B){L.call(I,A,$,function(U,P){if(P){var Q=I.orientation&&P.exif&&P.exif.get("Orientation");if(Q>4&&Q<9){var z=P.originalWidth,H=P.originalHeight;P.originalWidth=H,P.originalHeight=z}}K(U,P)},V,B)},I.getTransformedOptions=function(A,$,K){var V=T.call(I,A,$),B=K.exif&&K.exif.get("Orientation"),U=V.orientation,P=I.orientation&&B;if(U===!0&&(U=B),!x(U,P))return V;var Q=V.top,z=V.right,H=V.bottom,X=V.left,F={};for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(F[G]=V[G]);if(F.orientation=U,(U>4&&!(P>4)||U<5&&P>4)&&(F.maxWidth=V.maxHeight,F.maxHeight=V.maxWidth,F.minWidth=V.minHeight,F.minHeight=V.minWidth,F.sourceWidth=V.sourceHeight,F.sourceHeight=V.sourceWidth),P>1){switch(P){case 2:z=V.left,X=V.right;break;case 3:Q=V.bottom,z=V.left,H=V.top,X=V.right;break;case 4:Q=V.bottom,H=V.top;break;case 5:Q=V.left,z=V.bottom,H=V.right,X=V.top;break;case 6:Q=V.left,z=V.top,H=V.right,X=V.bottom;break;case 7:Q=V.right,z=V.top,H=V.left,X=V.bottom;break;case 8:Q=V.right,z=V.bottom,H=V.left,X=V.top}if(M(U,P)){var J=Q,te=z;Q=H,z=X,H=J,X=te}}switch(F.top=Q,F.right=z,F.bottom=H,F.left=X,U){case 2:F.right=X,F.left=z;break;case 3:F.top=H,F.right=X,F.bottom=Q,F.left=z;break;case 4:F.top=H,F.bottom=Q;break;case 5:F.top=X,F.right=H,F.bottom=z,F.left=Q;break;case 6:F.top=z,F.right=H,F.bottom=X,F.left=Q;break;case 7:F.top=z,F.right=Q,F.bottom=X,F.left=H;break;case 8:F.top=X,F.right=Q,F.bottom=z,F.left=H}return F},I.transformCoordinates=function(A,$,K){E.call(I,A,$,K);var V=$.orientation,B=I.orientation&&K.exif&&K.exif.get("Orientation");if(x(V,B)){var U=A.getContext("2d"),P=A.width,Q=A.height,z=P,H=Q;switch((V>4&&!(B>4)||V<5&&B>4)&&(A.width=Q,A.height=P),V>4&&(z=Q,H=P),B){case 2:U.translate(z,0),U.scale(-1,1);break;case 3:U.translate(z,H),U.rotate(Math.PI);break;case 4:U.translate(0,H),U.scale(1,-1);break;case 5:U.rotate(-.5*Math.PI),U.scale(-1,1);break;case 6:U.rotate(-.5*Math.PI),U.translate(-z,0);break;case 7:U.rotate(-.5*Math.PI),U.translate(-z,H),U.scale(1,-1);break;case 8:U.rotate(.5*Math.PI),U.translate(0,-H)}switch(M(V,B)&&(U.translate(z,H),U.rotate(Math.PI)),V){case 2:U.translate(P,0),U.scale(-1,1);break;case 3:U.translate(P,Q),U.rotate(Math.PI);break;case 4:U.translate(0,Q),U.scale(1,-1);break;case 5:U.rotate(.5*Math.PI),U.scale(1,-1);break;case 6:U.rotate(.5*Math.PI),U.translate(0,-Q);break;case 7:U.rotate(.5*Math.PI),U.translate(P,-Q),U.scale(-1,1);break;case 8:U.rotate(-.5*Math.PI),U.translate(-P,0)}}}})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},200:(c,h,f)=>{var v,y,k;(function(D){y=[f(302)],(k=typeof(v=function(I){var L=I.transform;I.createCanvas=function(O,C,E){if(E&&I.global.OffscreenCanvas)return new OffscreenCanvas(O,C);var T=document.createElement("canvas");return T.width=O,T.height=C,T},I.transform=function(O,C,E,T,R){L.call(I,I.scale(O,C,R),C,E,T,R)},I.transformCoordinates=function(){},I.getTransformedOptions=function(O,C){var E,T,R,x,M=C.aspectRatio;if(!M)return C;for(T in E={},C)Object.prototype.hasOwnProperty.call(C,T)&&(E[T]=C[T]);return E.crop=!0,(R=O.naturalWidth||O.width)/(x=O.naturalHeight||O.height)>M?(E.maxWidth=x*M,E.maxHeight=x):(E.maxWidth=R,E.maxHeight=R/M),E},I.drawImage=function(O,C,E,T,R,x,M,A,$){var K=C.getContext("2d");return $.imageSmoothingEnabled===!1?(K.msImageSmoothingEnabled=!1,K.imageSmoothingEnabled=!1):$.imageSmoothingQuality&&(K.imageSmoothingQuality=$.imageSmoothingQuality),K.drawImage(O,E,T,R,x,0,0,M,A),K},I.requiresCanvas=function(O){return O.canvas||O.crop||!!O.aspectRatio},I.scale=function(O,C,E){C=C||{},E=E||{};var T,R,x,M,A,$,K,V,B,U,P,Q,z=O.getContext||I.requiresCanvas(C)&&!!I.global.HTMLCanvasElement,H=O.naturalWidth||O.width,X=O.naturalHeight||O.height,F=H,G=X;function J(){var ae=Math.max((x||F)/F,(M||G)/G);ae>1&&(F*=ae,G*=ae)}function te(){var ae=Math.min((T||F)/F,(R||G)/G);ae<1&&(F*=ae,G*=ae)}if(z&&(K=(C=I.getTransformedOptions(O,C,E)).left||0,V=C.top||0,C.sourceWidth?(A=C.sourceWidth,C.right!==void 0&&C.left===void 0&&(K=H-A-C.right)):A=H-K-(C.right||0),C.sourceHeight?($=C.sourceHeight,C.bottom!==void 0&&C.top===void 0&&(V=X-$-C.bottom)):$=X-V-(C.bottom||0),F=A,G=$),T=C.maxWidth,R=C.maxHeight,x=C.minWidth,M=C.minHeight,z&&T&&R&&C.crop?(F=T,G=R,(P=A/$-T/R)<0?($=R*A/T,C.top===void 0&&C.bottom===void 0&&(V=(X-$)/2)):P>0&&(A=T*$/R,C.left===void 0&&C.right===void 0&&(K=(H-A)/2))):((C.contain||C.cover)&&(x=T=T||x,M=R=R||M),C.cover?(te(),J()):(J(),te())),z){if((B=C.pixelRatio)>1&&(!O.style.width||Math.floor(parseFloat(O.style.width,10))!==Math.floor(H/B))&&(F*=B,G*=B),I.orientationCropBug&&!O.getContext&&(K||V||A!==H||$!==X)&&(P=O,O=I.createCanvas(H,X,!0),I.drawImage(P,O,0,0,H,X,H,X,C)),(U=C.downsamplingRatio)>0&&U<1&&F<A&&G<$)for(;A*U>F;)Q=I.createCanvas(A*U,$*U,!0),I.drawImage(O,Q,K,V,A,$,Q.width,Q.height,C),K=0,V=0,A=Q.width,$=Q.height,O=Q;return Q=I.createCanvas(F,G),I.transformCoordinates(Q,C,E),B>1&&(Q.style.width=Q.width/B+"px"),I.drawImage(O,Q,K,V,A,$,F,G,C).setTransform(1,0,0,1,0,0),Q}return O.width=F,O.height=G,O}})=="function"?v.apply(h,y):v)===void 0||(c.exports=k)})()},302:function(c,h,f){var v;(function(y){var k=y.URL||y.webkitURL;function D(T){return!!k&&k.createObjectURL(T)}function I(T){return!!k&&k.revokeObjectURL(T)}function L(T,R){!T||T.slice(0,5)!=="blob:"||R&&R.noRevoke||I(T)}function O(T,R,x,M){if(!y.FileReader)return!1;var A=new FileReader;A.onload=function(){R.call(A,this.result)},x&&(A.onabort=A.onerror=function(){x.call(A,this.error)});var $=A[M||"readAsDataURL"];return $?($.call(A,T),A):void 0}function C(T,R){return Object.prototype.toString.call(R)==="[object "+T+"]"}function E(T,R,x){function M(A,$){var K,V=document.createElement("img");function B(P,Q){A!==$?P instanceof Error?$(P):((Q=Q||{}).image=P,A(Q)):A&&A(P,Q)}function U(P,Q){Q&&y.console&&console.log(Q),P&&C("Blob",P)?K=D(T=P):(K=T,x&&x.crossOrigin&&(V.crossOrigin=x.crossOrigin)),V.src=K}return V.onerror=function(P){L(K,x),$&&$.call(V,P)},V.onload=function(){L(K,x);var P={originalWidth:V.naturalWidth||V.width,originalHeight:V.naturalHeight||V.height};try{E.transform(V,x,B,T,P)}catch(Q){$&&$(Q)}},typeof T=="string"?(E.requiresMetaData(x)?E.fetchBlob(T,U,x):U(),V):C("Blob",T)||C("File",T)?(K=D(T))?(V.src=K,V):O(T,function(P){V.src=P},$):void 0}return y.Promise&&typeof R!="function"?(x=R,new Promise(M)):M(R,R)}E.requiresMetaData=function(T){return T&&T.meta},E.fetchBlob=function(T,R){R()},E.transform=function(T,R,x,M,A){x(T,A)},E.global=y,E.readFile=O,E.isInstanceOf=C,E.createObjectURL=D,E.revokeObjectURL=I,(v=(function(){return E}).call(h,f,h,c))===void 0||(c.exports=v)})(typeof window<"u"&&window||this)},918:function(c,h){var f;(function(){var v=function(B){return B instanceof v?B:this instanceof v?void(this.EXIFwrapped=B):new v(B)};c.exports&&(h=c.exports=v),h.EXIF=v;var y=v.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},k=v.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},D=v.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},I=v.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},L=v.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function O(B){return!!B.exifdata}function C(B,U){function P(H){var X=E(H);B.exifdata=X||{};var F=function(J){var te=new DataView(J);if(te.getUint8(0)!=255||te.getUint8(1)!=216)return!1;for(var ae=2,oe=J.byteLength,Se=function(Ee,Pe){return Ee.getUint8(Pe)===56&&Ee.getUint8(Pe+1)===66&&Ee.getUint8(Pe+2)===73&&Ee.getUint8(Pe+3)===77&&Ee.getUint8(Pe+4)===4&&Ee.getUint8(Pe+5)===4};ae<oe;){if(Se(te,ae)){var xe=te.getUint8(ae+7);return xe%2!=0&&(xe+=1),xe===0&&(xe=4),R(J,ae+8+xe,te.getUint16(ae+6+xe))}ae++}}(H);if(B.iptcdata=F||{},v.isXmpEnabled){var G=function(J){if("DOMParser"in self){var te=new DataView(J);if(te.getUint8(0)!=255||te.getUint8(1)!=216)return!1;for(var ae=2,oe=J.byteLength,Se=new DOMParser;ae<oe-4;){if(A(te,ae,4)=="http"){var xe=ae-1,Ee=te.getUint16(ae-2)-1,Pe=A(te,xe,Ee),st=Pe.indexOf("xmpmeta>")+8,xt=(Pe=Pe.substring(Pe.indexOf("<x:xmpmeta"),st)).indexOf("x:xmpmeta")+10;return Pe=Pe.slice(0,xt)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+Pe.slice(xt),V(Se.parseFromString(Pe,"text/xml"))}ae++}}}(H);B.xmpdata=G||{}}U&&U.call(B)}if(B.src)if(/^data\:/i.test(B.src))P(function(H,X){X=X||H.match(/^data\:([^\;]+)\;base64,/im)[1]||"",H=H.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var F=atob(H),G=F.length,J=new ArrayBuffer(G),te=new Uint8Array(J),ae=0;ae<G;ae++)te[ae]=F.charCodeAt(ae);return J}(B.src));else if(/^blob\:/i.test(B.src))(z=new FileReader).onload=function(H){P(H.target.result)},function(H,X){var F=new XMLHttpRequest;F.open("GET",H,!0),F.responseType="blob",F.onload=function(G){var J;this.status!=200&&this.status!==0||(J=this.response,z.readAsArrayBuffer(J))},F.send()}(B.src);else{var Q=new XMLHttpRequest;Q.onload=function(){if(this.status!=200&&this.status!==0)throw"Could not load image";P(Q.response),Q=null},Q.open("GET",B.src,!0),Q.responseType="arraybuffer",Q.send(null)}else if(self.FileReader&&(B instanceof self.Blob||B instanceof self.File)){var z;(z=new FileReader).onload=function(H){P(H.target.result)},z.readAsArrayBuffer(B)}}function E(B){var U=new DataView(B);if(U.getUint8(0)!=255||U.getUint8(1)!=216)return!1;for(var P=2,Q=B.byteLength;P<Q;){if(U.getUint8(P)!=255)return!1;if(U.getUint8(P+1)==225)return $(U,P+4,U.getUint16(P+2));P+=2+U.getUint16(P+2)}}var T={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function R(B,U,P){for(var Q,z,H,X,F=new DataView(B),G={},J=U;J<U+P;)F.getUint8(J)===28&&F.getUint8(J+1)===2&&(X=F.getUint8(J+2))in T&&(H=F.getInt16(J+3),z=T[X],Q=A(F,J+5,H),G.hasOwnProperty(z)?G[z]instanceof Array?G[z].push(Q):G[z]=[G[z],Q]:G[z]=Q),J++;return G}function x(B,U,P,Q,z){var H,X,F=B.getUint16(P,!z),G={};for(X=0;X<F;X++)H=P+12*X+2,G[Q[B.getUint16(H,!z)]]=M(B,H,U,0,z);return G}function M(B,U,P,Q,z){var H,X,F,G,J,te,ae=B.getUint16(U+2,!z),oe=B.getUint32(U+4,!z),Se=B.getUint32(U+8,!z)+P;switch(ae){case 1:case 7:if(oe==1)return B.getUint8(U+8,!z);for(H=oe>4?Se:U+8,X=[],G=0;G<oe;G++)X[G]=B.getUint8(H+G);return X;case 2:return A(B,H=oe>4?Se:U+8,oe-1);case 3:if(oe==1)return B.getUint16(U+8,!z);for(H=oe>2?Se:U+8,X=[],G=0;G<oe;G++)X[G]=B.getUint16(H+2*G,!z);return X;case 4:if(oe==1)return B.getUint32(U+8,!z);for(X=[],G=0;G<oe;G++)X[G]=B.getUint32(Se+4*G,!z);return X;case 5:if(oe==1)return J=B.getUint32(Se,!z),te=B.getUint32(Se+4,!z),(F=new Number(J/te)).numerator=J,F.denominator=te,F;for(X=[],G=0;G<oe;G++)J=B.getUint32(Se+8*G,!z),te=B.getUint32(Se+4+8*G,!z),X[G]=new Number(J/te),X[G].numerator=J,X[G].denominator=te;return X;case 9:if(oe==1)return B.getInt32(U+8,!z);for(X=[],G=0;G<oe;G++)X[G]=B.getInt32(Se+4*G,!z);return X;case 10:if(oe==1)return B.getInt32(Se,!z)/B.getInt32(Se+4,!z);for(X=[],G=0;G<oe;G++)X[G]=B.getInt32(Se+8*G,!z)/B.getInt32(Se+4+8*G,!z);return X}}function A(B,U,P){var Q="";for(n=U;n<U+P;n++)Q+=String.fromCharCode(B.getUint8(n));return Q}function $(B,U){if(A(B,U,4)!="Exif")return!1;var P,Q,z,H,X,F=U+6;if(B.getUint16(F)==18761)P=!1;else{if(B.getUint16(F)!=19789)return!1;P=!0}if(B.getUint16(F+2,!P)!=42)return!1;var G=B.getUint32(F+4,!P);if(G<8)return!1;if((Q=x(B,F,F+G,k,P)).ExifIFDPointer)for(z in H=x(B,F,F+Q.ExifIFDPointer,y,P)){switch(z){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":H[z]=L[z][H[z]];break;case"ExifVersion":case"FlashpixVersion":H[z]=String.fromCharCode(H[z][0],H[z][1],H[z][2],H[z][3]);break;case"ComponentsConfiguration":H[z]=L.Components[H[z][0]]+L.Components[H[z][1]]+L.Components[H[z][2]]+L.Components[H[z][3]]}Q[z]=H[z]}if(Q.GPSInfoIFDPointer)for(z in X=x(B,F,F+Q.GPSInfoIFDPointer,D,P)){switch(z){case"GPSVersionID":X[z]=X[z][0]+"."+X[z][1]+"."+X[z][2]+"."+X[z][3]}Q[z]=X[z]}return Q.thumbnail=function(J,te,ae,oe){var Se=function(st,xt,$n){var tn=st.getUint16(xt,!$n);return st.getUint32(xt+2+12*tn,!$n)}(J,te+ae,oe);if(!Se)return{};if(Se>J.byteLength)return{};var xe=x(J,te,te+Se,I,oe);if(xe.Compression)switch(xe.Compression){case 6:if(xe.JpegIFOffset&&xe.JpegIFByteCount){var Ee=te+xe.JpegIFOffset,Pe=xe.JpegIFByteCount;xe.blob=new Blob([new Uint8Array(J.buffer,Ee,Pe)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",xe.Compression)}else xe.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return xe}(B,F,G,P),Q}function K(B){var U={};if(B.nodeType==1){if(B.attributes.length>0){U["@attributes"]={};for(var P=0;P<B.attributes.length;P++){var Q=B.attributes.item(P);U["@attributes"][Q.nodeName]=Q.nodeValue}}}else if(B.nodeType==3)return B.nodeValue;if(B.hasChildNodes())for(var z=0;z<B.childNodes.length;z++){var H=B.childNodes.item(z),X=H.nodeName;if(U[X]==null)U[X]=K(H);else{if(U[X].push==null){var F=U[X];U[X]=[],U[X].push(F)}U[X].push(K(H))}}return U}function V(B){try{var U={};if(B.children.length>0)for(var P=0;P<B.children.length;P++){var Q=B.children.item(P),z=Q.attributes;for(var H in z){var X=z[H],F=X.nodeName,G=X.nodeValue;F!==void 0&&(U[F]=G)}var J=Q.nodeName;if(U[J]===void 0)U[J]=K(Q);else{if(U[J].push===void 0){var te=U[J];U[J]=[],U[J].push(te)}U[J].push(K(Q))}}else U=B.textContent;return U}catch(ae){console.log(ae.message)}}v.enableXmp=function(){v.isXmpEnabled=!0},v.disableXmp=function(){v.isXmpEnabled=!1},v.getData=function(B,U){return!((self.Image&&B instanceof self.Image||self.HTMLImageElement&&B instanceof self.HTMLImageElement)&&!B.complete||(O(B)?U&&U.call(B):C(B,U),0))},v.getTag=function(B,U){if(O(B))return B.exifdata[U]},v.getIptcTag=function(B,U){if(O(B))return B.iptcdata[U]},v.getAllTags=function(B){if(!O(B))return{};var U,P=B.exifdata,Q={};for(U in P)P.hasOwnProperty(U)&&(Q[U]=P[U]);return Q},v.getAllIptcTags=function(B){if(!O(B))return{};var U,P=B.iptcdata,Q={};for(U in P)P.hasOwnProperty(U)&&(Q[U]=P[U]);return Q},v.pretty=function(B){if(!O(B))return"";var U,P=B.exifdata,Q="";for(U in P)P.hasOwnProperty(U)&&(typeof P[U]=="object"?P[U]instanceof Number?Q+=U+" : "+P[U]+" ["+P[U].numerator+"/"+P[U].denominator+`]\r
`:Q+=U+" : ["+P[U].length+` values]\r
`:Q+=U+" : "+P[U]+`\r
`);return Q},v.readFromBinaryFile=function(B){return E(B)},(f=(function(){return v}).apply(h,[]))===void 0||(c.exports=f)}).call(this)},297:c=>{c.exports=r}},s={};function o(c){if(s[c])return s[c].exports;var h=s[c]={exports:{}};return i[c].call(h.exports,h,h.exports,o),h.exports}o.n=c=>{var h=c&&c.__esModule?()=>c.default:()=>c;return o.d(h,{a:h}),h},o.d=(c,h)=>{for(var f in h)o.o(h,f)&&!o.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:h[f]})},o.o=(c,h)=>Object.prototype.hasOwnProperty.call(c,h),o.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var l={};return(()=>{o.r(l),o.d(l,{default:()=>nE});var c=o(297),h=o.n(c),f=Math.PI/180;const v=typeof gm<"u"?gm:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},y={_global:v,version:"8.3.5",isBrowser:typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]"),isUnminified:/param/.test((function(m){}).toString()),dblClickWindow:400,getAngle:m=>y.angleDeg?m*f:m,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>y.DD.isDragging,isDragReady:()=>!!y.DD.node,document:v.document,_injectGlobal(m){v.Konva=m}},k=m=>{y[m.prototype.getClassName()]=m};y._injectGlobal(y);class D{constructor(a=[1,0,0,1,0,0]){this.dirty=!1,this.m=a&&a.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new D(this.m)}copyInto(a){a.m[0]=this.m[0],a.m[1]=this.m[1],a.m[2]=this.m[2],a.m[3]=this.m[3],a.m[4]=this.m[4],a.m[5]=this.m[5]}point(a){var u=this.m;return{x:u[0]*a.x+u[2]*a.y+u[4],y:u[1]*a.x+u[3]*a.y+u[5]}}translate(a,u){return this.m[4]+=this.m[0]*a+this.m[2]*u,this.m[5]+=this.m[1]*a+this.m[3]*u,this}scale(a,u){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=u,this.m[3]*=u,this}rotate(a){var u=Math.cos(a),d=Math.sin(a),p=this.m[0]*u+this.m[2]*d,S=this.m[1]*u+this.m[3]*d,w=this.m[0]*-d+this.m[2]*u,_=this.m[1]*-d+this.m[3]*u;return this.m[0]=p,this.m[1]=S,this.m[2]=w,this.m[3]=_,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(a,u){var d=this.m[0]+this.m[2]*u,p=this.m[1]+this.m[3]*u,S=this.m[2]+this.m[0]*a,w=this.m[3]+this.m[1]*a;return this.m[0]=d,this.m[1]=p,this.m[2]=S,this.m[3]=w,this}multiply(a){var u=this.m[0]*a.m[0]+this.m[2]*a.m[1],d=this.m[1]*a.m[0]+this.m[3]*a.m[1],p=this.m[0]*a.m[2]+this.m[2]*a.m[3],S=this.m[1]*a.m[2]+this.m[3]*a.m[3],w=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],_=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=u,this.m[1]=d,this.m[2]=p,this.m[3]=S,this.m[4]=w,this.m[5]=_,this}invert(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),u=this.m[3]*a,d=-this.m[1]*a,p=-this.m[2]*a,S=this.m[0]*a,w=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),_=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=u,this.m[1]=d,this.m[2]=p,this.m[3]=S,this.m[4]=w,this.m[5]=_,this}getMatrix(){return this.m}setAbsolutePosition(a,u){var d=this.m[0],p=this.m[1],S=this.m[2],w=this.m[3],_=this.m[4],b=(d*(u-this.m[5])-p*(a-_))/(d*w-p*S),N=(a-_-S*b)/d;return this.translate(N,b)}decompose(){var a=this.m[0],u=this.m[1],d=this.m[2],p=this.m[3],S=a*p-u*d;let w={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(a!=0||u!=0){var _=Math.sqrt(a*a+u*u);w.rotation=u>0?Math.acos(a/_):-Math.acos(a/_),w.scaleX=_,w.scaleY=S/_,w.skewX=(a*d+u*p)/S,w.skewY=0}else if(d!=0||p!=0){var b=Math.sqrt(d*d+p*p);w.rotation=Math.PI/2-(p>0?Math.acos(-d/b):-Math.acos(d/b)),w.scaleX=S/b,w.scaleY=b,w.skewX=0,w.skewY=(a*d+u*p)/S}return w.rotation=x._getRotation(w.rotation),w}}var I=Math.PI/180,L=180/Math.PI,O="Konva error: ",C={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},E=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,T=[];const R=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)},x={_isElement:m=>!(!m||m.nodeType!=1),_isFunction:m=>!!(m&&m.constructor&&m.call&&m.apply),_isPlainObject:m=>!!m&&m.constructor===Object,_isArray:m=>Object.prototype.toString.call(m)==="[object Array]",_isNumber:m=>Object.prototype.toString.call(m)==="[object Number]"&&!isNaN(m)&&isFinite(m),_isString:m=>Object.prototype.toString.call(m)==="[object String]",_isBoolean:m=>Object.prototype.toString.call(m)==="[object Boolean]",isObject:m=>m instanceof Object,isValidSelector(m){if(typeof m!="string")return!1;var a=m[0];return a==="#"||a==="."||a===a.toUpperCase()},_sign:m=>m===0||m>0?1:-1,requestAnimFrame(m){T.push(m),T.length===1&&R(function(){const a=T;T=[],a.forEach(function(u){u()})})},createCanvasElement(){var m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement:()=>document.createElement("img"),_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,a){var u=x.createImageElement();u.onload=function(){a(u)},u.src=m},_rgbToHex:(m,a,u)=>((1<<24)+(m<<16)+(a<<8)+u).toString(16).slice(1),_hexToRgb(m){m=m.replace("#","");var a=parseInt(m,16);return{r:a>>16&255,g:a>>8&255,b:255&a}},getRandomColor(){for(var m=(16777215*Math.random()<<0).toString(16);m.length<6;)m="0"+m;return"#"+m},getRGB(m){var a;return m in C?{r:(a=C[m])[0],g:a[1],b:a[2]}:m[0]==="#"?this._hexToRgb(m.substring(1)):m.substr(0,4)==="rgb("?(a=E.exec(m.replace(/ /g,"")),{r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10)}):{r:0,g:0,b:0}},colorToRGBA:m=>(m=m||"black",x._namedColorToRBA(m)||x._hex3ColorToRGBA(m)||x._hex6ColorToRGBA(m)||x._rgbColorToRGBA(m)||x._rgbaColorToRGBA(m)||x._hslColorToRGBA(m)),_namedColorToRBA(m){var a=C[m.toLowerCase()];return a?{r:a[0],g:a[1],b:a[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){var a=(m=m.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:a[0],g:a[1],b:a[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){var a=(m=m.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((u,d)=>u.slice(-1)==="%"?d===3?parseInt(u)/100:parseInt(u)/100*255:Number(u));return{r:a[0],g:a[1],b:a[2],a:a[3]}}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[a,...u]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),d=Number(u[0])/360,p=Number(u[1])/100,S=Number(u[2])/100;let w,_,b;if(p===0)return b=255*S,{r:Math.round(b),g:Math.round(b),b:Math.round(b),a:1};w=S<.5?S*(1+p):S+p-S*p;const N=2*S-w,j=[0,0,0];for(let q=0;q<3;q++)_=d+1/3*-(q-1),_<0&&_++,_>1&&_--,b=6*_<1?N+6*(w-N)*_:2*_<1?w:3*_<2?N+(w-N)*(2/3-_)*6:N,j[q]=255*b;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection:(m,a)=>!(a.x>m.x+m.width||a.x+a.width<m.x||a.y>m.y+m.height||a.y+a.height<m.y),cloneObject(m){var a={};for(var u in m)this._isPlainObject(m[u])?a[u]=this.cloneObject(m[u]):this._isArray(m[u])?a[u]=this.cloneArray(m[u]):a[u]=m[u];return a},cloneArray:m=>m.slice(0),degToRad:m=>m*I,radToDeg:m=>m*L,_degToRad:m=>(x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(m)),_radToDeg:m=>(x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(m)),_getRotation:m=>y.angleDeg?x.radToDeg(m):m,_capitalize:m=>m.charAt(0).toUpperCase()+m.slice(1),throw(m){throw new Error(O+m)},error(m){console.error(O+m)},warn(m){y.showWarnings&&console.warn("Konva warning: "+m)},each(m,a){for(var u in m)a(u,m[u])},_inRange:(m,a,u)=>a<=m&&m<u,_getProjectionToSegment(m,a,u,d,p,S){var w,_,b,N=(m-u)*(m-u)+(a-d)*(a-d);if(N==0)w=m,_=a,b=(p-u)*(p-u)+(S-d)*(S-d);else{var j=((p-m)*(u-m)+(S-a)*(d-a))/N;j<0?(w=m,_=a,b=(m-p)*(m-p)+(a-S)*(a-S)):j>1?(w=u,_=d,b=(u-p)*(u-p)+(d-S)*(d-S)):b=((w=m+j*(u-m))-p)*(w-p)+((_=a+j*(d-a))-S)*(_-S)}return[w,_,b]},_getProjectionToLine(m,a,u){var d=x.cloneObject(m),p=Number.MAX_VALUE;return a.forEach(function(S,w){if(u||w!==a.length-1){var _=a[(w+1)%a.length],b=x._getProjectionToSegment(S.x,S.y,_.x,_.y,m.x,m.y),N=b[0],j=b[1],q=b[2];q<p&&(d.x=N,d.y=j,p=q)}}),d},_prepareArrayForTween(m,a,u){var d,p=[],S=[];if(m.length>a.length){var w=a;a=m,m=w}for(d=0;d<m.length;d+=2)p.push({x:m[d],y:m[d+1]});for(d=0;d<a.length;d+=2)S.push({x:a[d],y:a[d+1]});var _=[];return S.forEach(function(b){var N=x._getProjectionToLine(b,p,u);_.push(N.x),_.push(N.y)}),_},_prepareToStringify(m){var a;for(var u in m.visitedByCircularReferenceRemoval=!0,m)if(m.hasOwnProperty(u)&&m[u]&&typeof m[u]=="object"){if(a=Object.getOwnPropertyDescriptor(m,u),m[u].visitedByCircularReferenceRemoval||x._isElement(m[u])){if(!a.configurable)return null;delete m[u]}else if(x._prepareToStringify(m[u])===null){if(!a.configurable)return null;delete m[u]}}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,a){for(var u in a)m[u]=a[u];return m},_getFirstPointerId:m=>m.touches?m.changedTouches[0].identifier:m.pointerId||999};function M(m){return x._isString(m)?'"'+m+'"':Object.prototype.toString.call(m)==="[object Number]"||x._isBoolean(m)?m:Object.prototype.toString.call(m)}function A(){if(y.isUnminified)return function(m,a){return x._isNumber(m)||x.warn(M(m)+' is a not valid value for "'+a+'" attribute. The value should be a number.'),m}}function $(){if(y.isUnminified)return function(m,a){return x._isString(m)||x.warn(M(m)+' is a not valid value for "'+a+'" attribute. The value should be a string.'),m}}function K(){if(y.isUnminified)return function(m,a){const u=x._isString(m),d=Object.prototype.toString.call(m)==="[object CanvasGradient]"||m&&m.addColorStop;return u||d||x.warn(M(m)+' is a not valid value for "'+a+'" attribute. The value should be a string or a native gradient.'),m}}function V(){if(y.isUnminified)return function(m,a){return m===!0||m===!1||x.warn(M(m)+' is a not valid value for "'+a+'" attribute. The value should be a boolean.'),m}}var B="get",U="set";const P={addGetterSetter(m,a,u,d,p){P.addGetter(m,a,u),P.addSetter(m,a,d,p),P.addOverloadedGetterSetter(m,a)},addGetter(m,a,u){var d=B+x._capitalize(a);m.prototype[d]=m.prototype[d]||function(){var p=this.attrs[a];return p===void 0?u:p}},addSetter(m,a,u,d){var p=U+x._capitalize(a);m.prototype[p]||P.overWriteSetter(m,a,u,d)},overWriteSetter(m,a,u,d){var p=U+x._capitalize(a);m.prototype[p]=function(S){return u&&S!=null&&(S=u.call(this,S,a)),this._setAttr(a,S),d&&d.call(this),this}},addComponentsGetterSetter(m,a,u,d,p){var S,w,_=u.length,b=x._capitalize,N=B+b(a),j=U+b(a);m.prototype[N]=function(){var Z={};for(S=0;S<_;S++)Z[w=u[S]]=this.getAttr(a+b(w));return Z};var q=function(Z){if(y.isUnminified)return function(ne,Y){return x.isObject(ne)||x.warn(M(ne)+' is a not valid value for "'+Y+'" attribute. The value should be an object with properties '+Z),ne}}(u);m.prototype[j]=function(Z){var ne,Y=this.attrs[a];for(ne in d&&(Z=d.call(this,Z)),q&&q.call(this,Z,a),Z)Z.hasOwnProperty(ne)&&this._setAttr(a+b(ne),Z[ne]);return this._fireChangeEvent(a,Y,Z),p&&p.call(this),this},P.addOverloadedGetterSetter(m,a)},addOverloadedGetterSetter(m,a){var u=x._capitalize(a),d=U+u,p=B+u;m.prototype[a]=function(){return arguments.length?(this[d](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(m,a,u,d){x.error("Adding deprecated "+a);var p=B+x._capitalize(a),S=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";m.prototype[p]=function(){x.error(S);var w=this.attrs[a];return w===void 0?u:w},P.addSetter(m,a,d,function(){x.error(S)}),P.addOverloadedGetterSetter(m,a)},backCompat(m,a){x.each(a,function(u,d){var p=m.prototype[d],S=B+x._capitalize(u),w=U+x._capitalize(u);function _(){p.apply(this,arguments),x.error('"'+u+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}m.prototype[u]=_,m.prototype[S]=_,m.prototype[w]=_})},afterSetFilter(){this._filterUpToDate=!1}};function Q(m){var a,u,d=[],p=m.length,S=x;for(a=0;a<p;a++)u=m[a],S._isNumber(u)?u=Math.round(1e3*u)/1e3:S._isString(u)||(u+=""),d.push(u);return d}var z,H=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class X{constructor(a){this.canvas=a,this._context=a._canvas.getContext("2d"),y.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(a){a.fillEnabled()&&this._fill(a)}_fill(a){}strokeShape(a){a.hasStroke()&&this._stroke(a)}_stroke(a){}fillStrokeShape(a){a.attrs.fillAfterStrokeEnabled?(this.strokeShape(a),this.fillShape(a)):(this.fillShape(a),this.strokeShape(a))}getTrace(a,u){var d,p,S,w,_=this.traceArr,b=_.length,N="";for(d=0;d<b;d++)(S=(p=_[d]).method)?(w=p.args,N+=S,a?N+="()":x._isArray(w[0])?N+="(["+w.join(",")+"])":(u&&(w=w.map(j=>typeof j=="number"?Math.floor(j):j)),N+="("+w.join(",")+")")):(N+=p.property,a||(N+="="+p.val)),N+=";";return N}clearTrace(){this.traceArr=[]}_trace(a){var u=this.traceArr;u.push(a),u.length>=100&&u.shift()}reset(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)}getCanvas(){return this.canvas}clear(a){var u=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,u.getWidth()/u.pixelRatio,u.getHeight()/u.pixelRatio)}_applyLineCap(a){var u=a.getLineCap();u&&this.setAttr("lineCap",u)}_applyOpacity(a){var u=a.getAbsoluteOpacity();u!==1&&this.setAttr("globalAlpha",u)}_applyLineJoin(a){var u=a.attrs.lineJoin;u&&this.setAttr("lineJoin",u)}setAttr(a,u){this._context[a]=u}arc(a,u,d,p,S,w){this._context.arc(a,u,d,p,S,w)}arcTo(a,u,d,p,S){this._context.arcTo(a,u,d,p,S)}beginPath(){this._context.beginPath()}bezierCurveTo(a,u,d,p,S,w){this._context.bezierCurveTo(a,u,d,p,S,w)}clearRect(a,u,d,p){this._context.clearRect(a,u,d,p)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(a,u){var d=arguments;return d.length===2?this._context.createImageData(a,u):d.length===1?this._context.createImageData(a):void 0}createLinearGradient(a,u,d,p){return this._context.createLinearGradient(a,u,d,p)}createPattern(a,u){return this._context.createPattern(a,u)}createRadialGradient(a,u,d,p,S,w){return this._context.createRadialGradient(a,u,d,p,S,w)}drawImage(a,u,d,p,S,w,_,b,N){var j=arguments,q=this._context;j.length===3?q.drawImage(a,u,d):j.length===5?q.drawImage(a,u,d,p,S):j.length===9&&q.drawImage(a,u,d,p,S,w,_,b,N)}ellipse(a,u,d,p,S,w,_,b){this._context.ellipse(a,u,d,p,S,w,_,b)}isPointInPath(a,u){return this._context.isPointInPath(a,u)}fill(a){a?this._context.fill(a):this._context.fill()}fillRect(a,u,d,p){this._context.fillRect(a,u,d,p)}strokeRect(a,u,d,p){this._context.strokeRect(a,u,d,p)}fillText(a,u,d,p){p?this._context.fillText(a,u,d,p):this._context.fillText(a,u,d)}measureText(a){return this._context.measureText(a)}getImageData(a,u,d,p){return this._context.getImageData(a,u,d,p)}lineTo(a,u){this._context.lineTo(a,u)}moveTo(a,u){this._context.moveTo(a,u)}rect(a,u,d,p){this._context.rect(a,u,d,p)}putImageData(a,u,d){this._context.putImageData(a,u,d)}quadraticCurveTo(a,u,d,p){this._context.quadraticCurveTo(a,u,d,p)}restore(){this._context.restore()}rotate(a){this._context.rotate(a)}save(){this._context.save()}scale(a,u){this._context.scale(a,u)}setLineDash(a){this._context.setLineDash?this._context.setLineDash(a):"mozDash"in this._context?this._context.mozDash=a:"webkitLineDash"in this._context&&(this._context.webkitLineDash=a)}getLineDash(){return this._context.getLineDash()}setTransform(a,u,d,p,S,w){this._context.setTransform(a,u,d,p,S,w)}stroke(a){a?this._context.stroke(a):this._context.stroke()}strokeText(a,u,d,p){this._context.strokeText(a,u,d,p)}transform(a,u,d,p,S,w){this._context.transform(a,u,d,p,S,w)}translate(a,u){this._context.translate(a,u)}_enableTrace(){var a,u,d=this,p=H.length,S=this.setAttr,w=function(_){var b,N=d[_];d[_]=function(){return u=Q(Array.prototype.slice.call(arguments,0)),b=N.apply(d,arguments),d._trace({method:_,args:u}),b}};for(a=0;a<p;a++)w(H[a]);d.setAttr=function(){S.apply(d,arguments);var _=arguments[0],b=arguments[1];_!=="shadowOffsetX"&&_!=="shadowOffsetY"&&_!=="shadowBlur"||(b/=this.canvas.getPixelRatio()),d._trace({property:_,val:b})}}_applyGlobalCompositeOperation(a){const u=a.attrs.globalCompositeOperation;!u||u==="source-over"||this.setAttr("globalCompositeOperation",u)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(m){Object.defineProperty(X.prototype,m,{get(){return this._context[m]},set(a){this._context[m]=a}})});class F extends X{_fillColor(a){var u=a.fill();this.setAttr("fillStyle",u),a._fillFunc(this)}_fillPattern(a){this.setAttr("fillStyle",a._getFillPattern()),a._fillFunc(this)}_fillLinearGradient(a){var u=a._getLinearGradient();u&&(this.setAttr("fillStyle",u),a._fillFunc(this))}_fillRadialGradient(a){var u=a._getRadialGradient();u&&(this.setAttr("fillStyle",u),a._fillFunc(this))}_fill(a){var u=a.fill(),d=a.getFillPriority();if(u&&d==="color")this._fillColor(a);else{var p=a.getFillPatternImage();if(p&&d==="pattern")this._fillPattern(a);else{var S=a.getFillLinearGradientColorStops();if(S&&d==="linear-gradient")this._fillLinearGradient(a);else{var w=a.getFillRadialGradientColorStops();w&&d==="radial-gradient"?this._fillRadialGradient(a):u?this._fillColor(a):p?this._fillPattern(a):S?this._fillLinearGradient(a):w&&this._fillRadialGradient(a)}}}}_strokeLinearGradient(a){var u=a.getStrokeLinearGradientStartPoint(),d=a.getStrokeLinearGradientEndPoint(),p=a.getStrokeLinearGradientColorStops(),S=this.createLinearGradient(u.x,u.y,d.x,d.y);if(p){for(var w=0;w<p.length;w+=2)S.addColorStop(p[w],p[w+1]);this.setAttr("strokeStyle",S)}}_stroke(a){var u=a.dash(),d=a.getStrokeScaleEnabled();if(a.hasStroke()){if(!d){this.save();var p=this.getCanvas().getPixelRatio();this.setTransform(p,0,0,p,0,0)}this._applyLineCap(a),u&&a.dashEnabled()&&(this.setLineDash(u),this.setAttr("lineDashOffset",a.dashOffset())),this.setAttr("lineWidth",a.strokeWidth()),a.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),a.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(a):this.setAttr("strokeStyle",a.stroke()),a._strokeFunc(this),d||this.restore()}}_applyShadow(a){var u,d,p,S=(u=a.getShadowRGBA())!==null&&u!==void 0?u:"black",w=(d=a.getShadowBlur())!==null&&d!==void 0?d:5,_=(p=a.getShadowOffset())!==null&&p!==void 0?p:{x:0,y:0},b=a.getAbsoluteScale(),N=this.canvas.getPixelRatio(),j=b.x*N,q=b.y*N;this.setAttr("shadowColor",S),this.setAttr("shadowBlur",w*Math.min(Math.abs(j),Math.abs(q))),this.setAttr("shadowOffsetX",_.x*j),this.setAttr("shadowOffsetY",_.y*q)}}class G extends X{_fill(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()}strokeShape(a){a.hasHitStroke()&&this._stroke(a)}_stroke(a){if(a.hasHitStroke()){var u=a.getStrokeScaleEnabled();if(!u){this.save();var d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(a);var p=a.hitStrokeWidth(),S=p==="auto"?a.strokeWidth():p;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this),u||this.restore()}}}class J{constructor(a){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var u=(a||{}).pixelRatio||y.pixelRatio||function(){if(z)return z;var d=x.createCanvasElement().getContext("2d");return z=(y._global.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)}();this.pixelRatio=u,this._canvas=x.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(a){var u=this.pixelRatio;this.pixelRatio=a,this.setSize(this.getWidth()/u,this.getHeight()/u)}setWidth(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px";var u=this.pixelRatio;this.getContext()._context.scale(u,u)}setHeight(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px";var u=this.pixelRatio;this.getContext()._context.scale(u,u)}getWidth(){return this.width}getHeight(){return this.height}setSize(a,u){this.setWidth(a||0),this.setHeight(u||0)}toDataURL(a,u){try{return this._canvas.toDataURL(a,u)}catch{try{return this._canvas.toDataURL()}catch(p){return x.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}P.addGetterSetter(J,"pixelRatio",void 0,A());class te extends J{constructor(a={width:0,height:0}){super(a),this.context=new F(this),this.setSize(a.width,a.height)}}class ae extends J{constructor(a={width:0,height:0}){super(a),this.hitCanvas=!0,this.context=new G(this),this.setSize(a.width,a.height)}}const oe={get isDragging(){var m=!1;return oe._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(m=!0)}),m},justDragged:!1,get node(){var m;return oe._dragElements.forEach(a=>{m=a.node}),m},_dragElements:new Map,_drag(m){const a=[];oe._dragElements.forEach((u,d)=>{const{node:p}=u,S=p.getStage();S.setPointersPositions(m),u.pointerId===void 0&&(u.pointerId=x._getFirstPointerId(m));const w=S._changedPointerPositions.find(b=>b.id===u.pointerId);if(w){if(u.dragStatus!=="dragging"){var _=p.dragDistance();if(Math.max(Math.abs(w.x-u.startPointerPos.x),Math.abs(w.y-u.startPointerPos.y))<_||(p.startDrag({evt:m}),!p.isDragging()))return}p._setDragPosition(m,u),a.push(p)}}),a.forEach(u=>{u.fire("dragmove",{type:"dragmove",target:u,evt:m},!0)})},_endDragBefore(m){oe._dragElements.forEach(a=>{const{node:u}=a,d=u.getStage();if(m&&d.setPointersPositions(m),!d._changedPointerPositions.find(S=>S.id===a.pointerId))return;a.dragStatus!=="dragging"&&a.dragStatus!=="stopped"||(oe.justDragged=!0,y._mouseListenClick=!1,y._touchListenClick=!1,y._pointerListenClick=!1,a.dragStatus="stopped");const p=a.node.getLayer()||a.node instanceof y.Stage&&a.node;p&&p.batchDraw()})},_endDragAfter(m){oe._dragElements.forEach((a,u)=>{a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:m},!0),a.dragStatus!=="dragging"&&oe._dragElements.delete(u)})}};y.isBrowser&&(window.addEventListener("mouseup",oe._endDragBefore,!0),window.addEventListener("touchend",oe._endDragBefore,!0),window.addEventListener("mousemove",oe._drag),window.addEventListener("touchmove",oe._drag),window.addEventListener("mouseup",oe._endDragAfter,!1),window.addEventListener("touchend",oe._endDragAfter,!1));var Se="absoluteOpacity",xe="allEventListeners",Ee="absoluteTransform",Pe="absoluteScale",st="canvas",xt="listening",$n="mouseenter",tn="mouseleave",Er="Shape",nr=" ",es="stage",hn="transform",li="visible",ui=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(nr);let ts=1;class de{constructor(a){this._id=ts++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(a),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(a){a!==hn&&a!==Ee||!this._cache.get(a)?a?this._cache.delete(a):this._cache.clear():this._cache.get(a).dirty=!0}_getCache(a,u){var d=this._cache.get(a);return(d===void 0||(a===hn||a===Ee)&&d.dirty===!0)&&(d=u.call(this),this._cache.set(a,d)),d}_calculate(a,u,d){if(!this._attachedDepsListeners.get(a)){const p=u.map(S=>S+"Change.konva").join(nr);this.on(p,()=>{this._clearCache(a)}),this._attachedDepsListeners.set(a,!0)}return this._getCache(a,d)}_getCanvasCache(){return this._cache.get(st)}_clearSelfAndDescendantCache(a){this._clearCache(a),a===Ee&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(st),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(a){var u=a||{},d={};u.x!==void 0&&u.y!==void 0&&u.width!==void 0&&u.height!==void 0||(d=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var p=Math.ceil(u.width||d.width),S=Math.ceil(u.height||d.height),w=u.pixelRatio,_=u.x===void 0?Math.floor(d.x):u.x,b=u.y===void 0?Math.floor(d.y):u.y,N=u.offset||0,j=u.drawBorder||!1,q=u.hitCanvasPixelRatio||1;if(p&&S){_-=N,b-=N;var Z=new te({pixelRatio:w,width:p+=2*N+1,height:S+=2*N+1}),ne=new te({pixelRatio:w,width:0,height:0}),Y=new ae({pixelRatio:q,width:p,height:S}),le=Z.getContext(),Ue=Y.getContext();return Y.isCache=!0,Z.isCache=!0,this._cache.delete(st),this._filterUpToDate=!1,u.imageSmoothingEnabled===!1&&(Z.getContext()._context.imageSmoothingEnabled=!1,ne.getContext()._context.imageSmoothingEnabled=!1),le.save(),Ue.save(),le.translate(-_,-b),Ue.translate(-_,-b),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Se),this._clearSelfAndDescendantCache(Pe),this.drawScene(Z,this),this.drawHit(Y,this),this._isUnderCache=!1,le.restore(),Ue.restore(),j&&(le.save(),le.beginPath(),le.rect(0,0,p,S),le.closePath(),le.setAttr("strokeStyle","red"),le.setAttr("lineWidth",5),le.stroke(),le.restore()),this._cache.set(st,{scene:Z,filter:ne,hit:Y,x:_,y:b}),this._requestDraw(),this}x.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(st)}getClientRect(a){throw new Error('abstract "getClientRect" method call')}_transformedRect(a,u){var d,p,S,w,_=[{x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height}],b=this.getAbsoluteTransform(u);return _.forEach(function(N){var j=b.point(N);d===void 0&&(d=S=j.x,p=w=j.y),d=Math.min(d,j.x),p=Math.min(p,j.y),S=Math.max(S,j.x),w=Math.max(w,j.y)}),{x:d,y:p,width:S-d,height:w-p}}_drawCachedSceneCanvas(a){a.save(),a._applyOpacity(this),a._applyGlobalCompositeOperation(this);const u=this._getCanvasCache();a.translate(u.x,u.y);var d=this._getCachedSceneCanvas(),p=d.pixelRatio;a.drawImage(d._canvas,0,0,d.width/p,d.height/p),a.restore()}_drawCachedHitCanvas(a){var u=this._getCanvasCache(),d=u.hit;a.save(),a.translate(u.x,u.y),a.drawImage(d._canvas,0,0,d.width/d.pixelRatio,d.height/d.pixelRatio),a.restore()}_getCachedSceneCanvas(){var a,u,d,p,S=this.filters(),w=this._getCanvasCache(),_=w.scene,b=w.filter,N=b.getContext();if(S){if(!this._filterUpToDate){var j=_.pixelRatio;b.setSize(_.width/_.pixelRatio,_.height/_.pixelRatio);try{for(a=S.length,N.clear(),N.drawImage(_._canvas,0,0,_.getWidth()/j,_.getHeight()/j),u=N.getImageData(0,0,b.getWidth(),b.getHeight()),d=0;d<a;d++)typeof(p=S[d])=="function"?(p.call(this,u),N.putImageData(u,0,0)):x.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters")}catch(q){x.error("Unable to apply filter. "+q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return b}return _}on(a,u){if(this._cache&&this._cache.delete(xe),arguments.length===3)return this._delegate.apply(this,arguments);var d,p,S,w,_=a.split(nr),b=_.length;for(d=0;d<b;d++)S=(p=_[d].split("."))[0],w=p[1]||"",this.eventListeners[S]||(this.eventListeners[S]=[]),this.eventListeners[S].push({name:w,handler:u});return this}off(a,u){var d,p,S,w,_,b=(a||"").split(nr),N=b.length;if(this._cache&&this._cache.delete(xe),!a)for(p in this.eventListeners)this._off(p);for(d=0;d<N;d++)if(w=(S=b[d].split("."))[0],_=S[1],w)this.eventListeners[w]&&this._off(w,_,u);else for(p in this.eventListeners)this._off(p,_,u);return this}dispatchEvent(a){var u={target:this,type:a.type,evt:a};return this.fire(a.type,u),this}addEventListener(a,u){return this.on(a,function(d){u.call(this,d.evt)}),this}removeEventListener(a){return this.off(a),this}_delegate(a,u,d){var p=this;this.on(a,function(S){for(var w=S.target.findAncestors(u,!0,p),_=0;_<w.length;_++)(S=x.cloneObject(S)).currentTarget=w[_],d.call(w[_],S)})}remove(){return this.isDragging()&&this.stopDrag(),oe._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ee),this._clearSelfAndDescendantCache(Se),this._clearSelfAndDescendantCache(Pe),this._clearSelfAndDescendantCache(es),this._clearSelfAndDescendantCache(li),this._clearSelfAndDescendantCache(xt)}_remove(){this._clearCaches();var a=this.getParent();a&&a.children&&(a.children.splice(this.index,1),a._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(a){var u="get"+x._capitalize(a);return x._isFunction(this[u])?this[u]():this.attrs[a]}getAncestors(){for(var a=this.getParent(),u=[];a;)u.push(a),a=a.getParent();return u}getAttrs(){return this.attrs||{}}setAttrs(a){return this._batchTransformChanges(()=>{var u,d;if(!a)return this;for(u in a)u!=="children"&&(d="set"+x._capitalize(u),x._isFunction(this[d])?this[d](a[u]):this._setAttr(u,a[u]))}),this}isListening(){return this._getCache(xt,this._isListening)}_isListening(a){if(!this.listening())return!1;const u=this.getParent();return!u||u===a||this===a||u._isListening(a)}isVisible(){return this._getCache(li,this._isVisible)}_isVisible(a){if(!this.visible())return!1;const u=this.getParent();return!u||u===a||this===a||u._isVisible(a)}shouldDrawHit(a,u=!1){if(a)return this._isVisible(a)&&this._isListening(a);var d=this.getLayer(),p=!1;oe._dragElements.forEach(w=>{w.dragStatus==="dragging"&&(w.node.nodeType==="Stage"||w.node.getLayer()===d)&&(p=!0)});var S=!u&&!y.hitOnDragEnabled&&p;return this.isListening()&&this.isVisible()&&!S}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var a,u,d,p,S=this.getDepth(),w=this,_=0;return w.nodeType!=="Stage"&&function b(N){for(a=[],u=N.length,d=0;d<u;d++)p=N[d],_++,p.nodeType!==Er&&(a=a.concat(p.getChildren().slice())),p._id===w._id&&(d=u);a.length>0&&a[0].getDepth()<=S&&b(a)}(w.getStage().getChildren()),_}getDepth(){for(var a=0,u=this.parent;u;)a++,u=u.parent;return a}_batchTransformChanges(a){this._batchingTransformChange=!0,a(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(hn),this._clearSelfAndDescendantCache(Ee)),this._needClearTransformCache=!1}setPosition(a){return this._batchTransformChanges(()=>{this.x(a.x),this.y(a.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var a=this.getStage().getPointerPosition();if(!a)return null;var u=this.getAbsoluteTransform().copy();return u.invert(),u.point(a)}getAbsolutePosition(a){let u=!1,d=this.parent;for(;d;){if(d.isCached()){u=!0;break}d=d.parent}u&&!a&&(a=!0);var p=this.getAbsoluteTransform(a).getMatrix(),S=new D,w=this.offset();return S.m=p.slice(),S.translate(w.x,w.y),S.getTranslation()}setAbsolutePosition(a){var u=this._clearTransform();this.attrs.x=u.x,this.attrs.y=u.y,delete u.x,delete u.y,this._clearCache(hn);var d=this._getAbsoluteTransform().copy();return d.invert(),d.translate(a.x,a.y),a={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this._setTransform(u),this.setPosition({x:a.x,y:a.y}),this._clearCache(hn),this._clearSelfAndDescendantCache(Ee),this}_setTransform(a){var u;for(u in a)this.attrs[u]=a[u]}_clearTransform(){var a={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,a}move(a){var u=a.x,d=a.y,p=this.x(),S=this.y();return u!==void 0&&(p+=u),d!==void 0&&(S+=d),this.setPosition({x:p,y:S}),this}_eachAncestorReverse(a,u){var d,p,S=[],w=this.getParent();if(!u||u._id!==this._id){for(S.unshift(this);w&&(!u||w._id!==u._id);)S.unshift(w),w=w.parent;for(d=S.length,p=0;p<d;p++)a(S[p])}}rotate(a){return this.rotation(this.rotation()+a),this}moveToTop(){if(!this.parent)return x.warn("Node has no parent. moveToTop function is ignored."),!1;var a=this.index;return a<this.parent.getChildren().length-1&&(this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return x.warn("Node has no parent. moveUp function is ignored."),!1;var a=this.index;return a<this.parent.getChildren().length-1&&(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return x.warn("Node has no parent. moveDown function is ignored."),!1;var a=this.index;return a>0&&(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return x.warn("Node has no parent. moveToBottom function is ignored."),!1;var a=this.index;return a>0&&(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(a){if(!this.parent)return x.warn("Node has no parent. zIndex parameter is ignored."),this;(a<0||a>=this.parent.children.length)&&x.warn("Unexpected value "+a+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var u=this.index;return this.parent.children.splice(u,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Se,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var a=this.opacity(),u=this.getParent();return u&&!u._isUnderCache&&(a*=u.getAbsoluteOpacity()),a}moveTo(a){return this.getParent()!==a&&(this._remove(),a.add(this)),this}toObject(){var a,u,d,p,S={},w=this.getAttrs();for(a in S.attrs={},w)u=w[a],x.isObject(u)&&!x._isPlainObject(u)&&!x._isArray(u)||(d=typeof this[a]=="function"&&this[a],delete w[a],p=d?d.call(this):null,w[a]=u,p!==u&&(S.attrs[a]=u));return S.className=this.getClassName(),x._prepareToStringify(S)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(a,u,d){var p=[];u&&this._isMatch(a)&&p.push(this);for(var S=this.parent;S;){if(S===d)return p;S._isMatch(a)&&p.push(S),S=S.parent}return p}isAncestorOf(a){return!1}findAncestor(a,u,d){return this.findAncestors(a,u,d)[0]}_isMatch(a){if(!a)return!1;if(typeof a=="function")return a(this);var u,d,p=a.replace(/ /g,"").split(","),S=p.length;for(u=0;u<S;u++)if(d=p[u],x.isValidSelector(d)||(x.warn('Selector "'+d+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),x.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),x.warn("Konva is awesome, right?")),d.charAt(0)==="#"){if(this.id()===d.slice(1))return!0}else if(d.charAt(0)==="."){if(this.hasName(d.slice(1)))return!0}else if(this.className===d||this.nodeType===d)return!0;return!1}getLayer(){var a=this.getParent();return a?a.getLayer():null}getStage(){return this._getCache(es,this._getStage)}_getStage(){var a=this.getParent();return a?a.getStage():void 0}fire(a,u={},d){return u.target=u.target||this,d?this._fireAndBubble(a,u):this._fire(a,u),this}getAbsoluteTransform(a){return a?this._getAbsoluteTransform(a):this._getCache(Ee,this._getAbsoluteTransform)}_getAbsoluteTransform(a){var u;if(a)return u=new D,this._eachAncestorReverse(function(p){var S=p.transformsEnabled();S==="all"?u.multiply(p.getTransform()):S==="position"&&u.translate(p.x()-p.offsetX(),p.y()-p.offsetY())},a),u;u=this._cache.get(Ee)||new D,this.parent?this.parent.getAbsoluteTransform().copyInto(u):u.reset();var d=this.transformsEnabled();if(d==="all")u.multiply(this.getTransform());else if(d==="position"){const p=this.attrs.x||0,S=this.attrs.y||0,w=this.attrs.offsetX||0,_=this.attrs.offsetY||0;u.translate(p-w,S-_)}return u.dirty=!1,u}getAbsoluteScale(a){for(var u=this;u;)u._isUnderCache&&(a=u),u=u.getParent();const d=this.getAbsoluteTransform(a).decompose();return{x:d.scaleX,y:d.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(hn,this._getTransform)}_getTransform(){var a,u,d=this._cache.get(hn)||new D;d.reset();var p=this.x(),S=this.y(),w=y.getAngle(this.rotation()),_=(a=this.attrs.scaleX)!==null&&a!==void 0?a:1,b=(u=this.attrs.scaleY)!==null&&u!==void 0?u:1,N=this.attrs.skewX||0,j=this.attrs.skewY||0,q=this.attrs.offsetX||0,Z=this.attrs.offsetY||0;return p===0&&S===0||d.translate(p,S),w!==0&&d.rotate(w),N===0&&j===0||d.skew(N,j),_===1&&b===1||d.scale(_,b),q===0&&Z===0||d.translate(-1*q,-1*Z),d.dirty=!1,d}clone(a){var u,d,p,S,w,_=x.cloneObject(this.attrs);for(u in a)_[u]=a[u];var b=new this.constructor(_);for(u in this.eventListeners)for(p=(d=this.eventListeners[u]).length,S=0;S<p;S++)(w=d[S]).name.indexOf("konva")<0&&(b.eventListeners[u]||(b.eventListeners[u]=[]),b.eventListeners[u].push(w));return b}_toKonvaCanvas(a){a=a||{};var u=this.getClientRect(),d=this.getStage(),p=a.x!==void 0?a.x:Math.floor(u.x),S=a.y!==void 0?a.y:Math.floor(u.y),w=a.pixelRatio||1,_=new te({width:a.width||Math.ceil(u.width)||(d?d.width():0),height:a.height||Math.ceil(u.height)||(d?d.height():0),pixelRatio:w}),b=_.getContext();return b.save(),(p||S)&&b.translate(-1*p,-1*S),this.drawScene(_),b.restore(),_}toCanvas(a){return this._toKonvaCanvas(a)._canvas}toDataURL(a){var u=(a=a||{}).mimeType||null,d=a.quality||null,p=this._toKonvaCanvas(a).toDataURL(u,d);return a.callback&&a.callback(p),p}toImage(a){if(!a||!a.callback)throw"callback required for toImage method config argument";var u=a.callback;delete a.callback,x._urlToImage(this.toDataURL(a),function(d){u(d)})}setSize(a){return this.width(a.width),this.height(a.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():y.dragDistance}_off(a,u,d){var p,S,w,_=this.eventListeners[a];for(p=0;p<_.length;p++)if(S=_[p].name,w=_[p].handler,!(S==="konva"&&u!=="konva"||u&&S!==u||d&&d!==w)){if(_.splice(p,1),_.length===0){delete this.eventListeners[a];break}p--}}_fireChangeEvent(a,u,d){this._fire(a+"Change",{oldVal:u,newVal:d})}addName(a){if(!this.hasName(a)){var u=this.name(),d=u?u+" "+a:a;this.name(d)}return this}hasName(a){if(!a)return!1;const u=this.name();return!!u&&(u||"").split(/\s/g).indexOf(a)!==-1}removeName(a){var u=(this.name()||"").split(/\s/g),d=u.indexOf(a);return d!==-1&&(u.splice(d,1),this.name(u.join(" "))),this}setAttr(a,u){var d=this["set"+x._capitalize(a)];return x._isFunction(d)?d.call(this,u):this._setAttr(a,u),this}_requestDraw(){if(y.autoDrawEnabled){const a=this.getLayer()||this.getStage();a==null||a.batchDraw()}}_setAttr(a,u){var d=this.attrs[a];(d!==u||x.isObject(u))&&(u==null?delete this.attrs[a]:this.attrs[a]=u,this._shouldFireChangeEvents&&this._fireChangeEvent(a,d,u),this._requestDraw())}_setComponentAttr(a,u,d){var p;d!==void 0&&((p=this.attrs[a])||(this.attrs[a]=this.getAttr(a)),this.attrs[a][u]=d,this._fireChangeEvent(a,p,d))}_fireAndBubble(a,u,d){if(u&&this.nodeType===Er&&(u.target=this),a!==$n&&a!==tn||!(d&&(this===d||this.isAncestorOf&&this.isAncestorOf(d))||this.nodeType==="Stage"&&!d)){this._fire(a,u);var p=(a===$n||a===tn)&&d&&d.isAncestorOf&&d.isAncestorOf(this)&&!d.isAncestorOf(this.parent);(u&&!u.cancelBubble||!u)&&this.parent&&this.parent.isListening()&&!p&&(d&&d.parent?this._fireAndBubble.call(this.parent,a,u,d):this._fireAndBubble.call(this.parent,a,u))}}_getProtoListeners(a){let u=this._cache.get(xe);if(!u){u={};let p=Object.getPrototypeOf(this);for(;p;)if(p.eventListeners){for(var d in p.eventListeners){const S=p.eventListeners[d],w=u[d]||[];u[d]=S.concat(w)}p=Object.getPrototypeOf(p)}else p=Object.getPrototypeOf(p);this._cache.set(xe,u)}return u[a]}_fire(a,u){(u=u||{}).currentTarget=this,u.type=a;const d=this._getProtoListeners(a);if(d)for(var p=0;p<d.length;p++)d[p].handler.call(this,u);const S=this.eventListeners[a];if(S)for(p=0;p<S.length;p++)S[p].handler.call(this,u)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(a){var u=a?a.pointerId:void 0,d=this.getStage(),p=this.getAbsolutePosition(),S=d._getPointerById(u)||d._changedPointerPositions[0]||p;oe._dragElements.set(this._id,{node:this,startPointerPos:S,offset:{x:S.x-p.x,y:S.y-p.y},dragStatus:"ready",pointerId:u})}startDrag(a,u=!0){oe._dragElements.has(this._id)||this._createDragElement(a),oe._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:a&&a.evt},u)}_setDragPosition(a,u){const d=this.getStage()._getPointerById(u.pointerId);if(d){var p={x:d.x-u.offset.x,y:d.y-u.offset.y},S=this.dragBoundFunc();if(S!==void 0){const w=S.call(this,p,a);w?p=w:x.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===p.x&&this._lastPos.y===p.y||(this.setAbsolutePosition(p),this._requestDraw()),this._lastPos=p}}stopDrag(a){const u=oe._dragElements.get(this._id);u&&(u.dragStatus="stopped"),oe._endDragBefore(a),oe._endDragAfter(a)}setDraggable(a){this._setAttr("draggable",a),this._dragChange()}isDragging(){const a=oe._dragElements.get(this._id);return!!a&&a.dragStatus==="dragging"}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(a){if((a.evt.button===void 0||y.dragButtons.indexOf(a.evt.button)>=0)&&!this.isDragging()){var u=!1;oe._dragElements.forEach(d=>{this.isAncestorOf(d.node)&&(u=!0)}),u||this._createDragElement(a)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const a=oe._dragElements.get(this._id),u=a&&a.dragStatus==="dragging",d=a&&a.dragStatus==="ready";u?this.stopDrag():d&&oe._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(a={x:0,y:0}){const u=this.getStage();if(!u)return!1;const d={x:-a.x,y:-a.y,width:u.width()+2*a.x,height:u.height()+2*a.y};return x.haveIntersection(d,this.getClientRect())}static create(a,u){return x._isString(a)&&(a=JSON.parse(a)),this._createNode(a,u)}static _createNode(a,u){var d,p,S,w=de.prototype.getClassName.call(a),_=a.children;if(u&&(a.attrs.container=u),y[w]||(x.warn('Can not find a node with class name "'+w+'". Fallback to "Shape".'),w="Shape"),d=new y[w](a.attrs),_)for(p=_.length,S=0;S<p;S++)d.add(de._createNode(_[S]));return d}}de.prototype.nodeType="Node",de.prototype._attrsAffectingSize=[],de.prototype.eventListeners={},de.prototype.on.call(de.prototype,ui,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(hn),this._clearSelfAndDescendantCache(Ee))}),de.prototype.on.call(de.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(li)}),de.prototype.on.call(de.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(xt)}),de.prototype.on.call(de.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Se)});const ue=P.addGetterSetter;ue(de,"zIndex"),ue(de,"absolutePosition"),ue(de,"position"),ue(de,"x",0,A()),ue(de,"y",0,A()),ue(de,"globalCompositeOperation","source-over",$()),ue(de,"opacity",1,A()),ue(de,"name","",$()),ue(de,"id","",$()),ue(de,"rotation",0,A()),P.addComponentsGetterSetter(de,"scale",["x","y"]),ue(de,"scaleX",1,A()),ue(de,"scaleY",1,A()),P.addComponentsGetterSetter(de,"skew",["x","y"]),ue(de,"skewX",0,A()),ue(de,"skewY",0,A()),P.addComponentsGetterSetter(de,"offset",["x","y"]),ue(de,"offsetX",0,A()),ue(de,"offsetY",0,A()),ue(de,"dragDistance",null,A()),ue(de,"width",0,A()),ue(de,"height",0,A()),ue(de,"listening",!0,V()),ue(de,"preventDefault",!0,V()),ue(de,"filters",null,function(m){return this._filterUpToDate=!1,m}),ue(de,"visible",!0,V()),ue(de,"transformsEnabled","all",$()),ue(de,"size"),ue(de,"dragBoundFunc"),ue(de,"draggable",!1,V()),P.backCompat(de,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Fe extends de{constructor(){super(...arguments),this.children=[]}getChildren(a){if(!a)return this.children||[];const u=this.children||[];var d=[];return u.forEach(function(p){a(p)&&d.push(p)}),d}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(arguments.length>1){for(var u=0;u<arguments.length;u++)this.add(arguments[u]);return this}var d=a[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){var u=this._generalFind(a,!0);return u.length>0?u[0]:void 0}_generalFind(a,u){var d=[];return this._descendants(p=>{const S=p._isMatch(a);return S&&d.push(p),!(!S||!u)}),d}_descendants(a){let u=!1;const d=this.getChildren();for(const p of d)if(u=a(p),u||p.hasChildren()&&(u=p._descendants(a),u))return!0;return!1}toObject(){var a=de.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(u=>{a.children.push(u.toObject())}),a}isAncestorOf(a){for(var u=a.getParent();u;){if(u._id===this._id)return!0;u=u.getParent()}return!1}clone(a){var u=de.prototype.clone.call(this,a);return this.getChildren().forEach(function(d){u.add(d.clone())}),u}getAllIntersections(a){var u=[];return this.find("Shape").forEach(function(d){d.isVisible()&&d.intersects(a)&&u.push(d)}),u}_clearSelfAndDescendantCache(a){var u;super._clearSelfAndDescendantCache(a),this.isCached()||(u=this.children)===null||u===void 0||u.forEach(function(d){d._clearSelfAndDescendantCache(a)})}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(u,d){u.index=d}),this._requestDraw()}drawScene(a,u){var d=this.getLayer(),p=a||d&&d.getCanvas(),S=p&&p.getContext(),w=this._getCanvasCache(),_=w&&w.scene,b=p&&p.isCache;if(!this.isVisible()&&!b)return this;if(_){S.save();var N=this.getAbsoluteTransform(u).getMatrix();S.transform(N[0],N[1],N[2],N[3],N[4],N[5]),this._drawCachedSceneCanvas(S),S.restore()}else this._drawChildren("drawScene",p,u);return this}drawHit(a,u){if(!this.shouldDrawHit(u))return this;var d=this.getLayer(),p=a||d&&d.hitCanvas,S=p&&p.getContext(),w=this._getCanvasCache();if(w&&w.hit){S.save();var _=this.getAbsoluteTransform(u).getMatrix();S.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(S),S.restore()}else this._drawChildren("drawHit",p,u);return this}_drawChildren(a,u,d){var p,S=u&&u.getContext(),w=this.clipWidth(),_=this.clipHeight(),b=this.clipFunc(),N=w&&_||b;const j=d===this;if(N){S.save();var q=this.getAbsoluteTransform(d),Z=q.getMatrix();if(S.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),S.beginPath(),b)b.call(this,S,this);else{var ne=this.clipX(),Y=this.clipY();S.rect(ne,Y,w,_)}S.clip(),Z=q.copy().invert().getMatrix(),S.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5])}var le=!j&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";le&&(S.save(),S._applyGlobalCompositeOperation(this)),(p=this.children)===null||p===void 0||p.forEach(function(Ue){Ue[a](u,d)}),le&&S.restore(),N&&S.restore()}getClientRect(a){var u,d,p,S,w,_,b=(a=a||{}).skipTransform,N=a.relativeTo,j=this;(u=this.children)===null||u===void 0||u.forEach(function(Y){if(Y.visible()){var le=Y.getClientRect({relativeTo:j,skipShadow:a.skipShadow,skipStroke:a.skipStroke});le.width===0&&le.height===0||(d===void 0?(d=le.x,p=le.y,S=le.x+le.width,w=le.y+le.height):(d=Math.min(d,le.x),p=Math.min(p,le.y),S=Math.max(S,le.x+le.width),w=Math.max(w,le.y+le.height)))}});for(var q=this.find("Shape"),Z=!1,ne=0;ne<q.length;ne++)if(q[ne]._isVisible(this)){Z=!0;break}return _=Z&&d!==void 0?{x:d,y:p,width:S-d,height:w-p}:{x:0,y:0,width:0,height:0},b?_:this._transformedRect(_,N)}}P.addComponentsGetterSetter(Fe,"clip",["x","y","width","height"]),P.addGetterSetter(Fe,"clipX",void 0,A()),P.addGetterSetter(Fe,"clipY",void 0,A()),P.addGetterSetter(Fe,"clipWidth",void 0,A()),P.addGetterSetter(Fe,"clipHeight",void 0,A()),P.addGetterSetter(Fe,"clipFunc");const rr=new Map,ci=y._global.PointerEvent!==void 0;function ns(m){return rr.get(m)}function rs(m){return{evt:m,pointerId:m.pointerId}}function ho(m,a){return rr.get(m)===a}function fo(m,a){Re(m),a.getStage()&&(rr.set(m,a),ci&&a._fire("gotpointercapture",rs(new PointerEvent("gotpointercapture"))))}function Re(m,a){const u=rr.get(m);if(!u)return;const d=u.getStage();d&&d.content,rr.delete(m),ci&&u._fire("lostpointercapture",rs(new PointerEvent("lostpointercapture")))}var ft="mouseleave",Le="mouseover",Vn="mouseenter",Kg="mousemove",Yg="mousedown",Qg="mouseup",po="pointermove",go="pointerdown",is="pointerup",mo="pointercancel",dl="pointerout",fl="pointerleave",pl="pointerover",gl="pointerenter",eh="contextmenu",Xg="touchstart",Jg="touchend",Zg="touchmove",em="touchcancel",th="wheel",WC=[[Vn,"_pointerenter"],[Yg,"_pointerdown"],[Kg,"_pointermove"],[Qg,"_pointerup"],[ft,"_pointerleave"],[Xg,"_pointerdown"],[Zg,"_pointermove"],[Jg,"_pointerup"],[em,"_pointercancel"],[Le,"_pointerover"],[th,"_wheel"],[eh,"_contextmenu"],[go,"_pointerdown"],[po,"_pointermove"],[is,"_pointerup"],[mo,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const nh={mouse:{[dl]:"mouseout",[fl]:ft,[pl]:Le,[gl]:Vn,[po]:Kg,[go]:Yg,[is]:Qg,[mo]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[dl]:"touchout",[fl]:"touchleave",[pl]:"touchover",[gl]:"touchenter",[po]:Zg,[go]:Xg,[is]:Jg,[mo]:em,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[dl]:dl,[fl]:fl,[pl]:pl,[gl]:gl,[po]:po,[go]:go,[is]:is,[mo]:mo,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},vo=m=>m.indexOf("pointer")>=0?"pointer":m.indexOf("touch")>=0?"touch":"mouse",ss=m=>{const a=vo(m);return a==="pointer"?y.pointerEventsEnabled&&nh.pointer:a==="touch"?nh.touch:a==="mouse"?nh.mouse:void 0};function tm(m={}){return(m.clipFunc||m.clipWidth||m.clipHeight)&&x.warn("Stage does not support clipping. Please use clip for Layers or Groups."),m}const ml=[];class vl extends Fe{constructor(a){super(tm(a)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),ml.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{tm(this.attrs)}),this._checkVisibility()}_validateAdd(a){const u=a.getType()==="Layer",d=a.getType()==="FastLayer";u||d||x.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const a=this.visible()?"":"none";this.content.style.display=a}setContainer(a){if(typeof a=="string"){if(a.charAt(0)==="."){var u=a.slice(1);a=document.getElementsByClassName(u)[0]}else{var d;d=a.charAt(0)!=="#"?a:a.slice(1),a=document.getElementById(d)}if(!a)throw"Can not find container in document with id "+d}return this._setAttr("container",a),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),a.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var a,u=this.children,d=u.length;for(a=0;a<d;a++)u[a].clear();return this}clone(a){return a||(a={}),a.container=typeof document<"u"&&document.createElement("div"),Fe.prototype.clone.call(this,a)}destroy(){super.destroy();var a=this.content;a&&x._isInDocument(a)&&this.container().removeChild(a);var u=ml.indexOf(this);return u>-1&&ml.splice(u,1),this}getPointerPosition(){const a=this._pointerPositions[0]||this._changedPointerPositions[0];return a?{x:a.x,y:a.y}:(x.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(a){return this._pointerPositions.find(u=>u.id===a)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(a){(a=a||{}).x=a.x||0,a.y=a.y||0,a.width=a.width||this.width(),a.height=a.height||this.height();var u=new te({width:a.width,height:a.height,pixelRatio:a.pixelRatio||1}),d=u.getContext()._context,p=this.children;return(a.x||a.y)&&d.translate(-1*a.x,-1*a.y),p.forEach(function(S){if(S.isVisible()){var w=S._toKonvaCanvas(a);d.drawImage(w._canvas,a.x,a.y,w.getWidth()/w.getPixelRatio(),w.getHeight()/w.getPixelRatio())}}),u}getIntersection(a){if(!a)return null;var u,d=this.children;for(u=d.length-1;u>=0;u--){const p=d[u].getIntersection(a);if(p)return p}return null}_resizeDOM(){var a=this.width(),u=this.height();this.content&&(this.content.style.width=a+"px",this.content.style.height=u+"px"),this.bufferCanvas.setSize(a,u),this.bufferHitCanvas.setSize(a,u),this.children.forEach(d=>{d.setSize({width:a,height:u}),d.draw()})}add(a,...u){if(arguments.length>1){for(var d=0;d<arguments.length;d++)this.add(arguments[d]);return this}super.add(a);var p=this.children.length;return p>5&&x.warn("The stage has "+p+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),a.setSize({width:this.width(),height:this.height()}),a.draw(),y.isBrowser&&this.content.appendChild(a.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(a){return ho(a,this)}setPointerCapture(a){fo(a,this)}releaseCapture(a){Re(a)}getLayers(){return this.children}_bindContentEvents(){y.isBrowser&&WC.forEach(([a,u])=>{this.content.addEventListener(a,d=>{this[u](d)})})}_pointerenter(a){this.setPointersPositions(a);const u=ss(a.type);this._fire(u.pointerenter,{evt:a,target:this,currentTarget:this})}_pointerover(a){this.setPointersPositions(a);const u=ss(a.type);this._fire(u.pointerover,{evt:a,target:this,currentTarget:this})}_getTargetShape(a){let u=this[a+"targetShape"];return u&&!u.getStage()&&(u=null),u}_pointerleave(a){const u=ss(a.type),d=vo(a.type);if(u){this.setPointersPositions(a);var p=this._getTargetShape(d),S=!oe.isDragging||y.hitOnDragEnabled;p&&S?(p._fireAndBubble(u.pointerout,{evt:a}),p._fireAndBubble(u.pointerleave,{evt:a}),this._fire(u.pointerleave,{evt:a,target:this,currentTarget:this}),this[d+"targetShape"]=null):S&&(this._fire(u.pointerleave,{evt:a,target:this,currentTarget:this}),this._fire(u.pointerout,{evt:a,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(a){const u=ss(a.type),d=vo(a.type);if(u){this.setPointersPositions(a);var p=!1;this._changedPointerPositions.forEach(S=>{var w=this.getIntersection(S);if(oe.justDragged=!1,y["_"+d+"ListenClick"]=!0,!w||!w.isListening())return;y.capturePointerEventsEnabled&&w.setPointerCapture(S.id),this[d+"ClickStartShape"]=w,w._fireAndBubble(u.pointerdown,{evt:a,pointerId:S.id}),p=!0;const _=a.type.indexOf("touch")>=0;w.preventDefault()&&a.cancelable&&_&&a.preventDefault()}),p||this._fire(u.pointerdown,{evt:a,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(a){const u=ss(a.type),d=vo(a.type);if(!u||(oe.isDragging&&oe.node.preventDefault()&&a.cancelable&&a.preventDefault(),this.setPointersPositions(a),oe.isDragging&&!y.hitOnDragEnabled))return;var p={};let S=!1;var w=this._getTargetShape(d);this._changedPointerPositions.forEach(_=>{const b=ns(_.id)||this.getIntersection(_),N=_.id,j={evt:a,pointerId:N};var q=w!==b;if(q&&w&&(w._fireAndBubble(u.pointerout,Object.assign({},j),b),w._fireAndBubble(u.pointerleave,Object.assign({},j),b)),b){if(p[b._id])return;p[b._id]=!0}b&&b.isListening()?(S=!0,q&&(b._fireAndBubble(u.pointerover,Object.assign({},j),w),b._fireAndBubble(u.pointerenter,Object.assign({},j),w),this[d+"targetShape"]=b),b._fireAndBubble(u.pointermove,Object.assign({},j))):w&&(this._fire(u.pointerover,{evt:a,target:this,currentTarget:this,pointerId:N}),this[d+"targetShape"]=null)}),S||this._fire(u.pointermove,{evt:a,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(a){const u=ss(a.type),d=vo(a.type);if(!u)return;this.setPointersPositions(a);const p=this[d+"ClickStartShape"],S=this[d+"ClickEndShape"];var w={};let _=!1;this._changedPointerPositions.forEach(b=>{const N=ns(b.id)||this.getIntersection(b);if(N){if(N.releaseCapture(b.id),w[N._id])return;w[N._id]=!0}const j=b.id,q={evt:a,pointerId:j};let Z=!1;y["_"+d+"InDblClickWindow"]?(Z=!0,clearTimeout(this[d+"DblTimeout"])):oe.justDragged||(y["_"+d+"InDblClickWindow"]=!0,clearTimeout(this[d+"DblTimeout"])),this[d+"DblTimeout"]=setTimeout(function(){y["_"+d+"InDblClickWindow"]=!1},y.dblClickWindow),N&&N.isListening()?(_=!0,this[d+"ClickEndShape"]=N,N._fireAndBubble(u.pointerup,Object.assign({},q)),y["_"+d+"ListenClick"]&&p&&p===N&&(N._fireAndBubble(u.pointerclick,Object.assign({},q)),Z&&S&&S===N&&N._fireAndBubble(u.pointerdblclick,Object.assign({},q)))):(this[d+"ClickEndShape"]=null,y["_"+d+"ListenClick"]&&this._fire(u.pointerclick,{evt:a,target:this,currentTarget:this,pointerId:j}),Z&&this._fire(u.pointerdblclick,{evt:a,target:this,currentTarget:this,pointerId:j}))}),_||this._fire(u.pointerup,{evt:a,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),y["_"+d+"ListenClick"]=!1,a.cancelable&&a.preventDefault()}_contextmenu(a){this.setPointersPositions(a);var u=this.getIntersection(this.getPointerPosition());u&&u.isListening()?u._fireAndBubble(eh,{evt:a}):this._fire(eh,{evt:a,target:this,currentTarget:this})}_wheel(a){this.setPointersPositions(a);var u=this.getIntersection(this.getPointerPosition());u&&u.isListening()?u._fireAndBubble(th,{evt:a}):this._fire(th,{evt:a,target:this,currentTarget:this})}_pointercancel(a){this.setPointersPositions(a);const u=ns(a.pointerId)||this.getIntersection(this.getPointerPosition());u&&u._fireAndBubble(is,rs(a)),Re(a.pointerId)}_lostpointercapture(a){Re(a.pointerId)}setPointersPositions(a){var u=this._getContentPosition(),d=null,p=null;(a=a||window.event).touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(a.touches,S=>{this._pointerPositions.push({id:S.identifier,x:(S.clientX-u.left)/u.scaleX,y:(S.clientY-u.top)/u.scaleY})}),Array.prototype.forEach.call(a.changedTouches||a.touches,S=>{this._changedPointerPositions.push({id:S.identifier,x:(S.clientX-u.left)/u.scaleX,y:(S.clientY-u.top)/u.scaleY})})):(d=(a.clientX-u.left)/u.scaleX,p=(a.clientY-u.top)/u.scaleY,this.pointerPos={x:d,y:p},this._pointerPositions=[{x:d,y:p,id:x._getFirstPointerId(a)}],this._changedPointerPositions=[{x:d,y:p,id:x._getFirstPointerId(a)}])}_setPointerPosition(a){x.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(a)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var a=this.content.getBoundingClientRect();return{top:a.top,left:a.left,scaleX:a.width/this.content.clientWidth||1,scaleY:a.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new te({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ae({pixelRatio:1,width:this.width(),height:this.height()}),y.isBrowser){var a=this.container();if(!a)throw"Stage has no container. A container is required.";a.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),a.appendChild(this.content),this._resizeDOM()}}cache(){return x.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(a){a.batchDraw()}),this}}vl.prototype.nodeType="Stage",k(vl),P.addGetterSetter(vl,"container");var nm="hasShadow",rm="shadowRGBA",im="patternImage",sm="linearGradient",om="radialGradient";let rh;function ih(){return rh||(rh=x.createCanvasElement().getContext("2d"),rh)}const yo={};class ie extends de{constructor(a){let u;for(super(a);u=x.getRandomColor(),!u||u in yo;);this.colorKey=u,yo[u]=this}getContext(){return x.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return x.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(nm,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(im,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const a=ih().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(a&&a.setTransform){const u=new D;u.translate(this.fillPatternX(),this.fillPatternY()),u.rotate(y.getAngle(this.fillPatternRotation())),u.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),u.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const d=u.getMatrix(),p=typeof DOMMatrix>"u"?{a:d[0],b:d[1],c:d[2],d:d[3],e:d[4],f:d[5]}:new DOMMatrix(d);a.setTransform(p)}return a}}_getLinearGradient(){return this._getCache(sm,this.__getLinearGradient)}__getLinearGradient(){var a=this.fillLinearGradientColorStops();if(a){for(var u=ih(),d=this.fillLinearGradientStartPoint(),p=this.fillLinearGradientEndPoint(),S=u.createLinearGradient(d.x,d.y,p.x,p.y),w=0;w<a.length;w+=2)S.addColorStop(a[w],a[w+1]);return S}}_getRadialGradient(){return this._getCache(om,this.__getRadialGradient)}__getRadialGradient(){var a=this.fillRadialGradientColorStops();if(a){for(var u=ih(),d=this.fillRadialGradientStartPoint(),p=this.fillRadialGradientEndPoint(),S=u.createRadialGradient(d.x,d.y,this.fillRadialGradientStartRadius(),p.x,p.y,this.fillRadialGradientEndRadius()),w=0;w<a.length;w+=2)S.addColorStop(a[w],a[w+1]);return S}}getShadowRGBA(){return this._getCache(rm,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var a=x.colorToRGBA(this.shadowColor());return"rgba("+a.r+","+a.g+","+a.b+","+a.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const a=this.hitStrokeWidth();return a==="auto"?this.hasStroke():this.strokeEnabled()&&!!a}intersects(a){var u=this.getStage().bufferHitCanvas;return u.getContext().clear(),this.drawHit(u,null,!0),u.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data[3]>0}destroy(){return de.prototype.destroy.call(this),delete yo[this.colorKey],delete this.colorKey,this}_useBufferCanvas(a){var u;if(!this.getStage()||(u=this.attrs.perfectDrawEnabled)!==null&&u!==void 0&&!u)return!1;const d=a||this.hasFill(),p=this.hasStroke(),S=this.getAbsoluteOpacity()!==1;if(d&&p&&S)return!0;const w=this.hasShadow(),_=this.shadowForStrokeEnabled();return!!(d&&p&&w&&_)}setStrokeHitEnabled(a){x.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),a?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var a=this.size();return{x:this._centroid?-a.width/2:0,y:this._centroid?-a.height/2:0,width:a.width,height:a.height}}getClientRect(a={}){const u=a.skipTransform,d=a.relativeTo,p=this.getSelfRect(),S=!a.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,w=p.width+S,_=p.height+S,b=!a.skipShadow&&this.hasShadow(),N=b?this.shadowOffsetX():0,j=b?this.shadowOffsetY():0,q=w+Math.abs(N),Z=_+Math.abs(j),ne=b&&this.shadowBlur()||0,Y={width:q+2*ne,height:Z+2*ne,x:-(S/2+ne)+Math.min(N,0)+p.x,y:-(S/2+ne)+Math.min(j,0)+p.y};return u?Y:this._transformedRect(Y,d)}drawScene(a,u){var d,p,S=this.getLayer(),w=a||S.getCanvas(),_=w.getContext(),b=this._getCanvasCache(),N=this.getSceneFunc(),j=this.hasShadow(),q=w.isCache,Z=u===this;if(!this.isVisible()&&!Z)return this;if(b){_.save();var ne=this.getAbsoluteTransform(u).getMatrix();return _.transform(ne[0],ne[1],ne[2],ne[3],ne[4],ne[5]),this._drawCachedSceneCanvas(_),_.restore(),this}if(!N)return this;if(_.save(),this._useBufferCanvas()&&!q){(p=(d=this.getStage().bufferCanvas).getContext()).clear(),p.save(),p._applyLineJoin(this);var Y=this.getAbsoluteTransform(u).getMatrix();p.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),N.call(this,p,this),p.restore();var le=d.pixelRatio;j&&_._applyShadow(this),_._applyOpacity(this),_._applyGlobalCompositeOperation(this),_.drawImage(d._canvas,0,0,d.width/le,d.height/le)}else _._applyLineJoin(this),Z||(Y=this.getAbsoluteTransform(u).getMatrix(),_.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),_._applyOpacity(this),_._applyGlobalCompositeOperation(this)),j&&_._applyShadow(this),N.call(this,_,this);return _.restore(),this}drawHit(a,u,d=!1){if(!this.shouldDrawHit(u,d))return this;var p=this.getLayer(),S=a||p.hitCanvas,w=S&&S.getContext(),_=this.hitFunc()||this.sceneFunc(),b=this._getCanvasCache(),N=b&&b.hit;if(this.colorKey||x.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),N){w.save();var j=this.getAbsoluteTransform(u).getMatrix();return w.transform(j[0],j[1],j[2],j[3],j[4],j[5]),this._drawCachedHitCanvas(w),w.restore(),this}if(!_)return this;if(w.save(),w._applyLineJoin(this),this!==u){var q=this.getAbsoluteTransform(u).getMatrix();w.transform(q[0],q[1],q[2],q[3],q[4],q[5])}return _.call(this,w,this),w.restore(),this}drawHitFromCache(a=0){var u,d,p,S,w,_=this._getCanvasCache(),b=this._getCachedSceneCanvas(),N=_.hit,j=N.getContext(),q=N.getWidth(),Z=N.getHeight();j.clear(),j.drawImage(b._canvas,0,0,q,Z);try{for(p=(d=(u=j.getImageData(0,0,q,Z)).data).length,S=x._hexToRgb(this.colorKey),w=0;w<p;w+=4)d[w+3]>a?(d[w]=S.r,d[w+1]=S.g,d[w+2]=S.b,d[w+3]=255):d[w+3]=0;j.putImageData(u,0,0)}catch(ne){x.error("Unable to draw hit graph from cached scene canvas. "+ne.message)}return this}hasPointerCapture(a){return ho(a,this)}setPointerCapture(a){fo(a,this)}releaseCapture(a){Re(a)}}ie.prototype._fillFunc=function(m){m.fill()},ie.prototype._strokeFunc=function(m){m.stroke()},ie.prototype._fillFuncHit=function(m){m.fill()},ie.prototype._strokeFuncHit=function(m){m.stroke()},ie.prototype._centroid=!1,ie.prototype.nodeType="Shape",k(ie),ie.prototype.eventListeners={},ie.prototype.on.call(ie.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(nm)}),ie.prototype.on.call(ie.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(rm)}),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(im)}),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(sm)}),ie.prototype.on.call(ie.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(om)}),P.addGetterSetter(ie,"stroke",void 0,K()),P.addGetterSetter(ie,"strokeWidth",2,A()),P.addGetterSetter(ie,"fillAfterStrokeEnabled",!1),P.addGetterSetter(ie,"hitStrokeWidth","auto",function(){if(y.isUnminified)return function(m,a){return x._isNumber(m)||m==="auto"||x.warn(M(m)+' is a not valid value for "'+a+'" attribute. The value should be a number or "auto".'),m}}()),P.addGetterSetter(ie,"strokeHitEnabled",!0,V()),P.addGetterSetter(ie,"perfectDrawEnabled",!0,V()),P.addGetterSetter(ie,"shadowForStrokeEnabled",!0,V()),P.addGetterSetter(ie,"lineJoin"),P.addGetterSetter(ie,"lineCap"),P.addGetterSetter(ie,"sceneFunc"),P.addGetterSetter(ie,"hitFunc"),P.addGetterSetter(ie,"dash"),P.addGetterSetter(ie,"dashOffset",0,A()),P.addGetterSetter(ie,"shadowColor",void 0,$()),P.addGetterSetter(ie,"shadowBlur",0,A()),P.addGetterSetter(ie,"shadowOpacity",1,A()),P.addComponentsGetterSetter(ie,"shadowOffset",["x","y"]),P.addGetterSetter(ie,"shadowOffsetX",0,A()),P.addGetterSetter(ie,"shadowOffsetY",0,A()),P.addGetterSetter(ie,"fillPatternImage"),P.addGetterSetter(ie,"fill",void 0,K()),P.addGetterSetter(ie,"fillPatternX",0,A()),P.addGetterSetter(ie,"fillPatternY",0,A()),P.addGetterSetter(ie,"fillLinearGradientColorStops"),P.addGetterSetter(ie,"strokeLinearGradientColorStops"),P.addGetterSetter(ie,"fillRadialGradientStartRadius",0),P.addGetterSetter(ie,"fillRadialGradientEndRadius",0),P.addGetterSetter(ie,"fillRadialGradientColorStops"),P.addGetterSetter(ie,"fillPatternRepeat","repeat"),P.addGetterSetter(ie,"fillEnabled",!0),P.addGetterSetter(ie,"strokeEnabled",!0),P.addGetterSetter(ie,"shadowEnabled",!0),P.addGetterSetter(ie,"dashEnabled",!0),P.addGetterSetter(ie,"strokeScaleEnabled",!0),P.addGetterSetter(ie,"fillPriority","color"),P.addComponentsGetterSetter(ie,"fillPatternOffset",["x","y"]),P.addGetterSetter(ie,"fillPatternOffsetX",0,A()),P.addGetterSetter(ie,"fillPatternOffsetY",0,A()),P.addComponentsGetterSetter(ie,"fillPatternScale",["x","y"]),P.addGetterSetter(ie,"fillPatternScaleX",1,A()),P.addGetterSetter(ie,"fillPatternScaleY",1,A()),P.addComponentsGetterSetter(ie,"fillLinearGradientStartPoint",["x","y"]),P.addComponentsGetterSetter(ie,"strokeLinearGradientStartPoint",["x","y"]),P.addGetterSetter(ie,"fillLinearGradientStartPointX",0),P.addGetterSetter(ie,"strokeLinearGradientStartPointX",0),P.addGetterSetter(ie,"fillLinearGradientStartPointY",0),P.addGetterSetter(ie,"strokeLinearGradientStartPointY",0),P.addComponentsGetterSetter(ie,"fillLinearGradientEndPoint",["x","y"]),P.addComponentsGetterSetter(ie,"strokeLinearGradientEndPoint",["x","y"]),P.addGetterSetter(ie,"fillLinearGradientEndPointX",0),P.addGetterSetter(ie,"strokeLinearGradientEndPointX",0),P.addGetterSetter(ie,"fillLinearGradientEndPointY",0),P.addGetterSetter(ie,"strokeLinearGradientEndPointY",0),P.addComponentsGetterSetter(ie,"fillRadialGradientStartPoint",["x","y"]),P.addGetterSetter(ie,"fillRadialGradientStartPointX",0),P.addGetterSetter(ie,"fillRadialGradientStartPointY",0),P.addComponentsGetterSetter(ie,"fillRadialGradientEndPoint",["x","y"]),P.addGetterSetter(ie,"fillRadialGradientEndPointX",0),P.addGetterSetter(ie,"fillRadialGradientEndPointY",0),P.addGetterSetter(ie,"fillPatternRotation",0),P.backCompat(ie,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var am=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],qC=am.length;class hi extends Fe{constructor(a){super(a),this.canvas=new te,this.hitCanvas=new ae({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this}setZIndex(a){super.setZIndex(a);var u=this.getStage();return u&&u.content&&(u.content.removeChild(this.getNativeCanvasElement()),a<u.children.length-1?u.content.insertBefore(this.getNativeCanvasElement(),u.children[a+1].getCanvas()._canvas):u.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){de.prototype.moveToTop.call(this);var a=this.getStage();return a&&a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!de.prototype.moveUp.call(this))return!1;var a=this.getStage();return!(!a||!a.content||(a.content.removeChild(this.getNativeCanvasElement()),this.index<a.children.length-1?a.content.insertBefore(this.getNativeCanvasElement(),a.children[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(de.prototype.moveDown.call(this)){var a=this.getStage();if(a){var u=a.children;a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.insertBefore(this.getNativeCanvasElement(),u[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(de.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var u=a.children;a.content&&(a.content.removeChild(this.getNativeCanvasElement()),a.content.insertBefore(this.getNativeCanvasElement(),u[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var a=this.getNativeCanvasElement();return de.prototype.remove.call(this),a&&a.parentNode&&x._isInDocument(a)&&a.parentNode.removeChild(a),this}getStage(){return this.parent}setSize({width:a,height:u}){return this.canvas.setSize(a,u),this.hitCanvas.setSize(a,u),this._setSmoothEnabled(),this}_validateAdd(a){var u=a.getType();u!=="Group"&&u!=="Shape"&&x.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(a){return(a=a||{}).width=a.width||this.getWidth(),a.height=a.height||this.getHeight(),a.x=a.x!==void 0?a.x:this.x(),a.y=a.y!==void 0?a.y:this.y(),de.prototype._toKonvaCanvas.call(this,a)}_checkVisibility(){const a=this.visible();this.canvas._canvas.style.display=a?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){x.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){x.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,x.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(a){if(!this.isListening()||!this.isVisible())return null;for(var u=1,d=!1;;){for(let p=0;p<qC;p++){const S=am[p],w=this._getIntersection({x:a.x+S.x*u,y:a.y+S.y*u}),_=w.shape;if(_)return _;if(d=!!w.antialiased,!w.antialiased)break}if(!d)return null;u+=1}}_getIntersection(a){const u=this.hitCanvas.pixelRatio,d=this.hitCanvas.context.getImageData(Math.round(a.x*u),Math.round(a.y*u),1,1).data,p=d[3];if(p===255){const S=x._rgbToHex(d[0],d[1],d[2]),w=yo["#"+S];return w?{shape:w}:{antialiased:!0}}return p>0?{antialiased:!0}:{}}drawScene(a,u){var d=this.getLayer(),p=a||d&&d.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&p.getContext().clear(),Fe.prototype.drawScene.call(this,p,u),this._fire("draw",{node:this}),this}drawHit(a,u){var d=this.getLayer(),p=a||d&&d.hitCanvas;return d&&d.clearBeforeDraw()&&d.getHitCanvas().getContext().clear(),Fe.prototype.drawHit.call(this,p,u),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(a){x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(a)}getHitGraphEnabled(a){return x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var a=this.parent;this.hitCanvas._canvas.parentNode?a.content.removeChild(this.hitCanvas._canvas):a.content.appendChild(this.hitCanvas._canvas)}}}hi.prototype.nodeType="Layer",k(hi),P.addGetterSetter(hi,"imageSmoothingEnabled",!0),P.addGetterSetter(hi,"clearBeforeDraw",!0),P.addGetterSetter(hi,"hitGraphEnabled",!0,V());class sh extends hi{constructor(a){super(a),this.listening(!1),x.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}sh.prototype.nodeType="FastLayer",k(sh);class oh extends Fe{_validateAdd(a){var u=a.getType();u!=="Group"&&u!=="Shape"&&x.throw("You may only add groups and shapes to groups.")}}oh.prototype.nodeType="Group",k(oh);var ah=v.performance&&v.performance.now?function(){return v.performance.now()}:function(){return new Date().getTime()};class In{constructor(a,u){this.id=In.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ah(),frameRate:0},this.func=a,this.setLayers(u)}setLayers(a){var u;return u=a?a.length>0?a:[a]:[],this.layers=u,this}getLayers(){return this.layers}addLayer(a){var u,d=this.layers,p=d.length;for(u=0;u<p;u++)if(d[u]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){var a,u=In.animations,d=u.length;for(a=0;a<d;a++)if(u[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ah(),In._addAnimation(this),this}stop(){return In._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){var u,d=a.id,p=this.animations,S=p.length;for(u=0;u<S;u++)if(p[u].id===d){this.animations.splice(u,1);break}}static _runFrames(){var a,u,d,p,S,w,_,b,N={},j=this.animations;for(p=0;p<j.length;p++)if(u=(a=j[p]).layers,d=a.func,a._updateFrameObject(ah()),w=u.length,!d||d.call(a,a.frame)!==!1)for(S=0;S<w;S++)(_=u[S])._id!==void 0&&(N[_._id]=_);for(b in N)N.hasOwnProperty(b)&&N[b].batchDraw()}static _animationLoop(){var a=In;a.animations.length?(a._runFrames(),x.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,x.requestAnimFrame(this._animationLoop))}}In.animations=[],In.animIdCounter=0,In.animRunning=!1;var KC={node:1,duration:1,easing:1,onFinish:1,yoyo:1},YC=0,lm=["fill","stroke","shadowColor"];class QC{constructor(a,u,d,p,S,w,_){this.prop=a,this.propFunc=u,this.begin=p,this._pos=p,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=d,this._change=S-this.begin,this.pause()}fire(a){var u=this[a];u&&u()}setTime(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():a<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())}getTime(){return this._time}setPosition(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a}getPosition(a){return a===void 0&&(a=this._time),this.func(a,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var a=this.getTimer()-this._startTime;this.state===2?this.setTime(a):this.state===3&&this.setTime(this.duration-a)}pause(){this.state=1,this.fire("onPause")}getTimer(){return new Date().getTime()}}class et{constructor(a){var u,d,p=this,S=a.node,w=S._id,_=a.easing||wo.Linear,b=!!a.yoyo;u=a.duration===void 0?.3:a.duration===0?.001:a.duration,this.node=S,this._id=YC++;var N=S.getLayer()||(S instanceof y.Stage?S.getLayers():null);for(d in N||x.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new In(function(){p.tween.onEnterFrame()},N),this.tween=new QC(d,function(j){p._tweenFunc(j)},_,0,1,1e3*u,b),this._addListeners(),et.attrs[w]||(et.attrs[w]={}),et.attrs[w][this._id]||(et.attrs[w][this._id]={}),et.tweens[w]||(et.tweens[w]={}),a)KC[d]===void 0&&this._addAttr(d,a[d]);this.reset(),this.onFinish=a.onFinish,this.onReset=a.onReset,this.onUpdate=a.onUpdate}_addAttr(a,u){var d,p,S,w,_,b,N,j,q=this.node,Z=q._id;if((S=et.tweens[Z][a])&&delete et.attrs[Z][S][a],d=q.getAttr(a),x._isArray(u))if(p=[],_=Math.max(u.length,d.length),a==="points"&&u.length!==d.length&&(u.length>d.length?(N=d,d=x._prepareArrayForTween(d,u,q.closed())):(b=u,u=x._prepareArrayForTween(u,d,q.closed()))),a.indexOf("fill")===0)for(w=0;w<_;w++)if(w%2==0)p.push(u[w]-d[w]);else{var ne=x.colorToRGBA(d[w]);j=x.colorToRGBA(u[w]),d[w]=ne,p.push({r:j.r-ne.r,g:j.g-ne.g,b:j.b-ne.b,a:j.a-ne.a})}else for(w=0;w<_;w++)p.push(u[w]-d[w]);else lm.indexOf(a)!==-1?(d=x.colorToRGBA(d),p={r:(j=x.colorToRGBA(u)).r-d.r,g:j.g-d.g,b:j.b-d.b,a:j.a-d.a}):p=u-d;et.attrs[Z][this._id][a]={start:d,diff:p,end:u,trueEnd:b,trueStart:N},et.tweens[Z][a]=this._id}_tweenFunc(a){var u,d,p,S,w,_,b,N,j=this.node,q=et.attrs[j._id][this._id];for(u in q){if(p=(d=q[u]).start,S=d.diff,N=d.end,x._isArray(p))if(w=[],b=Math.max(p.length,N.length),u.indexOf("fill")===0)for(_=0;_<b;_++)_%2==0?w.push((p[_]||0)+S[_]*a):w.push("rgba("+Math.round(p[_].r+S[_].r*a)+","+Math.round(p[_].g+S[_].g*a)+","+Math.round(p[_].b+S[_].b*a)+","+(p[_].a+S[_].a*a)+")");else for(_=0;_<b;_++)w.push((p[_]||0)+S[_]*a);else w=lm.indexOf(u)!==-1?"rgba("+Math.round(p.r+S.r*a)+","+Math.round(p.g+S.g*a)+","+Math.round(p.b+S.b*a)+","+(p.a+S.a*a)+")":p+S*a;j.setAttr(u,w)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var a=this.node,u=et.attrs[a._id][this._id];u.points&&u.points.trueEnd&&a.setAttr("points",u.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var a=this.node,u=et.attrs[a._id][this._id];u.points&&u.points.trueStart&&a.points(u.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(a){return this.tween.seek(1e3*a),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var a,u=this.node._id,d=this._id,p=et.tweens[u];for(a in this.pause(),p)delete et.tweens[u][a];delete et.attrs[u][d]}}et.attrs={},et.tweens={},de.prototype.to=function(m){var a=m.onFinish;m.node=this,m.onFinish=function(){this.destroy(),a&&a()},new et(m).play()};const wo={BackEaseIn(m,a,u,d){var p=1.70158;return u*(m/=d)*m*((p+1)*m-p)+a},BackEaseOut(m,a,u,d){var p=1.70158;return u*((m=m/d-1)*m*((p+1)*m+p)+1)+a},BackEaseInOut(m,a,u,d){var p=1.70158;return(m/=d/2)<1?u/2*(m*m*((1+(p*=1.525))*m-p))+a:u/2*((m-=2)*m*((1+(p*=1.525))*m+p)+2)+a},ElasticEaseIn(m,a,u,d,p,S){var w=0;return m===0?a:(m/=d)==1?a+u:(S||(S=.3*d),!p||p<Math.abs(u)?(p=u,w=S/4):w=S/(2*Math.PI)*Math.asin(u/p),-p*Math.pow(2,10*(m-=1))*Math.sin((m*d-w)*(2*Math.PI)/S)+a)},ElasticEaseOut(m,a,u,d,p,S){var w=0;return m===0?a:(m/=d)==1?a+u:(S||(S=.3*d),!p||p<Math.abs(u)?(p=u,w=S/4):w=S/(2*Math.PI)*Math.asin(u/p),p*Math.pow(2,-10*m)*Math.sin((m*d-w)*(2*Math.PI)/S)+u+a)},ElasticEaseInOut(m,a,u,d,p,S){var w=0;return m===0?a:(m/=d/2)==2?a+u:(S||(S=d*(.3*1.5)),!p||p<Math.abs(u)?(p=u,w=S/4):w=S/(2*Math.PI)*Math.asin(u/p),m<1?p*Math.pow(2,10*(m-=1))*Math.sin((m*d-w)*(2*Math.PI)/S)*-.5+a:p*Math.pow(2,-10*(m-=1))*Math.sin((m*d-w)*(2*Math.PI)/S)*.5+u+a)},BounceEaseOut:(m,a,u,d)=>(m/=d)<1/2.75?u*(7.5625*m*m)+a:m<2/2.75?u*(7.5625*(m-=1.5/2.75)*m+.75)+a:m<2.5/2.75?u*(7.5625*(m-=2.25/2.75)*m+.9375)+a:u*(7.5625*(m-=2.625/2.75)*m+.984375)+a,BounceEaseIn:(m,a,u,d)=>u-wo.BounceEaseOut(d-m,0,u,d)+a,BounceEaseInOut:(m,a,u,d)=>m<d/2?.5*wo.BounceEaseIn(2*m,0,u,d)+a:.5*wo.BounceEaseOut(2*m-d,0,u,d)+.5*u+a,EaseIn:(m,a,u,d)=>u*(m/=d)*m+a,EaseOut:(m,a,u,d)=>-u*(m/=d)*(m-2)+a,EaseInOut:(m,a,u,d)=>(m/=d/2)<1?u/2*m*m+a:-u/2*(--m*(m-2)-1)+a,StrongEaseIn:(m,a,u,d)=>u*(m/=d)*m*m*m*m+a,StrongEaseOut:(m,a,u,d)=>u*((m=m/d-1)*m*m*m*m+1)+a,StrongEaseInOut:(m,a,u,d)=>(m/=d/2)<1?u/2*m*m*m*m*m+a:u/2*((m-=2)*m*m*m*m+2)+a,Linear:(m,a,u,d)=>u*m/d+a},ir=x._assign(y,{Util:x,Transform:D,Node:de,Container:Fe,Stage:vl,stages:ml,Layer:hi,FastLayer:sh,Group:oh,DD:oe,Shape:ie,shapes:yo,Animation:In,Tween:et,Easings:wo,Context:X,Canvas:J});var XC=o(918),um=o.n(XC),JC=o(303),ZC=o.n(JC);class zn extends ie{constructor(a){super(a),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const a=this.image();a&&a.complete||a&&a.readyState===4||a&&a.addEventListener&&a.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(a){const u=this.getWidth(),d=this.getHeight(),p=this.attrs.image;let S;if(p){const w=this.attrs.cropWidth,_=this.attrs.cropHeight;S=w&&_?[p,this.cropX(),this.cropY(),w,_,0,0,u,d]:[p,0,0,u,d]}(this.hasFill()||this.hasStroke())&&(a.beginPath(),a.rect(0,0,u,d),a.closePath(),a.fillStrokeShape(this)),p&&a.drawImage.apply(a,S)}_hitFunc(a){var u=this.width(),d=this.height();a.beginPath(),a.rect(0,0,u,d),a.closePath(),a.fillStrokeShape(this)}getWidth(){var a,u;return(a=this.attrs.width)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.width}getHeight(){var a,u;return(a=this.attrs.height)!==null&&a!==void 0?a:(u=this.image())===null||u===void 0?void 0:u.height}static fromURL(a,u,d=null){var p=x.createImageElement();p.onload=function(){var S=new zn({image:p});u(S)},p.onerror=d,p.crossOrigin="Anonymous",p.src=a}}zn.prototype.className="Image",k(zn),P.addGetterSetter(zn,"image"),P.addComponentsGetterSetter(zn,"crop",["x","y","width","height"]),P.addGetterSetter(zn,"cropX",0,A()),P.addGetterSetter(zn,"cropY",0,A()),P.addGetterSetter(zn,"cropWidth",0,A()),P.addGetterSetter(zn,"cropHeight",0,A());class So extends ie{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}}So.prototype._centroid=!0,So.prototype.className="Circle",So.prototype._attrsAffectingSize=["radius"],k(So),P.addGetterSetter(So,"radius",0,A());class lh extends ie{_sceneFunc(a){var u=this.cornerRadius(),d=this.width(),p=this.height();if(a.beginPath(),u){let S=0,w=0,_=0,b=0;typeof u=="number"?S=w=_=b=Math.min(u,d/2,p/2):(S=Math.min(u[0]||0,d/2,p/2),w=Math.min(u[1]||0,d/2,p/2),b=Math.min(u[2]||0,d/2,p/2),_=Math.min(u[3]||0,d/2,p/2)),a.moveTo(S,0),a.lineTo(d-w,0),a.arc(d-w,w,w,3*Math.PI/2,0,!1),a.lineTo(d,p-b),a.arc(d-b,p-b,b,0,Math.PI/2,!1),a.lineTo(_,p),a.arc(_,p-_,_,Math.PI/2,Math.PI,!1),a.lineTo(0,S),a.arc(S,S,S,Math.PI,3*Math.PI/2,!1)}else a.rect(0,0,d,p);a.closePath(),a.fillStrokeShape(this)}}lh.prototype.className="Rect",k(lh),P.addGetterSetter(lh,"cornerRadius",0,function(m){if(y.isUnminified)return function(a,u){let d=x._isNumber(a),p=x._isArray(a)&&a.length==4;return d||p||x.warn(M(a)+' is a not valid value for "'+u+'" attribute. The value should be a number or Array<number>(4)'),a}}());class Gt extends ie{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this.dataArray=Gt.parsePathData(this.data()),this.pathLength=0;for(var u=0;u<this.dataArray.length;++u)this.pathLength+=this.dataArray[u].pathLength;this.on("dataChange.konva",function(){this.dataArray=Gt.parsePathData(this.data()),this.pathLength=0;for(var d=0;d<this.dataArray.length;++d)this.pathLength+=this.dataArray[d].pathLength})}_sceneFunc(a){var u=this.dataArray;a.beginPath();for(var d=!1,p=0;p<u.length;p++){var S=u[p].command,w=u[p].points;switch(S){case"L":a.lineTo(w[0],w[1]);break;case"M":a.moveTo(w[0],w[1]);break;case"C":a.bezierCurveTo(w[0],w[1],w[2],w[3],w[4],w[5]);break;case"Q":a.quadraticCurveTo(w[0],w[1],w[2],w[3]);break;case"A":var _=w[0],b=w[1],N=w[2],j=w[3],q=w[4],Z=w[5],ne=w[6],Y=w[7],le=N>j?N:j,Ue=N>j?1:N/j,vt=N>j?j/N:1;a.translate(_,b),a.rotate(ne),a.scale(Ue,vt),a.arc(0,0,le,q,q+Z,1-Y),a.scale(1/Ue,1/vt),a.rotate(-ne),a.translate(-_,-b);break;case"z":d=!0,a.closePath()}}d||this.hasFill()?a.fillStrokeShape(this):a.strokeShape(this)}getSelfRect(){var a=[];this.dataArray.forEach(function(N){if(N.command==="A"){var j=N.points[4],q=N.points[5],Z=N.points[4]+q,ne=Math.PI/180;if(Math.abs(j-Z)<ne&&(ne=Math.abs(j-Z)),q<0)for(let Y=j-ne;Y>Z;Y-=ne){const le=Gt.getPointOnEllipticalArc(N.points[0],N.points[1],N.points[2],N.points[3],Y,0);a.push(le.x,le.y)}else for(let Y=j+ne;Y<Z;Y+=ne){const le=Gt.getPointOnEllipticalArc(N.points[0],N.points[1],N.points[2],N.points[3],Y,0);a.push(le.x,le.y)}}else if(N.command==="C")for(let Y=0;Y<=1;Y+=.01){const le=Gt.getPointOnCubicBezier(Y,N.start.x,N.start.y,N.points[0],N.points[1],N.points[2],N.points[3],N.points[4],N.points[5]);a.push(le.x,le.y)}else a=a.concat(N.points)});for(var u,d,p=a[0],S=a[0],w=a[1],_=a[1],b=0;b<a.length/2;b++)u=a[2*b],d=a[2*b+1],isNaN(u)||(p=Math.min(p,u),S=Math.max(S,u)),isNaN(d)||(w=Math.min(w,d),_=Math.max(_,d));return{x:p,y:w,width:S-p,height:_-w}}getLength(){return this.pathLength}getPointAtLength(a){var u,d=0,p=this.dataArray.length;if(!p)return null;for(;d<p&&a>this.dataArray[d].pathLength;)a-=this.dataArray[d].pathLength,++d;if(d===p)return{x:(u=this.dataArray[d-1].points.slice(-2))[0],y:u[1]};if(a<.01)return{x:(u=this.dataArray[d].points.slice(0,2))[0],y:u[1]};var S=this.dataArray[d],w=S.points;switch(S.command){case"L":return Gt.getPointOnLine(a,S.start.x,S.start.y,w[0],w[1]);case"C":return Gt.getPointOnCubicBezier(a/S.pathLength,S.start.x,S.start.y,w[0],w[1],w[2],w[3],w[4],w[5]);case"Q":return Gt.getPointOnQuadraticBezier(a/S.pathLength,S.start.x,S.start.y,w[0],w[1],w[2],w[3]);case"A":var _=w[0],b=w[1],N=w[2],j=w[3],q=w[4],Z=w[5],ne=w[6];return q+=Z*a/S.pathLength,Gt.getPointOnEllipticalArc(_,b,N,j,q,ne)}return null}static getLineLength(a,u,d,p){return Math.sqrt((d-a)*(d-a)+(p-u)*(p-u))}static getPointOnLine(a,u,d,p,S,w,_){w===void 0&&(w=u),_===void 0&&(_=d);var b=(S-d)/(p-u+1e-8),N=Math.sqrt(a*a/(1+b*b));p<u&&(N*=-1);var j,q=b*N;if(p===u)j={x:w,y:_+q};else if((_-d)/(w-u+1e-8)===b)j={x:w+N,y:_+q};else{var Z,ne,Y=this.getLineLength(u,d,p,S),le=(w-u)*(p-u)+(_-d)*(S-d);Z=u+(le/=Y*Y)*(p-u),ne=d+le*(S-d);var Ue=this.getLineLength(w,_,Z,ne),vt=Math.sqrt(a*a-Ue*Ue);N=Math.sqrt(vt*vt/(1+b*b)),p<u&&(N*=-1),j={x:Z+N,y:ne+(q=b*N)}}return j}static getPointOnCubicBezier(a,u,d,p,S,w,_,b,N){function j(Y){return Y*Y*Y}function q(Y){return 3*Y*Y*(1-Y)}function Z(Y){return 3*Y*(1-Y)*(1-Y)}function ne(Y){return(1-Y)*(1-Y)*(1-Y)}return{x:b*j(a)+w*q(a)+p*Z(a)+u*ne(a),y:N*j(a)+_*q(a)+S*Z(a)+d*ne(a)}}static getPointOnQuadraticBezier(a,u,d,p,S,w,_){function b(q){return q*q}function N(q){return 2*q*(1-q)}function j(q){return(1-q)*(1-q)}return{x:w*b(a)+p*N(a)+u*j(a),y:_*b(a)+S*N(a)+d*j(a)}}static getPointOnEllipticalArc(a,u,d,p,S,w){var _=Math.cos(w),b=Math.sin(w),N=d*Math.cos(S),j=p*Math.sin(S);return{x:a+(N*_-j*b),y:u+(N*b+j*_)}}static parsePathData(a){if(!a)return[];var u=a,d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];u=u.replace(new RegExp(" ","g"),",");for(var p=0;p<d.length;p++)u=u.replace(new RegExp(d[p],"g"),"|"+d[p]);var S,w=u.split("|"),_=[],b=[],N=0,j=0,q=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(p=1;p<w.length;p++){var Z=w[p],ne=Z.charAt(0);for(Z=Z.slice(1),b.length=0;S=q.exec(Z);)b.push(S[0]);for(var Y=[],le=0,Ue=b.length;le<Ue;le++)if(b[le]!=="00"){var vt=parseFloat(b[le]);isNaN(vt)?Y.push(0):Y.push(vt)}else Y.push(0,0);for(;Y.length>0&&!isNaN(Y[0]);){var tt,ot,nt,Gn,sr,bn,An,Mt,at,me,Te=null,Ie=[],di=N,wl=j;switch(ne){case"l":N+=Y.shift(),j+=Y.shift(),Te="L",Ie.push(N,j);break;case"L":N=Y.shift(),j=Y.shift(),Ie.push(N,j);break;case"m":var Sl=Y.shift(),_o=Y.shift();if(N+=Sl,j+=_o,Te="M",_.length>2&&_[_.length-1].command==="z"){for(var fi=_.length-2;fi>=0;fi--)if(_[fi].command==="M"){N=_[fi].points[0]+Sl,j=_[fi].points[1]+_o;break}}Ie.push(N,j),ne="l";break;case"M":N=Y.shift(),j=Y.shift(),Te="M",Ie.push(N,j),ne="L";break;case"h":N+=Y.shift(),Te="L",Ie.push(N,j);break;case"H":N=Y.shift(),Te="L",Ie.push(N,j);break;case"v":j+=Y.shift(),Te="L",Ie.push(N,j);break;case"V":j=Y.shift(),Te="L",Ie.push(N,j);break;case"C":Ie.push(Y.shift(),Y.shift(),Y.shift(),Y.shift()),N=Y.shift(),j=Y.shift(),Ie.push(N,j);break;case"c":Ie.push(N+Y.shift(),j+Y.shift(),N+Y.shift(),j+Y.shift()),N+=Y.shift(),j+=Y.shift(),Te="C",Ie.push(N,j);break;case"S":ot=N,nt=j,(tt=_[_.length-1]).command==="C"&&(ot=N+(N-tt.points[2]),nt=j+(j-tt.points[3])),Ie.push(ot,nt,Y.shift(),Y.shift()),N=Y.shift(),j=Y.shift(),Te="C",Ie.push(N,j);break;case"s":ot=N,nt=j,(tt=_[_.length-1]).command==="C"&&(ot=N+(N-tt.points[2]),nt=j+(j-tt.points[3])),Ie.push(ot,nt,N+Y.shift(),j+Y.shift()),N+=Y.shift(),j+=Y.shift(),Te="C",Ie.push(N,j);break;case"Q":Ie.push(Y.shift(),Y.shift()),N=Y.shift(),j=Y.shift(),Ie.push(N,j);break;case"q":Ie.push(N+Y.shift(),j+Y.shift()),N+=Y.shift(),j+=Y.shift(),Te="Q",Ie.push(N,j);break;case"T":ot=N,nt=j,(tt=_[_.length-1]).command==="Q"&&(ot=N+(N-tt.points[0]),nt=j+(j-tt.points[1])),N=Y.shift(),j=Y.shift(),Te="Q",Ie.push(ot,nt,N,j);break;case"t":ot=N,nt=j,(tt=_[_.length-1]).command==="Q"&&(ot=N+(N-tt.points[0]),nt=j+(j-tt.points[1])),N+=Y.shift(),j+=Y.shift(),Te="Q",Ie.push(ot,nt,N,j);break;case"A":Gn=Y.shift(),sr=Y.shift(),bn=Y.shift(),An=Y.shift(),Mt=Y.shift(),at=N,me=j,N=Y.shift(),j=Y.shift(),Te="A",Ie=this.convertEndpointToCenterParameterization(at,me,N,j,An,Mt,Gn,sr,bn);break;case"a":Gn=Y.shift(),sr=Y.shift(),bn=Y.shift(),An=Y.shift(),Mt=Y.shift(),at=N,me=j,N+=Y.shift(),j+=Y.shift(),Te="A",Ie=this.convertEndpointToCenterParameterization(at,me,N,j,An,Mt,Gn,sr,bn)}_.push({command:Te||ne,points:Ie,start:{x:di,y:wl},pathLength:this.calcLength(di,wl,Te||ne,Ie)})}ne!=="z"&&ne!=="Z"||_.push({command:"z",points:[],start:void 0,pathLength:0})}return _}static calcLength(a,u,d,p){var S,w,_,b,N=Gt;switch(d){case"L":return N.getLineLength(a,u,p[0],p[1]);case"C":for(S=0,w=N.getPointOnCubicBezier(0,a,u,p[0],p[1],p[2],p[3],p[4],p[5]),b=.01;b<=1;b+=.01)_=N.getPointOnCubicBezier(b,a,u,p[0],p[1],p[2],p[3],p[4],p[5]),S+=N.getLineLength(w.x,w.y,_.x,_.y),w=_;return S;case"Q":for(S=0,w=N.getPointOnQuadraticBezier(0,a,u,p[0],p[1],p[2],p[3]),b=.01;b<=1;b+=.01)_=N.getPointOnQuadraticBezier(b,a,u,p[0],p[1],p[2],p[3]),S+=N.getLineLength(w.x,w.y,_.x,_.y),w=_;return S;case"A":S=0;var j=p[4],q=p[5],Z=p[4]+q,ne=Math.PI/180;if(Math.abs(j-Z)<ne&&(ne=Math.abs(j-Z)),w=N.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],j,0),q<0)for(b=j-ne;b>Z;b-=ne)_=N.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),S+=N.getLineLength(w.x,w.y,_.x,_.y),w=_;else for(b=j+ne;b<Z;b+=ne)_=N.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),S+=N.getLineLength(w.x,w.y,_.x,_.y),w=_;return _=N.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],Z,0),S+N.getLineLength(w.x,w.y,_.x,_.y)}return 0}static convertEndpointToCenterParameterization(a,u,d,p,S,w,_,b,N){var j=N*(Math.PI/180),q=Math.cos(j)*(a-d)/2+Math.sin(j)*(u-p)/2,Z=-1*Math.sin(j)*(a-d)/2+Math.cos(j)*(u-p)/2,ne=q*q/(_*_)+Z*Z/(b*b);ne>1&&(_*=Math.sqrt(ne),b*=Math.sqrt(ne));var Y=Math.sqrt((_*_*(b*b)-_*_*(Z*Z)-b*b*(q*q))/(_*_*(Z*Z)+b*b*(q*q)));S===w&&(Y*=-1),isNaN(Y)&&(Y=0);var le=Y*_*Z/b,Ue=Y*-b*q/_,vt=(a+d)/2+Math.cos(j)*le-Math.sin(j)*Ue,tt=(u+p)/2+Math.sin(j)*le+Math.cos(j)*Ue,ot=function(at){return Math.sqrt(at[0]*at[0]+at[1]*at[1])},nt=function(at,me){return(at[0]*me[0]+at[1]*me[1])/(ot(at)*ot(me))},Gn=function(at,me){return(at[0]*me[1]<at[1]*me[0]?-1:1)*Math.acos(nt(at,me))},sr=Gn([1,0],[(q-le)/_,(Z-Ue)/b]),bn=[(q-le)/_,(Z-Ue)/b],An=[(-1*q-le)/_,(-1*Z-Ue)/b],Mt=Gn(bn,An);return nt(bn,An)<=-1&&(Mt=Math.PI),nt(bn,An)>=1&&(Mt=0),w===0&&Mt>0&&(Mt-=2*Math.PI),w===1&&Mt<0&&(Mt+=2*Math.PI),[vt,tt,_,b,sr,Mt,j,w]}}function cm(m){return(cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(m)}function hm(m,a){var u=Object.keys(m);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(m);a&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(m,p).enumerable})),u.push.apply(u,d)}return u}function yl(m){for(var a=1;a<arguments.length;a++){var u=arguments[a]!=null?arguments[a]:{};a%2?hm(Object(u),!0).forEach(function(d){fm(m,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(u)):hm(Object(u)).forEach(function(d){Object.defineProperty(m,d,Object.getOwnPropertyDescriptor(u,d))})}return m}function eE(m,a){for(var u=0;u<a.length;u++){var d=a[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}function dm(m,a){return(dm=Object.setPrototypeOf||function(u,d){return u.__proto__=d,u})(m,a)}function tE(m,a){return!a||cm(a)!=="object"&&typeof a!="function"?uh(m):a}function uh(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function ch(m){return(ch=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(m)}function fm(m,a,u){return a in m?Object.defineProperty(m,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[a]=u,m}Gt.prototype.className="Path",Gt.prototype._attrsAffectingSize=["data"],k(Gt),P.addGetterSetter(Gt,"data");var pm=function(m){(function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(b&&b.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),b&&dm(_,b)})(w,m);var a,u,d,p,S=(d=w,p=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}(),function(){var _,b=ch(d);if(p){var N=ch(this).constructor;_=Reflect.construct(b,arguments,N)}else _=b.apply(this,arguments);return tE(this,_)});function w(_){var b;(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,w);var N=(b=S.call(this,_)).generateHash("avatar_container"),j=b.generateHash("avatar_loader");return b.onFileLoad=b.onFileLoad.bind(uh(b)),b.onCloseClick=b.onCloseClick.bind(uh(b)),b.state={imgWidth:0,imgHeight:0,scale:1,containerId:N,loaderId:j,lastMouseY:0,showLoader:!(b.props.src||b.props.img)},b}return a=w,(u=[{key:"generateHash",value:function(_){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return _+"-"+b()+"-"+b()+"-"+b()}},{key:"onCloseCallback",value:function(){this.props.onClose()}},{key:"onCropCallback",value:function(_){this.props.onCrop(_)}},{key:"onFileLoadCallback",value:function(_){this.props.onFileLoad(_)}},{key:"onBeforeFileLoadCallback",value:function(_){this.props.onBeforeFileLoad(_)}},{key:"onImageLoadCallback",value:function(_){this.props.onImageLoad(_)}},{key:"componentDidMount",value:function(){var _=this;if(!this.state.showLoader){var b=this.props.img||new Image;b.crossOrigin="Anonymous",!this.props.img&&this.props.src&&(b.src=this.props.src),this.setState({image:b},function(){if(_.image.complete)return _.init();_.image.onload=function(){_.onImageLoadCallback(_.image),_.init()}})}}},{key:"componentDidUpdate",value:function(_,b){_.src!==this.props.src&&(this.image.src=this.props.src)}},{key:"onFileLoad",value:function(_){if(_.preventDefault(),this.onBeforeFileLoadCallback(_),_.target.value){var b=_.target.files[0];this.onFileLoadCallback(b);var N=this;um().getData(b,function(){var j=um().getTag(this,"Orientation");ZC()(b,function(q,Z){N.setState({image:q,file:b,showLoader:!1},function(){N.init()})},{orientation:j,meta:!0})})}}},{key:"onCloseClick",value:function(){var _=this;this.setState({showLoader:!0},function(){return _.onCloseCallback()})}},{key:"init",value:function(){var _,b,N=this.props,j=N.height,q=N.minCropRadius,Z=N.cropRadius,ne=this.image.width,Y=this.image.height,le=Y/ne,Ue=this.props,vt=Ue.imageWidth,tt=Ue.imageHeight;tt&&vt&&console.warn("The imageWidth and imageHeight properties can not be set together, using only imageWidth."),tt&&!vt?b=(_=tt||Y)/le:vt?_=(b=vt)*le||Y:b=(_=j||Y)/le;var ot=_/Y,nt=Math.max(q,Z||Math.min(b,_)/3);this.setState({imgWidth:b,imgHeight:_,scale:ot,cropRadius:nt},this.initCanvas)}},{key:"initCanvas",value:function(){var _=this,b=this.initStage(),N=this.initBackground(),j=this.initShading(),q=this.initCrop(),Z=this.initCropStroke(),ne=this.initResize(),Y=this.initResizeIcon(),le=new ir.Layer;le.add(N),le.add(j),le.add(Z),le.add(q),le.add(ne),le.add(Y),b.add(le);var Ue=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return q.radius()-me},vt=function(me){return q.x()-Ue(me)<0},tt=function(me){return q.y()-Ue(me)<0},ot=function(me){return q.x()+Ue(me)>b.width()},nt=function(me){return q.y()+Ue(me)>b.height()},Gn=function(me){return Ue(me)>=_.minCropRadius?me:q.radius()-_.minCropRadius},sr=function(me){return me+.86*q.radius()},bn=function(me){return me-.5*q.radius()},An=function(me,Te){ne.x(sr(me)-8),ne.y(bn(Te)-8),Y.x(sr(me)-8),Y.y(bn(Te)-10)},Mt=function(){if(_.props.exportAsSquare){var me=new ir.Image({image:_.image}),Te=me.width()/N.width(),Ie=me.height()/N.height(),di=2*q.radius()*Te,wl=2*q.radius()*Ie,Sl=_.props.exportSize?_.props.exportSize/di:void 0;return me.toDataURL({x:(q.x()-q.radius())*Te,y:(q.y()-q.radius())*Ie,width:di,height:wl,pixelRatio:Sl,mimeType:_.props.exportMimeType,quality:_.props.exportQuality})}var _o=2*q.radius(),fi=2*q.radius(),rE=_.props.exportSize?_.props.exportSize/_o:void 0;return q.toDataURL({x:q.x()-q.radius(),y:q.y()-q.radius(),width:_o,height:fi,pixelRatio:rE,mimeType:_.props.exportMimeType,quality:_.props.exportQuality})},at=function(me){var Te=me>0||function(Ie){return!(vt(Ie)||ot(Ie)||nt(Ie)||tt(Ie))}(me)?me:0;Z.radius(Z.radius()-Gn(Te)),q.radius(q.radius()-Gn(Te)),ne.fire("resize")};this.onCropCallback(Mt()),q.on("dragmove",function(){return q.fire("resize")}),q.on("dragend",function(){return _.onCropCallback(Mt())}),q.on("resize",function(){var me=vt()?q.radius()+1:ot()?b.width()-q.radius()-1:q.x(),Te=tt()?q.radius()+1:nt()?b.height()-q.radius()-1:q.y();An(me,Te),q.setFillPatternOffset({x:me/_.scale,y:Te/_.scale}),q.x(me),Z.x(me),q.y(Te),Z.y(Te)}),q.on("mouseenter",function(){return b.container().style.cursor="move"}),q.on("mouseleave",function(){return b.container().style.cursor="default"}),q.on("dragstart",function(){return b.container().style.cursor="move"}),q.on("dragend",function(){return b.container().style.cursor="default"}),ne.on("touchstart",function(me){ne.on("dragmove",function(Te){if(Te.evt.type==="touchmove"){var Ie=Te.evt.changedTouches[0].pageY-me.evt.changedTouches[0].pageY||0;at(Ie*_.mobileScaleSpeed)}})}),ne.on("dragmove",function(me){if(me.evt.type!=="touchmove"){var Te=me.evt.y,Ie=Te?Te-_.state.lastMouseY:void 0,di=me.evt.movementY||Ie||0;_.setState({lastMouseY:Te}),at(di)}}),ne.on("dragend",function(){return _.onCropCallback(Mt())}),ne.on("resize",function(){return An(q.x(),q.y())}),ne.on("mouseenter",function(){return b.container().style.cursor="nesw-resize"}),ne.on("mouseleave",function(){return b.container().style.cursor="default"}),ne.on("dragstart",function(me){_.setState({lastMouseY:me.evt.y}),b.container().style.cursor="nesw-resize"}),ne.on("dragend",function(){return b.container().style.cursor="default"})}},{key:"initStage",value:function(){return new ir.Stage({container:this.containerId,width:this.width,height:this.height})}},{key:"initBackground",value:function(){return new ir.Image({x:0,y:0,width:this.width,height:this.height,image:this.image})}},{key:"initShading",value:function(){return new ir.Rect({x:0,y:0,width:this.width,height:this.height,fill:this.shadingColor,strokeWidth:4,opacity:this.shadingOpacity})}},{key:"initCrop",value:function(){return new ir.Circle({x:this.halfWidth,y:this.halfHeight,radius:this.cropRadius,fillPatternImage:this.image,fillPatternOffset:{x:this.halfWidth/this.scale,y:this.halfHeight/this.scale},fillPatternScale:{x:this.scale,y:this.scale},opacity:1,draggable:!0,dashEnabled:!0,dash:[10,5]})}},{key:"initCropStroke",value:function(){return new ir.Circle({x:this.halfWidth,y:this.halfHeight,radius:this.cropRadius,stroke:this.cropColor,strokeWidth:this.lineWidth,strokeScaleEnabled:!0,dashEnabled:!0,dash:[10,5]})}},{key:"initResize",value:function(){return new ir.Rect({x:this.halfWidth+.86*this.cropRadius-8,y:this.halfHeight+-.5*this.cropRadius-8,width:16,height:16,draggable:!0,dragBoundFunc:function(_){return{x:this.getAbsolutePosition().x,y:_.y}}})}},{key:"initResizeIcon",value:function(){return new ir.Path({x:this.halfWidth+.86*this.cropRadius-8,y:this.halfHeight+-.5*this.cropRadius-10,data:"M47.624,0.124l12.021,9.73L44.5,24.5l10,10l14.661-15.161l9.963,12.285v-31.5H47.624z M24.5,44.5   L9.847,59.653L0,47.5V79h31.5l-12.153-9.847L34.5,54.5L24.5,44.5z",fill:this.cropColor,scale:{x:.2,y:.2}})}},{key:"render",value:function(){var _=this,b=this.props,N=b.width,j=b.height,q={display:"flex",justifyContent:"center",backgroundColor:this.backgroundColor,width:N||this.width,position:"relative"},Z=this.props.label,ne=yl(yl({},this.props.labelStyle),{lineHeight:(j||200)+"px"}),Y=yl(yl({},this.props.borderStyle),{width:N||200,height:j||200});return h().createElement("div",null,this.state.showLoader?h().createElement("div",{style:Y},h().createElement("input",{onChange:function(le){return _.onFileLoad(le)},name:this.loaderId,type:"file",id:this.loaderId,style:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},accept:this.mimeTypes}),h().createElement("label",{htmlFor:this.loaderId,style:ne},Z)):h().createElement("div",{style:q},h().createElement("svg",{onClick:this.onCloseClick,style:{position:"absolute",zIndex:999,cursor:"pointer",left:"10px",top:"10px"},viewBox:"0 0 475.2 475.2",width:"20px",height:"20px"},h().createElement("g",null,h().createElement("path",{d:"M405.6,69.6C360.7,24.7,301.1,0,237.6,0s-123.1,24.7-168,69.6S0,174.1,0,237.6s24.7,123.1,69.6,168s104.5,69.6,168,69.6    s123.1-24.7,168-69.6s69.6-104.5,69.6-168S450.5,114.5,405.6,69.6z M386.5,386.5c-39.8,39.8-92.7,61.7-148.9,61.7    s-109.1-21.9-148.9-61.7c-82.1-82.1-82.1-215.7,0-297.8C128.5,48.9,181.4,27,237.6,27s109.1,21.9,148.9,61.7    C468.6,170.8,468.6,304.4,386.5,386.5z",fill:this.closeIconColor}),h().createElement("path",{d:"M342.3,132.9c-5.3-5.3-13.8-5.3-19.1,0l-85.6,85.6L152,132.9c-5.3-5.3-13.8-5.3-19.1,0c-5.3,5.3-5.3,13.8,0,19.1    l85.6,85.6l-85.6,85.6c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4l85.6-85.6l85.6,85.6c2.6,2.6,6.1,4,9.5,4    c3.5,0,6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1l-85.4-85.6l85.6-85.6C347.6,146.7,347.6,138.2,342.3,132.9z",fill:this.closeIconColor}))),h().createElement("div",{id:this.containerId})))}},{key:"lineWidth",get:function(){return this.props.lineWidth}},{key:"containerId",get:function(){return this.state.containerId}},{key:"closeIconColor",get:function(){return this.props.closeIconColor}},{key:"cropColor",get:function(){return this.props.cropColor}},{key:"loaderId",get:function(){return this.state.loaderId}},{key:"mimeTypes",get:function(){return this.props.mimeTypes}},{key:"backgroundColor",get:function(){return this.props.backgroundColor}},{key:"shadingColor",get:function(){return this.props.shadingColor}},{key:"shadingOpacity",get:function(){return this.props.shadingOpacity}},{key:"mobileScaleSpeed",get:function(){return this.props.mobileScaleSpeed}},{key:"cropRadius",get:function(){return this.state.cropRadius}},{key:"minCropRadius",get:function(){return this.props.minCropRadius}},{key:"scale",get:function(){return this.state.scale}},{key:"width",get:function(){return this.state.imgWidth}},{key:"halfWidth",get:function(){return this.state.imgWidth/2}},{key:"height",get:function(){return this.state.imgHeight}},{key:"halfHeight",get:function(){return this.state.imgHeight/2}},{key:"image",get:function(){return this.state.image}}])&&eE(a.prototype,u),w}(h().Component);fm(pm,"defaultProps",{shadingColor:"grey",shadingOpacity:.6,cropColor:"white",closeIconColor:"white",lineWidth:4,minCropRadius:30,backgroundColor:"grey",mimeTypes:"image/jpeg,image/png",exportAsSquare:!1,exportSize:void 0,exportMimeType:"image/png",exportQuality:1,mobileScaleSpeed:.5,onClose:function(){},onCrop:function(){},onFileLoad:function(){},onImageLoad:function(){},onBeforeFileLoad:function(){},label:"Choose a file",labelStyle:{fontSize:"1.25em",fontWeight:"700",color:"black",display:"inline-block",fontFamily:"sans-serif",cursor:"pointer"},borderStyle:{border:"2px solid #979797",borderStyle:"dashed",borderRadius:"8px",textAlign:"center"}});const nE=pm})(),l})()})})(HC);var sL=HC.exports;const oL=a0(sL);function aL(){var ui,ts,de;const{user:t,upload:e,createOffer:r,deleteOffer:i}=Bn(),[s,o]=W.useState(""),[l,c]=W.useState(""),[h,f]=W.useState(""),[v,y]=W.useState(""),[k,D]=W.useState(null),[I,L]=W.useState(!1),[O,C]=W.useState(),[E,T]=W.useState(Kr),[R,x]=W.useState(""),[M,A]=W.useState(""),[$,K]=W.useState(),[V,B]=W.useState(),U=Ze(be,"users"),P=Yt(U,bt("email","==",`${t==null?void 0:t.email}`)),Q=Yt(Ze(be,"offers"),bt("authorId","==",`${(ui=ve.currentUser)==null?void 0:ui.uid}`)),z=Yt(Ze(be,"reviews"),bt("resId","==",`${(ts=ve==null?void 0:ve.currentUser)==null?void 0:ts.uid}`)),[H,X]=W.useState(),[F,G]=W.useState(),[J,te]=W.useState(0),ae=Fn(),oe=It(be,"users",`${O}`),Se=(de=t==null?void 0:t.displayName)==null?void 0:de.split(" ")[0],[xe,Ee]=W.useState(!1),[Pe,st]=W.useState(!1),[xt,$n]=W.useState(!1),[tn,Er]=W.useState();W.useState(),W.useEffect(()=>{ct(Q,ue=>{K(ue.docs)}),ct(z,ue=>{B(ue.docs)}),ct(P,ue=>{ue.docs.forEach(Fe=>{o(Fe.data().bio),c(Fe.data().messanger),f(Fe.data().instagram),C(Fe.id),y(Fe.data().phoneNumber),X(Fe.data().deals),G(Fe.data().stars)})}),t!=null&&t.photoURL&&T(t.photoURL)},[t]),W.useEffect(()=>{te(0),V==null||V.forEach(ue=>{(ue==null?void 0:ue.data().content)!=null&&te(Fe=>Fe+1)})});const nr=ue=>{ue.preventDefault(),document.getElementById("my-text").value="",document.getElementById("price").value="",document.getElementById("price").blur(),r(t.displayName,v,R,M,E),x(""),Ee(!0),setTimeout(()=>{Ee(!1)},1500)},es=()=>{e(tn,t,L,oe)};console.log(tn);const hn=$==null?void 0:$.map(ue=>g.jsxs("div",{className:"offer",children:[g.jsxs("div",{className:"offer-top",children:[g.jsxs("div",{className:"offer-user-info",children:[g.jsx("img",{src:E,alt:""}),g.jsxs("div",{children:[t.displayName.length>=10?g.jsxs("h3",{children:[t.displayName.substr(0,10),"..."]}):g.jsx("h3",{children:t.displayName}),g.jsx("div",{className:"phoneNumber",children:v=="Not available"?g.jsx("h2",{children:"   "}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"+216"}),g.jsx("h2",{children:v.substr(0,2)}),g.jsx("h2",{children:v.substr(2,3)}),g.jsx("h2",{children:v.substr(5,5)})]})})]})]}),g.jsx("span",{className:"material-symbols-sharp",onClick:()=>{i(ue.id),ae("/profile"),st(!0),setTimeout(()=>{st(!1)},1500)},children:"delete"})]}),g.jsx("div",{className:"offer-content",children:g.jsx("h3",{children:ue.data().content})}),g.jsx("div",{className:"offer-footer",children:g.jsxs("h4",{children:["STARTING AT ",g.jsxs("span",{children:[ue.data().price,"DT"]})]})})]},ue.id)),li=V==null?void 0:V.map(ue=>ue.data().content!=null&&g.jsxs("div",{className:"review",children:[g.jsx("img",{src:ue.data().senderPhoto?ue.data().senderPhoto:Kr,alt:""}),g.jsxs("div",{className:"deals",children:[g.jsxs("h3",{children:[ue.data().deals,"x"]}),g.jsx("i",{className:"fa-regular fa-handshake fa-xl"})]}),g.jsx("h2",{className:"senderName",children:ue.data().senderName}),g.jsx("h2",{className:"review-content",children:ue.data().content}),g.jsx("div",{className:"stars",children:[...Array(5)].map((Fe,rr)=>{const ci=rr+1;return g.jsx("label",{children:g.jsx(Nf,{className:"star",size:25,color:ci<=ue.data().rate?"#ffc107":"#e4e5e9"})})})})]},ue.id));return g.jsxs("div",{children:[g.jsx(Hg,{}),g.jsxs("div",{className:"popups",children:[xe&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"You added an offer"})}),Pe&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you delete something"})})]}),g.jsxs("div",{className:"profile",children:[g.jsxs("div",{className:"fields",children:[g.jsxs("div",{className:"photo-section",children:[g.jsx("button",{className:"photo-button",children:xt?g.jsx("span",{class:"material-symbols-outlined",onClick:()=>{$n(!1),D(!1),Er(!1)},children:"close"}):g.jsx("span",{className:"material-symbols-outlined",onClick:()=>{$n(!0)},children:"edit"})}),g.jsxs("div",{className:"profile-deals",children:[g.jsx("i",{className:"fa-regular fa-handshake fa-xl"}),g.jsx("h3",{children:t&&H?H:"0"})]}),g.jsxs("div",{className:"profile-rate",children:[g.jsx("i",{className:"fa-solid fa-star fa-xl"}),g.jsx("h3",{children:t&&F/H?(F/H).toFixed(1):"0"})]}),g.jsx("img",{src:tn||E})]}),g.jsxs("div",{children:[k&&!tn&&g.jsx("h3",{className:"photo-error",children:"something is wrong with this photo try another one"}),k&&tn&&g.jsx("div",{className:"photo-buttons",children:I?g.jsx("button",{children:g.jsx("i",{className:"fa fa-spinner fa-spin"})}):g.jsx("button",{disabled:I||!k,hidden:!k,onClick:es,children:g.jsx("span",{class:"material-symbols-outlined",children:"check"})})}),xt&&g.jsx("div",{className:"photo-editor",children:g.jsx(oL,{width:280,height:280,onFileLoad:ue=>{D(ue&&ue)},onCrop:ue=>{Er(ue)},onClose:()=>{Er(),D()},mimeTypes:"image/jpeg",cropColor:"#333C41",shadingColor:"#333C41",shadingOpacity:.5,label:"Choose a photo"})})]}),g.jsx("h5",{className:"name",children:t&&t.displayName}),g.jsx("div",{className:"phoneNumber",children:v=="Not available"?g.jsx("h2",{children:"Not available"}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"+216"}),g.jsx("h2",{children:v.substr(0,2)}),g.jsx("h2",{children:v.substr(2,3)}),g.jsx("h2",{children:v.substr(5,5)})]})}),g.jsx("div",{className:"bio",children:t&&s}),g.jsxs("form",{className:"offer-form",onSubmit:nr,children:[g.jsxs("div",{className:"offer-box",children:[g.jsx("textarea",{onChange:ue=>{x(ue.target.value)},id:"my-text",required:!0,maxLength:100}),g.jsxs("p",{className:"letter-counter",children:[R.length,"/100"]}),g.jsxs("div",{className:"offer-placeholder",children:[g.jsx("img",{src:qg,alt:""}),g.jsx("h3",{children:"The offer"})]})]}),g.jsxs("div",{className:"offer-box",children:[g.jsx("input",{type:"text",onChange:ue=>{A(ue.target.value)},pattern:"[0-9 ]+",maxLength:"5",min:"0",required:!0,id:"price"}),g.jsxs("div",{className:"offer-placeholder",children:[g.jsx("img",{src:Wg,alt:""}),g.jsx("h3",{children:"The starting Price"})]}),g.jsx("button",{children:"Add"})]})]}),g.jsxs("div",{className:"info-box",children:[g.jsxs("div",{className:"info",children:[g.jsx("img",{src:zC,alt:"",href:t&&t.email}),g.jsx("h3",{children:t&&t.email})]}),g.jsx("div",{className:"info",children:l=="Not available"?g.jsxs("div",{className:"not-avai",children:[g.jsx("img",{src:Ds,alt:""}),g.jsx("h3",{children:"Not available"})]}):g.jsxs("a",{href:t&&l,target:"_blank",children:[g.jsx("img",{src:Ds,alt:""}),g.jsxs("div",{children:[g.jsx("h3",{children:t&&l}),g.jsx("h3",{children:"..."})]})]})}),g.jsx("div",{className:"info",children:h=="Not available"?g.jsxs("div",{className:"not-avai",children:[g.jsx("img",{src:Ds,alt:""}),g.jsx("h3",{children:"Not available"})]}):g.jsxs("a",{href:t&&h,target:"_blank",children:[g.jsx("img",{src:GC,alt:""}),g.jsxs("div",{children:[g.jsx("h3",{children:t&&h}),g.jsx("h3",{children:"..."})]})]})})]})]}),g.jsxs("div",{className:"offers-display",id:"offers-display",children:[g.jsxs("div",{className:"offers-section-title",children:[g.jsx("img",{src:VC,alt:""}),g.jsxs("h3",{children:[Se,"'s offers"]})]}),g.jsx("div",{className:"offers-section",children:hn})]}),g.jsxs("div",{className:"reviews",children:[g.jsxs("div",{className:"reviews-title",children:[g.jsx("span",{className:"material-symbols-outlined",children:"history_edu"}),g.jsxs("h2",{children:["Reviews: (",J,")"]})]}),g.jsx("div",{className:"reviews-content",children:li})]})]})]})}function lL(){const[t,e]=W.useState(""),[r,i]=W.useState(""),[s,o]=W.useState(""),{signIn:l}=Bn(),c=Fn(),h=async f=>{f.preventDefault(),o("");try{await l(t,r),c("/profile")}catch(v){o(v.message),console.log(v.message)}};return g.jsx("div",{className:"auth",children:g.jsxs("form",{onSubmit:h,className:"form",children:[s&&g.jsx("p",{id:"error",hidden:!s,children:"Invalid Email or password."}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:f=>{e(f.target.value)},id:"email",pattern:"/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g",placeholder:" ",required:!0}),g.jsx("span",{children:"Email"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:f=>{i(f.target.value)},type:"passowrd",id:"password",placeholder:" ",required:!0}),g.jsx("span",{children:"Password"})]}),g.jsx("button",{children:"Sign In"}),g.jsxs("p",{children:["Don't have an account? ",g.jsx("span",{className:"span",onClick:()=>{c("/signup"),scrollTo(0,0)},children:"Sign Up"})]})]})})}function uL(){const[t,e]=W.useState(""),[r,i]=W.useState(""),[s,o]=W.useState(""),[l,c]=W.useState(""),[h,f]=W.useState(""),[v,y]=W.useState(""),[k,D]=W.useState(""),[I,L]=W.useState("");W.useState();const{CreateUser:O,setUserName:C,user:E,createUserData:T}=Bn(),R=Fn(),x=async M=>{M.preventDefault(),L("");try{await O(t,r),await C(s),await T(s,t,l,h||"Not available",v||"Not available",k||"Not available",Kr,r),R("/profile")}catch(A){L(A.message)}};return g.jsx("div",{className:"auth",id:"auth",children:g.jsxs("form",{onSubmit:x,className:"form",children:[g.jsxs("div",{className:"fill",children:[g.jsxs("div",{className:"required",children:[g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:M=>{o(M.target.value)},type:"text",placeholder:" ",required:!0}),g.jsx("span",{children:"Username*"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:M=>{e(M.target.value)},pattern:"/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g",placeholder:" ",required:!0}),g.jsx("span",{children:"Email*"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:M=>{i(M.target.value)},type:"passowrd",placeholder:" ",required:!0}),g.jsx("span",{children:"Password*"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:M=>{c(M.target.value)},type:"text",placeholder:" ",required:!0}),g.jsx("span",{children:"Bio*"})]})]}),g.jsxs("div",{className:"not-required",children:[g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:M=>{D(M.target.value)},type:"tel",placeholder:" "}),g.jsx("span",{children:"Phone Number (optional)"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{type:"url",onChange:M=>{f(M.target.value)},placeholder:" "}),g.jsx("span",{children:"Facebook profile link (optional)"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{type:"url",onChange:M=>{y(M.target.value)},placeholder:" "}),g.jsx("span",{children:"Instagram profile link (optional)"})]})]})]}),g.jsx("button",{children:"Sign Up"}),g.jsxs("p",{children:["Already have an account? ",g.jsx("span",{className:"span",onClick:()=>{R("/signin"),scrollTo(0,0)},children:"Sign In"})]})]})})}function sd({children:t}){const{user:e}=Bn(),r=Fn();return W.useEffect(()=>{if(!e)return r("/signin")},[e]),t}function o0({children:t}){const{user:e}=Bn(),r=Fn();return W.useEffect(()=>{if(e)return r("/profile")},[e]),t}function cL(){var ci,ns,rs,ho,fo;const{createRequest:t,deleteRequest:e,createReview:r,user:i}=Bn(),{id:s}=oT(),[o,l]=W.useState(),[c,h]=W.useState({}),[f,v]=W.useState(""),[y,k]=W.useState(""),[D,I]=W.useState(),[L,O]=W.useState(),C=Ze(be,"users"),E=Yt(C,bt("id","==",`${s}`)),T=Yt(Ze(be,"offers"),bt("authorId","==",`${s}`));Yt(Ze(be,"requests"),bt("resId","==",`${s}`),bt("senderId","==",`${(ci=ve==null?void 0:ve.currentUser)==null?void 0:ci.uid}`));const R=Yt(Ze(be,"reviews"),bt("resId","==",`${s}`)),[x,M]=W.useState(!0),[A,$]=W.useState(),[K,V]=W.useState(),[B,U]=W.useState(),[P,Q]=W.useState(),[z,H]=W.useState(),[X,F]=W.useState(),[G,J]=W.useState([]),[te,ae]=W.useState(),[oe,Se]=W.useState(null),[xe,Ee]=W.useState(),[Pe,st]=W.useState(),[xt,$n]=W.useState(),tn=Fn(),[Er,nr]=W.useState(!1),[es,hn]=W.useState(!1),[li,ui]=W.useState(!1);W.useEffect(()=>{ct(T,Re=>{l(Re.docs)})},[i]),W.useEffect(()=>{var Re;ve.currentUser&&s==ve.currentUser.uid&&tn("/profile"),ct(Ze(be,"requests"),ft=>{ft.docs.forEach(Le=>{var Vn;Le.data().resId==s&&Le.data().senderId==((Vn=ve==null?void 0:ve.currentUser)==null?void 0:Vn.uid)&&(I(Le.data().state),O(Le.id),ae(Le.data().message))})}),ct(E,ft=>{ft.docs.forEach(Le=>{h(Le.data()),Ee(Le.data().stars),$n(Le.data().deals),st(Le.id)})}),ct(R,ft=>{J(ft.docs)}),ct(Yt(Ze(be,"reviews"),bt("senderId","==",`${(Re=ve.currentUser)==null?void 0:Re.uid}`)),ft=>{ft.docs.forEach(Le=>{M(!1),$(Le.id),V(Le.data().deals),U(Le.data().content),Q(Le.data().rate)})})},[i]);const ts=Re=>{var ft,Le;Re.preventDefault(),i?t((ft=ve.currentUser)==null?void 0:ft.uid,(Le=ve.currentUser)==null?void 0:Le.displayName,s,c==null?void 0:c.name,f,y):tn("/signin"),ui(!0),setTimeout(()=>{ui(!1)},1500)},de=Re=>{Re.preventDefault(),I(null),e(It(be,"requests",`${L}`)),r(ve.currentUser.uid,ve.currentUser.photoURL,ve.currentUser.displayName,c.id,c.name,z,X,A,x,K,P,B,xe,Pe),nr(!0),setTimeout(()=>{nr(!1)},1500)},ue=(ns=c.name)==null?void 0:ns.split(" ")[0],Fe=o==null?void 0:o.map(Re=>{var ft,Le,Vn;return g.jsxs("div",{className:"offer",children:[g.jsxs("div",{className:"offer-top",children:[g.jsx("img",{src:(c==null?void 0:c.photoURL)=="/assets/avatar-28c1f46a.png"?Kr:c.photoURL,alt:""}),g.jsxs("div",{children:[g.jsx("h3",{children:c==null?void 0:c.name}),g.jsx("div",{className:"phoneNumber",children:(c==null?void 0:c.phoneNumber)=="Not available"?g.jsx("h2",{children:"Not available"}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"+216"}),g.jsx("h2",{children:(ft=c==null?void 0:c.phoneNumber)==null?void 0:ft.substr(0,2)}),g.jsx("h2",{children:(Le=c==null?void 0:c.phoneNumber)==null?void 0:Le.substr(2,3)}),g.jsx("h2",{children:(Vn=c==null?void 0:c.phoneNumber)==null?void 0:Vn.substr(5,5)})]})})]})]}),g.jsx("div",{className:"offer-content",children:g.jsx("h3",{children:Re.data().content})}),g.jsx("div",{className:"offer-footer",children:g.jsxs("h4",{children:["STARTING AT",g.jsxs("span",{children:[Re.data().price,"DT"]})]})})]})}),rr=G==null?void 0:G.map(Re=>Re.data().content!=null&&g.jsxs("div",{className:"review",children:[g.jsx("img",{src:Re.data().senderPhoto?Re.data().senderPhoto:Kr,alt:""}),g.jsxs("div",{className:"deals",children:[g.jsxs("h3",{children:[Re.data().deals,"x"]}),g.jsx("i",{className:"fa-regular fa-handshake fa-xl"})]}),g.jsx("h2",{className:"senderName",children:Re.data().senderName}),g.jsx("h2",{className:"review-content",children:Re.data().content}),g.jsx("div",{className:"stars",children:[...Array(5)].map((ft,Le)=>{const Vn=Le+1;return g.jsx("label",{children:g.jsx(Nf,{className:"star",size:25,color:Vn<=Re.data().rate?"#ffc107":"#e4e5e9"})})})})]}));return g.jsxs("div",{children:[g.jsx(Hg,{}),g.jsxs("div",{className:"popups",children:[Er&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"review added"})}),es&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you canceled something"})}),li&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you sent something"})})]}),g.jsxs("div",{className:"profile",children:[g.jsxs("div",{className:"fields",children:[g.jsxs("div",{className:"photo-section",children:[g.jsxs("div",{className:"profile-deals",children:[g.jsx("i",{className:"fa-regular fa-handshake fa-xl"}),g.jsx("h3",{children:c&&xt?xt:"0"})]}),g.jsxs("div",{className:"profile-rate",children:[g.jsx("i",{className:"fa-solid fa-star fa-xl"}),g.jsx("h3",{children:c&&xe/xt?(xe/xt).toFixed(1):"0"})]}),g.jsx("img",{src:(c==null?void 0:c.photoURL)=="/assets/avatar-28c1f46a.png"?Kr:c.photoURL})]}),g.jsx("h5",{className:"name",children:c&&c.name}),g.jsx("div",{className:"phoneNumber",children:(c==null?void 0:c.phoneNumber)=="Not available"?g.jsx("h2",{children:"not available"}):g.jsxs(g.Fragment,{children:[g.jsx("h2",{children:"+216"}),g.jsx("h2",{children:(rs=c==null?void 0:c.phoneNumber)==null?void 0:rs.substr(0,2)}),g.jsx("h2",{children:(ho=c==null?void 0:c.phoneNumber)==null?void 0:ho.substr(2,3)}),g.jsx("h2",{children:(fo=c==null?void 0:c.phoneNumber)==null?void 0:fo.substr(5,5)})]})}),g.jsx("div",{className:"bio",children:c&&c.bio}),D==null&&g.jsxs("form",{className:"offer-form",onSubmit:ts,children:[g.jsxs("div",{className:"offer-box",children:[g.jsx("input",{type:"text",onChange:Re=>{v(Re.target.value)},required:!0}),g.jsxs("div",{className:"offer-placeholder",children:[g.jsx("img",{src:qg,alt:""}),g.jsxs("h3",{children:["What you want ",ue," to do for you"]})]})]}),g.jsxs("div",{className:"offer-box",children:[g.jsx("input",{type:"text",onChange:Re=>{k(Re.target.value)},required:!0}),g.jsxs("div",{className:"offer-placeholder",children:[g.jsx("img",{src:Wg,alt:""}),g.jsx("h3",{children:"You will pay"})]}),g.jsx("button",{children:"Send Request"})]})]}),D=="waiting"&&g.jsxs("div",{className:"state-section",children:[g.jsxs("div",{className:"waiting",children:[g.jsx("span",{class:"material-symbols-outlined",children:"chat"}),g.jsxs("h2",{children:["Your Request Has Been Sent. Waiting For ",ue,"’s Response"]})]}),g.jsxs("div",{className:"cancel-request",onClick:Re=>{Re.preventDefault(),e(It(be,"requests",`${L}`)),I(null),hn(!0),setTimeout(()=>{hn(!1)},1500)},children:[g.jsx("span",{class:"material-symbols-outlined",children:"speaker_notes_off"}),g.jsx("h2",{children:"Cancel request"})]})]}),D=="refuse"&&g.jsxs("div",{className:"refused-state-section",children:[g.jsxs("div",{className:"refused",children:[g.jsx("span",{className:"material-symbols-outlined",children:"speaker_notes_off"}),g.jsxs("h2",{children:[ue," refused your request."]})]}),g.jsxs("div",{className:"message",children:[g.jsxs("div",{className:"message-title",children:[g.jsx("span",{className:"material-symbols-outlined",children:"chat"}),g.jsxs("h2",{children:["Message from ",ue]})]}),g.jsx("h2",{children:te})]}),g.jsx("button",{onClick:()=>{e(It(be,"requests",`${L}`)),window.location.reload(!1)},className:"profile-button",children:"ok"})]}),D=="accept"&&g.jsxs("div",{className:"accept-state-section",children:[g.jsxs("div",{className:"accept",children:[g.jsx("span",{class:"material-symbols-outlined",children:"mark_chat_read"}),g.jsxs("h2",{children:[ue," accepted your request."]})]}),g.jsxs("form",{onSubmit:de,className:"feedback-section",children:[g.jsxs("div",{children:[g.jsxs("label",{children:[g.jsx("span",{class:"material-symbols-outlined",children:"history_edu"}),g.jsx("h2",{children:"Write a review after you receive the service"})]}),g.jsx("input",{type:"text",onChange:Re=>{H(Re.target.value)},maxLength:100,defaultValue:B}),g.jsx("div",{className:"stars",children:[...Array(5)].map((Re,ft)=>{const Le=ft+1;return g.jsxs("label",{children:[g.jsx("input",{type:"radio",name:"rating",value:Le,onClick:()=>{F(Le)}}),g.jsx(Nf,{className:"star",size:25,color:Le<=(oe||X||P)?"#ffc107":"#e4e5e9",onMouseEnter:()=>Se(Le),onMouseLeave:()=>Se(null)})]})})})]}),g.jsx("button",{type:"submit",disabled:!X&&!P,children:"Add Review"})]})]}),g.jsxs("div",{className:"info-box",children:[g.jsxs("div",{className:"info",children:[g.jsx("img",{src:zC,alt:""}),g.jsx("h3",{children:c&&c.email})]}),g.jsx("div",{className:"info",children:(c==null?void 0:c.messanger)=="Not available"?g.jsxs("div",{className:"not-avai",children:[g.jsx("img",{src:Ds,alt:""}),g.jsx("h3",{children:"Not available"})]}):g.jsxs("a",{href:c==null?void 0:c.messanger,target:"_blank",children:[g.jsx("img",{src:Ds,alt:""}),g.jsxs("div",{children:[g.jsx("h3",{children:c==null?void 0:c.messanger}),g.jsx("h3",{children:"..."})]})]})}),g.jsx("div",{className:"info",children:(c==null?void 0:c.instagram)=="Not available"?g.jsxs("div",{className:"not-avai",children:[g.jsx("img",{src:Ds,alt:""}),g.jsx("h3",{children:"Not available"})]}):g.jsxs("a",{href:c==null?void 0:c.instagram,target:"_blank",children:[g.jsx("img",{src:GC,alt:""}),g.jsxs("div",{children:[g.jsx("h3",{children:c==null?void 0:c.instagram}),g.jsx("h3",{children:"..."})]})]})})]})]}),g.jsxs("div",{className:"offers-display",children:[g.jsxs("div",{className:"offers-section-title",children:[g.jsx("img",{src:VC,alt:""}),g.jsxs("h3",{children:[ue,"'s offers"]})]}),g.jsx("div",{className:"offers-section",children:Fe})]}),g.jsxs("div",{className:"reviews",children:[g.jsxs("div",{className:"reviews-title",children:[g.jsx("span",{className:"material-symbols-outlined",children:"history_edu"}),g.jsxs("h2",{children:["Reviews: (",G==null?void 0:G.length,")"]})]}),g.jsx("div",{className:"reviews-content",children:rr})]})]})]})}function hL(){return g.jsx("div",{children:g.jsx("a",{href:"/",children:"home"})})}function dL(t){return hl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"}}]})(t)}function fL(t){return hl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}}]})(t)}function pL(){const{user:t,deleteRequest:e,acceptRequest:r,refuseRequest:i}=Bn(),[s,o]=W.useState(),[l,c]=W.useState(),[h,f]=W.useState(),[v,y]=W.useState(),[k,D]=W.useState(),[I,L]=W.useState(),O=Fn(),[C,E]=W.useState(!1),[T,R]=W.useState(!1),[x,M]=W.useState(!1);W.useEffect(()=>{var K,V,B;ct(Yt(Ze(be,"requests"),bt("senderId","==",`${(K=ve.currentUser)==null?void 0:K.uid}`)),U=>{o(U.docs)}),ct(Yt(Ze(be,"requests"),bt("state","==","waiting"),bt("resId","==",`${(V=ve.currentUser)==null?void 0:V.uid}`)),U=>{c(U.docs)}),ct(Yt(Ze(be,"users"),bt("id","==",`${(B=ve.currentUser)==null?void 0:B.uid}`)),U=>{U.docs.forEach(P=>{D(P.id),L(P.data().deals)})})},[t]);const A=s==null?void 0:s.map(K=>{var V,B,U,P;if(K.data().state=="waiting")return g.jsxs("div",{className:"state-section",children:[g.jsxs("div",{className:"waiting",children:[g.jsx("span",{className:"material-symbols-outlined",children:"chat"}),g.jsxs("h2",{children:["Your Request Has Been Sent. Waiting For ",(V=K.data().resName)==null?void 0:V.split(" ")[0],"’s Response"]})]}),g.jsxs("div",{className:"cancel-request",onClick:()=>{e(It(be,"requests",`${K.id}`)),M(!0),setTimeout(()=>{M(!1)},1500)},children:[g.jsx("span",{className:"material-symbols-outlined",children:"speaker_notes_off"}),g.jsx("h2",{children:"Cancel request"})]})]},K.id);if(K.data().state=="refuse")return g.jsxs("div",{className:"refused-state-section",children:[g.jsxs("div",{className:"refused",children:[g.jsx("span",{className:"material-symbols-outlined",children:"speaker_notes_off"}),g.jsxs("h2",{children:[(B=K.data().resName)==null?void 0:B.split(" ")[0]," refused your request."]})]}),g.jsxs("div",{className:"message",children:[g.jsxs("div",{className:"message-title",children:[g.jsx("span",{className:"material-symbols-outlined",children:"chat"}),g.jsxs("h2",{children:["Message from ",(U=K.data().resName)==null?void 0:U.split(" ")[0]]})]}),g.jsx("h2",{children:K.data().message})]}),g.jsx("button",{onClick:()=>{e(It(be,"requests",`${K.id}`))},className:"profile-button",children:"ok"})]});if(K.data().state=="accept")return g.jsxs("div",{className:"accept-state-section",children:[g.jsxs("div",{className:"accept",children:[g.jsx("span",{class:"material-symbols-outlined",children:"mark_chat_read"}),g.jsxs("h2",{children:[(P=K.data().resName)==null?void 0:P.split(" ")[0]," accepted your request."]})]}),g.jsxs("div",{className:"see-more",onClick:()=>{O(`/users/${K.data().resId}`)},children:[g.jsx("span",{class:"material-symbols-outlined",children:"visibility"}),g.jsx("h2",{children:"See more"})]})]})}),$=l==null?void 0:l.map(K=>g.jsxs("div",{className:"requestR",children:[g.jsxs("div",{className:"request-content",children:[g.jsxs("div",{className:"the-content",children:[g.jsx("img",{src:qg,alt:""}),g.jsxs("p",{children:[g.jsxs("span",{children:[K.data().senderName," Wants : "]}),K.data().content]})]}),g.jsxs("div",{className:"the-content",children:[g.jsx("img",{src:Wg,alt:""}),g.jsxs("p",{children:[K.data().price,g.jsx("span",{id:"dt",children:"Dt"})]})]})]}),g.jsxs("div",{className:"thumbs",children:[g.jsx(fL,{onClick:()=>{r(It(be,"requests",`${K.id}`),k,I),E(!0),setTimeout(()=>{E(!1)},1500)},size:"30px",className:"thumb"}),g.jsx(dL,{onClick:()=>{y(!0)},id:"thumb-down",size:"30px",className:"thumb"})]}),v&&g.jsxs("form",{className:"justify",children:[g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{type:"text",onChange:V=>{f(V.target.value)}}),g.jsx("span",{children:"Why you refused the offer?(optional)"})]}),g.jsx("button",{onClick:V=>{V==null||V.preventDefault(),i(It(be,"requests",`${K.id}`),h,t.displayName),R(!0),setTimeout(()=>{R(!1)},1500)},children:"Send"})]})]}));return g.jsxs("div",{children:[g.jsxs("div",{className:"popups",children:[C&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you accpeted something"})}),T&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you refused something"})}),x&&g.jsx("div",{className:"pop",children:g.jsx("h3",{children:"you canceled something"})})]}),g.jsx("div",{className:"notification",children:g.jsxs("div",{className:"noti-content",children:[g.jsxs("div",{className:"received",children:[g.jsx("h5",{children:"Requests received"}),g.jsx("div",{className:"received-content",children:$})]}),g.jsxs("div",{className:"sent",children:[g.jsx("h5",{children:"Requests sent"}),g.jsx("div",{className:"sent-content",children:A})]})]})})]})}function gL(){return g.jsx("div",{children:g.jsxs("div",{className:"about",children:[g.jsx("div",{className:"square"}),g.jsxs("div",{className:"text",children:[g.jsx("h2",{className:"h2",children:"Etudyonet Makes student life"}),g.jsx("span",{children:"Simple"})]}),g.jsxs("div",{className:"men",children:[g.jsxs("div",{className:"man1",children:[g.jsx("div",{className:"head",children:g.jsx("h2",{children:"Community"})}),g.jsxs("div",{className:"body",children:[g.jsx("h2",{children:"As an Etudiant, only Etudyonet can solve your problems."}),g.jsx("h3",{children:"We all know that students can provide more than people think they can."}),g.jsx("h3",{children:" That's why we created Etudyonet, a platform where you can find students from all parts of Tunisia."})]})]}),g.jsxs("div",{className:"man2",children:[g.jsx("div",{className:"head",children:g.jsx("h2",{children:"Side hustle"})}),g.jsxs("div",{className:"body",children:[g.jsx("h2",{children:"On Etudyonet, you get paid for doing what you love."}),g.jsx("h3",{children:"Provide what you love doing to others as a service and get paid!"})]})]}),g.jsxs("div",{className:"man3",children:[g.jsx("div",{className:"head",children:g.jsx("h2",{children:"Market"})}),g.jsxs("div",{className:"body",children:[g.jsx("h2",{children:"Etudyonet provide more than experts."}),g.jsx("h3",{children:"Students can be better than experts at doing what they love!"})]})]})]})]})})}function mL(){const[t,e]=W.useState(),[r,i]=W.useState(),[s,o]=W.useState(),{user:l,updateUser:c}=Bn(),[h,f]=W.useState(!1),[v,y]=W.useState(),[k,D]=W.useState(),[I,L]=W.useState(),[O,C]=W.useState(),[E,T]=W.useState(),[R,x]=W.useState(),[M,A]=W.useState(),[$,K]=W.useState(),[V,B]=W.useState(),[U,P]=W.useState(),[Q,z]=W.useState(),[H,X]=W.useState();W.useEffect(()=>{var G;ct(Yt(Ze(be,"users"),bt("id","==",`${(G=ve==null?void 0:ve.currentUser)==null?void 0:G.uid}`)),J=>{J.docs.forEach(te=>{z(te.data().name),y(te.data().email),L(te.data().bio),T(te.data().messanger),A(te.data().instagram),B(te.data().phoneNumber),i(te.data().passowrd),o(te.id)})})},[l]);const F=async G=>{G.preventDefault(),e("");try{await c(k,v,s,O,I,R,E,$,M,U,V,H,Q),f(!1)}catch(J){e(J.message),console.log(J.message)}};return g.jsx("div",{className:"settings",children:g.jsxs("form",{onSubmit:F,children:[t&&g.jsx("p",{id:"error",children:"tchu tchu motherfucker"}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:G=>{X(G.target.value)},defaultValue:Q,required:!0}),g.jsx("span",{children:"Username"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:G=>{D(G.target.value)},defaultValue:v,required:!0}),g.jsx("span",{children:"Email"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("textarea",{onChange:G=>{C(G.target.value)},defaultValue:I,required:!0,maxLength:600}),g.jsxs("p",{className:"letter-counter",children:[O?O.length:I==null?void 0:I.length,"/600"]}),g.jsx("span",{children:"Bio"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:G=>{x(G.target.value)},defaultValue:E,required:!0}),g.jsx("span",{children:"Messenger link"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{onChange:G=>{K(G.target.value)},defaultValue:M,required:!0}),g.jsx("span",{children:"Instagram link"})]}),g.jsxs("div",{className:"inputBox",children:[g.jsx("input",{type:"text",onChange:G=>{P(G.target.value)},defaultValue:V=="Not available"?"00000000":V,pattern:"\\d+",minLength:8,maxLength:"8",required:!0}),g.jsx("span",{children:"Phone number"})]}),h?g.jsx("button",{children:g.jsx("i",{className:"fa fa-spinner fa-spin"})}):g.jsx("button",{onClick:()=>{f(!0)},children:"update"})]})})}function vL(){return g.jsx("div",{children:g.jsxs(XD,{children:[g.jsx(nL,{}),g.jsxs(ST,{children:[g.jsx(qn,{path:"/",element:g.jsx(iL,{})}),g.jsx(qn,{path:"/about",element:g.jsx(gL,{})}),g.jsx(qn,{path:"/settings",element:g.jsx(sd,{children:g.jsx(mL,{})})}),g.jsx(qn,{path:"/profile",element:g.jsx(sd,{children:g.jsx(aL,{})})}),g.jsx(qn,{path:"/users/:id",element:g.jsx(cL,{})}),g.jsx(qn,{path:"/notifications",element:g.jsx(sd,{children:g.jsx(pL,{})})}),g.jsx(qn,{path:"/signin",element:g.jsx(o0,{children:g.jsx(lL,{})})}),g.jsx(qn,{path:"/signup",element:g.jsx(o0,{children:g.jsx(uL,{})})}),g.jsx(qn,{path:"*",element:g.jsx(hL,{})})]})]})})}od.createRoot(document.getElementById("root")).render(g.jsx(fr.StrictMode,{children:g.jsx(CT,{children:g.jsx(vL,{})})}));
